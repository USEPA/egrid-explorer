{"version":3,"sources":["assets/data/csv/GGL.csv","assets/data/csv/US.csv","assets/img/coal.svg","assets/img/gas.svg","assets/img/hydro.svg","assets/img/nuclear.svg","assets/img/oil.svg","assets/img/papaya.svg","assets/img/solar.svg","assets/img/wind.svg","serviceWorker.js","Dialog.js","Sentence.js","OtherLevelMap.js","OtherLevelMapLegend.js","OtherLevelBarchart.js","Table.js","PlantLevelMapZoom.js","PlantLevelMapStatic.js","ResourceMixChart.js","Visualization.js","Main.js","App.js","index.js","assets/img/logo.png","assets/data/csv/eGRID all-level sentence structure.csv","assets/data/csv/subregion.csv","assets/data/csv/NERC.csv","assets/data/csv/state.csv","assets/data/csv/eGRID state fullname.csv","assets/data/csv/plant.csv"],"names":["module","exports","Boolean","window","location","hostname","match","Dialog","props","Modal","size","aria-labelledby","centered","Header","closeButton","Title","id","Body","Footer","Button","variant","onClick","onHide","SentenceDropdown","opts","selected_option","this","available_options","options","some","option","opt","updated_tier","indexOf","key","value","disabled","push","onChange","change","Component","SentenceMiscellaneous","OtherLevelMap","tooltip","React","createRef","background","map","labels","d","d3","isNaN","Math","floor","layer","label_width","layer_type","label_height","projection","d3_composite","scale","translate","width","height","path","map_fill","features","data","filter","e","name","prop","centroid","properties","label","fill_scale","range","domainArr","sort","a","b","domain","length","current","selectAll","remove","enter","append","attr","style","on","transition","duration","html","title","slice","toLowerCase","split","unit","pageY","pageX","classed","text","background_layer","initView","prevProps","field","fontSize","fontWeight","fill","className","textAnchor","formatNumber","us_data","ref","opacity","maxWidth","maxHeight","padding","overflow","backgroundColor","boxShadow","borderRadius","OtherLevelMapLegend","legend","t","num","substring","d3_legend","shape","shapeWidth","shapeHeight","shapePadding","labelOffset","orient","labelFormat","labelAlign","i","label_str","generatedLabels","node","call","formatLegendLabel","OtherLevelBarchart","barchart","axis_x","axis_y","axis_x_title","state","sort_by","by","marginLeft","barFillScale","barXScale","barYScale","paddingInner","paddingOuter","bars","bandwidth","formatLabel","ticks","tickFormat","formatXaxis","updateView","prevState","ToggleButtonGroup","type","defaultValue","val","setState","ToggleButton","UpdatedTable","startsWith","Table","striped","bordered","hover","responsive","region","table_info","COAL","US_COAL","OIL","US_OIL","GAS","US_GAS","NUCLEAR","US_NUCLEAR","HYDRO","US_HYDRO","BIOMASS","US_BIOMASS","WIND","US_WIND","SOLAR","US_SOLAR","GEOTHERMAL","US_GEOTHERMAL","OFSL","US_OFSL","OTHF","US_OTHF","TNPR","US_TNPR","THPR","US_THPR","CYPR","US_CYPR","CNPR","US_CNPR","PNAME","ORISPL","PSTATABB","href","SUBRGN","PLPRMFL","NAMEPCAP","CAPFAC","PLNGENAN","PLHTIANT","PLNOXAN","PLNOXRTA","PLNOXOZ","PLNOXRTO","PLSO2AN","PLSO2RTA","PLCO2AN","PLCO2RTA","PLCH4AN","PLCH4RTA","PLN2OAN","PLN2ORTA","PLCO2EQA","PLC2ERTA","mapboxgl","accessToken","PlantLevelMapZoom","fuels","selected_fuel","field_factor_divided_by","max_radius","max_radius_before_remove","zoom_factor","legend_len","legend_percentile","filter_text","filter_reset_text","w","clientWidth","h","clientHeight","boxlen","fuels_svg","fuel_icon_lookup","min","fuel_color_lookup","fuel_label_lookup","wrap_long_labels","insert","n","loaded","concat","plant_data","plant_outlier","getSource","setData","setRadius","select","factor","updateLegend","JSON","stringify","FUEL","init_zoom","init_center","Map","container","center","zoom","minzoom","min_zoom","maxzoom","max_zoom","addControl","NavigationControl","FullscreenControl","ResetControl","_map","_container","document","createElement","innerHTML","cursor","onclick","flyTo","parentNode","removeChild","undefined","LayerControl","nodes","Legend","addSource","addLayer","source","paint","circle_opacity","show_tooltip","hoveredPlantId","Popup","closeOnClick","anchor","setFeatureState","getCanvas","setLngLat","geometry","coordinates","setText","addTo","getLngLat","lng","lat","Object","keys","forEach","description","renderToString","setHTML","field_values","radius_values","getZoom","legend_values","legend_cells","formatLegend","static_map_scale","setPaintProperty","updateStaticMap","PlantLevelMapStatic","svg","initStaticMap","ResourceMixChart","wrapper","barchart_wrapper","micromap","sort_text","w_legend","h_legend","fuel_name_lookup","fuel_names","fuel_colors","values","_","cumsum","f","w_micro","h_micro","fuel","each","margin","Visualization","console","log","tier1","tier2","tier4","tier5","resource_mix_data","updateState","category","lookup","choropleth_data","replace","subrgn_data","subrgn_layer","nerc_data","nerc_layer","state_data","state_layer","ggl_data","ggl_layer","choropleth_map_fill","emission","generation","others","plant_fuels","LON","LAT","vis","coal","oil","gas","nuclear","hydro","wind","solar","papaya","HYPR","endsWith","Spinner","animation","UpdatedVisualization","exportStaticMap","bind","exportVis","zoomable_status","static_status","print","Main","init_options","Units","all_options","tier1_available_options","tier2_available_options","tier4_available_options","tier5_available_options","handleChange1","handleChange2","handleChange4","handleChange5","event","target","t2_avail","t2_val","t4_avail","t4_val","t5_avail","t5_val","tier2_options","op","tier4_options","tier5_options","conjunction","conjunct1","conjunct2","conjunct3","conjunct4","year","App","show_modal","tier1_0","tier1_1","tier1_2","tier1_3","tier1_4","tier1_5","tier1_6","tier1_7","tier1_8","tier1_9","PLNOXRA","PLNOXRO","PLSO2RA","PLCO2RA","PLNGENOZ","PLGENACL","PLGENAOL","PLGENAGS","PLGENANC","PLGENAHY","PLGENABM","PLGENAWI","PLGENASO","PLGENAGT","PLGENAOF","PLGENAOP","PLGENATN","PLGENATR","PLGENATH","PLGENACY","PLGENACN","PLHTIAN","PLHTIOZ","word","words","reverse","line","lineNumber","x","y","dy","parseFloat","tspan","pop","join","getComputedTextLength","topojson","ggl_topo","subrgn_topo","nerc_topo","us_topo","GGL","NERC","Subregions","prepData","Promise","all","subrgn","statefullname","nerc","plant","ggl","us","then","state_fullname","ABBR","STATE","STATEFULL","FIPSST","percentage","src","logo","show","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.5249ed36.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/GGL.5324b8ca.csv\";","module.exports = __webpack_public_path__ + \"static/media/US.083cfe3a.csv\";","module.exports = __webpack_public_path__ + \"static/media/coal.9692c7b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/gas.383feb87.svg\";","module.exports = __webpack_public_path__ + \"static/media/hydro.d3125ed9.svg\";","module.exports = __webpack_public_path__ + \"static/media/nuclear.2a50e8cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/oil.9b1b3165.svg\";","module.exports = __webpack_public_path__ + \"static/media/papaya.303f93a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/solar.bb67ad70.svg\";","module.exports = __webpack_public_path__ + \"static/media/wind.d4de7a67.svg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nfunction Dialog(props) {\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      size=\"lg\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Use Instruction\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <p>\r\n          Use the drop down arrows to query the data you would like to view. You\r\n          can change the main data displayed (emission rates, generation, etc.),\r\n          the pollutant type (CO2, NOx, etc.), the fuel type (coal, gas, etc.),\r\n          and the geographic representation (state, eGRID subregion, plant,\r\n          etc.), where applicable. Note that non-baseload emission rates and\r\n          non-baseload generation are not available at the plant level.\r\n        </p>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={props.onHide}>Close</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default Dialog;\r\n","import React, { Component } from \"react\";\n\nclass SentenceDropdown extends Component {\n  render() {\n    const opts = [];\n    let selected_option = this.props.selected_option,\n      available_options = this.props.available_options;\n\n    this.props.options.some((option) => {\n      let opt = null;\n      if (this.props.id === \"tier1\") {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={false}>\n            {option[1]}\n          </option>\n        );\n      } else if (this.props.id === this.props.updated_tier) {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={false}>\n            {option[1]}\n          </option>\n        );\n      } else if (available_options.indexOf(option[0]) !== -1) {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={false}>\n            {option[1]}\n          </option>\n        );\n      } else if (available_options.indexOf(option[0]) === -1) {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={true}>\n            {option[1]}\n          </option>\n        );\n      }\n      opts.push(opt);\n    });\n\n    return (\n      <select value={selected_option} onChange={this.props.change}>\n        {opts}\n      </select>\n    );\n  }\n}\n\nclass SentenceMiscellaneous extends Component {\n  render() {\n    return <span>{this.props.value}</span>;\n  }\n}\n\nexport { SentenceDropdown, SentenceMiscellaneous };\n","import React, { Component } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3_composite from \"d3-composite-projections\";\r\n\r\nclass OtherLevelMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tooltip = React.createRef();\r\n    this.background = React.createRef();\r\n    this.map = React.createRef();\r\n    this.labels = React.createRef();\r\n  }\r\n\r\n  formatNumber(d) {\r\n    if (d < 1) {\r\n      return d3.format(\".3f\")(d);\r\n    } else if (d >= 1000000) {\r\n      return d3.format(\",.0f\")(d);\r\n    } else {\r\n      return isNaN(d) ? \"\" : d3.format(\",.2f\")(Math.floor(d * 100) / 100);\r\n    }\r\n  }\r\n\r\n  initView() {\r\n    const layer = this.props.layer,\r\n      label_width =\r\n        this.props.layer_type === \"grid gross loss rates\"\r\n          ? 120\r\n          : this.props.layer_type === \"state\"\r\n          ? 20\r\n          : 40,\r\n      label_height =\r\n        this.props.layer_type !== \"grid gross loss rates\" ? 14 : 22;\r\n\r\n    const projection = d3_composite\r\n      .geoAlbersUsaTerritories()\r\n      .scale(this.props.scale)\r\n      .translate([this.props.width / 2, this.props.height / 2.5]);\r\n    const path = d3.geoPath().projection(projection);\r\n    const map_fill = this.props.map_fill;\r\n\r\n    // add centroid to layer\r\n    layer.features = layer.features\r\n      .map((d) => {\r\n        if (this.props.data.filter((e) => e.name === d.name)[0]) {\r\n          let prop = this.props.data.filter((e) => e.name === d.name)[0];\r\n          prop.centroid = path.centroid(d);\r\n          d.properties = prop;\r\n        } else {\r\n          d.properties = {id: null, name: null, label: null, value: null, centroid:[null, null]};\r\n        }\r\n        return d;\r\n      });\r\n\r\n    // add fill scale\r\n    let fill_scale = d3.scaleThreshold().range(map_fill);\r\n    let domainArr = layer.features\r\n      .map((e) => e.properties.value)\r\n      .sort((a, b) => a - b);\r\n    fill_scale.domain(\r\n      d3\r\n        .range(map_fill.length - 1)\r\n        .map((d) => d3.quantile(domainArr, (d + 1) / map_fill.length))\r\n    );\r\n\r\n    // add layers\r\n    d3.select(this.map.current).selectAll(\"path\").remove();\r\n    d3.select(this.map.current)\r\n      .selectAll(\"path\")\r\n      .data(layer.features)\r\n      .enter()\r\n      .append(\"path\")\r\n      .attr(\"d\", path)\r\n      .attr(\"class\", (d) => \"paths mouseover_target region_\" + d.properties.id)\r\n      .style(\"fill\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\"\r\n          ? fill_scale(d.properties.value)\r\n          : \"transparent\"\r\n      )\r\n      .style(\"stroke\", \"#000\")\r\n      .style(\"stroke-width\", 0.5)\r\n      .on('mouseover', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(100)\r\n        .style(\"opacity\", 1);\r\n      })\r\n      .on('mousemove', d=>{\r\n        let html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.properties.name + \"</b><br>is <b>\" + d.properties.value + \" \" + d.properties.unit + \"</b>.</span>\";\r\n        d3.select(this.tooltip.current)\r\n        .html(html)\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"top\", d3.event.pageY + 30 + \"px\")\r\n        .style(\"left\", d3.event.pageX - 150 + \"px\")\r\n        .style(\"opacity\", 1);\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true);\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true);\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true);\r\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true);\r\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true);\r\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true);\r\n      })\r\n      .on('mouseout', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(500)\r\n        .style(\"opacity\", 0);\r\n\r\n        d3.selectAll('.deemphasized').classed('deemphasized', false);\r\n        d3.selectAll('.selected').classed('selected', false);\r\n      });\r\n\r\n    // add labels\r\n    d3.select(this.labels.current).selectAll(\"g\").remove();\r\n    let labels = d3\r\n      .select(this.labels.current)\r\n      .selectAll(\"g\")\r\n      .data(layer.features)\r\n      .enter()\r\n      .append(\"g\");\r\n\r\n    labels\r\n      .append(\"rect\")\r\n      .attr(\"x\", (d) => d.properties.centroid[0] - label_width / 2)\r\n      .attr(\"y\", (d) => d.properties.centroid[1])\r\n      .attr(\"width\", label_width)\r\n      .attr(\"height\", label_height)\r\n      .attr(\"rx\", 4)\r\n      .style(\"fill\", \"#fff\")\r\n      .style(\"stroke\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\" ? \"none\" : \"#000\"\r\n      );\r\n\r\n    labels\r\n      .append(\"text\")\r\n      .attr(\"x\", (d) => d.properties.centroid[0])\r\n      .attr(\"y\", (d) => d.properties.centroid[1] + label_height * 0.8)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"font-size\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\" ? \"0.7em\" : \"1em\"\r\n      )\r\n      .style(\"font-weight\", \"bold\")\r\n      .text((d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\"\r\n          ? d.properties.label\r\n          : d.properties.label + \": \" + d.properties.value + \"%\"\r\n      ).on('mouseover', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(100)\r\n        .style(\"opacity\", 1);\r\n      })\r\n      .on('mousemove', d=>{\r\n        let html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.properties.name + \"</b><br>is <b>\" + d.properties.value + \" \" + d.properties.unit + \"</b>.</span>\";\r\n        d3.select(this.tooltip.current)\r\n        .html(html)\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"top\", d3.event.pageY + 30 + \"px\")\r\n        .style(\"left\", d3.event.pageX - 150 + \"px\")\r\n        .style(\"opacity\", 1);\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true);\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true);\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true);\r\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true);\r\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true);\r\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true);\r\n      })\r\n      .on('mouseout', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(500)\r\n        .style(\"opacity\", 0);\r\n\r\n        d3.selectAll('.deemphasized').classed('deemphasized', false);\r\n        d3.selectAll('.selected').classed('selected', false);\r\n      });\r\n\r\n    // add background (grid gross loss rates)\r\n    if (this.props.layer_type === \"grid gross loss rates\") {\r\n      d3.select(this.background.current).selectAll(\"path\").remove();\r\n      d3.select(this.background.current)\r\n        .selectAll(\"path\")\r\n        .data(this.props.background_layer.features)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", path)\r\n        .attr(\"class\", \"paths\")\r\n        .style(\"fill\", \"transparent\")\r\n        .style(\"stroke\", \"rgb(221, 221, 221)\");\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initView();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.initView();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let title = (\r\n      <div>\r\n        <p\r\n          style={{\r\n            fontSize: \"1.2em\",\r\n            fontWeight: \"bold\",\r\n            fill: \"#000\",\r\n            className: \"title\",\r\n            textAnchor: \"middle\",\r\n          }}\r\n        >\r\n          {this.props.title}\r\n        </p>\r\n        {this.props.layer_type !== \"grid gross loss rates\" && (\r\n          <p\r\n            style={{\r\n              fontSize: \"1em\",\r\n              fontWeight: \"bold\",\r\n              fill: \"#000\",\r\n              className: \"title\",\r\n              textAnchor: \"middle\",\r\n            }}\r\n          >\r\n            {\"US: \" +\r\n              this.formatNumber(this.props.us_data[0][this.props.field]) +\r\n              \"(\" +\r\n              this.props.unit +\r\n              \")\"}\r\n          </p>\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        {title}\r\n        <svg width={this.props.width} height={this.props.height}>\r\n          <g ref={this.background} />\r\n          <g ref={this.map} />\r\n          <g ref={this.labels} />\r\n        </svg>\r\n        <div\r\n          ref={this.tooltip}\r\n          style={{\r\n            opacity: 0,\r\n            maxWidth: 400,\r\n            maxHeight: 520,\r\n            padding: 5,\r\n            overflow: \"auto\",\r\n            backgroundColor: \"rgba(255,255,255,0.95)\",\r\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\r\n            borderRadius: \"4px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OtherLevelMap;\r\n","import React, { Component} from \"react\";\nimport * as d3 from \"d3\";\nimport * as d3_legend from \"d3-svg-legend\";\n\nclass OtherLevelMapLegend extends Component {\n  constructor(props) {\n    super(props);\n    this.legend = React.createRef();\n  }\n\n  formatLegendLabel(t) {\n    if (t >= 1000) {\n      let num = d3.format(\".2s\")(t);\n      let abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      return num;\n    } else {\n      return d3.format(\".3\")(t);\n    }\n  }\n  render() {\n    const map_fill = this.props.map_fill;\n    let fill_scale = d3.scaleThreshold().range(map_fill);\n    let domainArr = this.props.data.map((e) => e.value).sort((a, b) => a - b);\n    fill_scale.domain(\n      d3\n        .range(map_fill.length - 1)\n        .map((d) => d3.quantile(domainArr, (d + 1) / map_fill.length))\n    );\n\n    let legend = d3_legend\n      .legendColor()\n      .scale(fill_scale)\n      .shape(\"rect\")\n      .shapeWidth(90)\n      .shapeHeight(10)\n      .shapePadding(0)\n      .labelOffset(10)\n      .orient(\"horizontal\")\n      .scale(fill_scale)\n      .labelFormat(d3.format(\".3f\"))\n      .labelAlign(\"start\")\n      .labels((d) => {\n        if (d.i === 0) {\n          return 0;\n        } else {\n          let label_str = d.generatedLabels[d.i - 1].split(\" \");\n          return label_str[label_str.length - 1];\n        }\n      });\n\n    return (\n      <svg width={this.props.width} height={this.props.height}>\n        <g\n          ref={(node) =>\n            d3\n              .select(node)\n              .call(legend)\n              .selectAll(\"text\")\n              .text(this.formatLegendLabel)\n          }\n        ></g>\n      </svg>\n    );\n  }\n}\n\nexport default OtherLevelMapLegend;\n","import React, { Component } from \"react\";\nimport ToggleButtonGroup from \"react-bootstrap/ToggleButtonGroup\";\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\n\nimport * as d3 from \"d3\";\nclass OtherLevelBarchart extends Component {\n  constructor(props) {\n    super(props);\n    this.barchart = React.createRef();\n    this.axis_x = React.createRef();\n    this.axis_y = React.createRef();\n    this.axis_x_title = React.createRef();\n    this.tooltip = React.createRef();\n    this.state = {\n      sort_by: \"alphabet\",\n    };\n  }\n\n  formatXaxis(d) {\n    if (d >= 1000) {\n      let num = d3.format(\".2s\")(d);\n      let abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      let chars1 = num.slice(-3);\n      let chars2 = chars1.substring(0, 2);\n      if (chars2 === \".0\") {\n        num = num.slice(0, -3) + num.slice(-1);\n        return num;\n      }\n      return num;\n    } else if (d >= 1 && d < 10) {\n      return d3.format(\".2\")(d);\n    } else if (d < 1) {\n      return d3.format(\".3\")(d);\n    } else {\n      return d3.format(\".0f\")(d);\n    }\n  }\n\n  formatNumber(d) {\n    if (d < 1) {\n      return d3.format(\".3f\")(d);\n    } else if (d >= 1000000) {\n      return d3.format(\",.0f\")(d);\n    } else {\n      return isNaN(d) ? \"\" : d3.format(\",.2f\")(Math.floor(d * 100) / 100);\n    }\n  }\n\n  formatLabel(d) {\n    if (d >= 1000000) {\n      var num = d3.format(\".2s\")(d);\n      var abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      var chars1 = num.slice(-3);\n      var chars2 = chars1.substring(0, 2);\n      if (chars2 === \".0\") {\n        num = num.slice(0, -3) + num.slice(-1);\n        return num;\n      }\n      return num;\n    } else if (d >= 1 && d < 10) {\n      return d3.format(\".2\")(d);\n    } else if (d < 1) {\n      return d3.format(\".3\")(d);\n    } else {\n      return isNaN(d) ? \"\" : d3.format(\",.0f\")(d);\n    }\n  }\n\n  initView(by) {\n    // scale\n    let marginTop = 40,\n      marginBottom = 0,\n      marginRight = 60,\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\n    let barFillScale = d3.scaleThreshold().range(this.props.map_fill),\n      barXScale = d3\n        .scaleLinear()\n        .range([0, this.props.width - marginLeft - marginRight])\n        .domain(d3.extent(this.props.data, (e) => e.value)),\n      barYScale = d3\n        .scaleBand()\n        .range([0, this.props.height - marginTop - marginBottom])\n        .domain(this.props.data.map((d) => d.name))\n        .paddingInner(0.1)\n        .paddingOuter(0.2);\n\n    // update scale domain\n    let domainArr = this.props.data.map((e) => e.value).sort((a, b) => a - b);\n    barFillScale.domain(\n      d3\n        .range(this.props.map_fill.length - 1)\n        .map((d) => d3.quantile(domainArr, (d + 1) / this.props.map_fill.length))\n    );\n\n    // bars\n    d3.select(this.barchart.current).selectAll(\"g\").remove();\n    let bars = d3\n      .select(this.barchart.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\n      .append(\"g\")\n      .selectAll(\"g\")\n      .data(this.props.data)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", d=>\"bars mouseover_target barchart_mouseover_target\" + \" region_\" + d.id)\n      .attr(\"transform\", (d) => \"translate(0,\" + barYScale(d.name) + \")\");\n\n    bars\n      .append(\"rect\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"width\", (d) => barXScale(d.value))\n      .attr(\"height\", barYScale.bandwidth())\n      .style(\"fill\", (d) => barFillScale(d.value));\n\n    bars\n      .append(\"text\")\n      .attr(\"class\", \"labels\")\n      .attr(\"x\", (d) => barXScale(d.value))\n      .attr(\"y\", 0)\n      .attr(\"dx\", 5)\n      .attr(\"dy\", barYScale.bandwidth() / 2 + 5)\n      .text((d) => this.formatLabel(d.value))\n      .style(\"fill\", \"#000\")\n      .style(\"stroke\", \"none\");\n\n    // axis\n    d3.select(this.axis_x.current).selectAll(\"g\").remove();\n    d3.select(this.axis_x.current)\n      .attr(\"class\", \"axis_x\")\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\n      .call(d3.axisTop(barXScale).ticks(5).tickFormat(this.formatXaxis))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"rotate(-30)\");\n\n    d3.select(this.axis_x_title.current)\n      .attr(\n        \"transform\",\n        \"translate(\" +\n          (this.props.width - marginRight + 5) +\n          \",\" +\n          marginTop +\n          \")\"\n      )\n      .style(\"fill\", \"#000\")\n      .style(\"text-anchor\", \"start\")\n      .style(\"stroke\", \"none\")\n      .style(\"font-size\", \"0.75em\")\n      .text(this.props.unit);\n\n    d3.select(this.axis_y.current).selectAll(\"g\").remove();\n    d3.select(this.axis_y.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\n      .attr(\"class\", \"axis_y\")\n      .call(d3.axisLeft(barYScale))\n      .selectAll('.tick')\n      .attr('class', d=>'tick mouseover_target barchart_mouseover_target region_'+ this.props.data.filter(e=>e.name===d).map(e=>e.id)[0]);\n    \n    d3.selectAll('.barchart_mouseover_target')\n    .on('mouseover', d=>{\n      d3.select(this.tooltip.current)\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 1);\n    })\n    .on('mousemove', d=>{\n      let html, id;\n      if (typeof(d)===\"object\") {\n        id = d.id;\n        html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.name + \"</b><br>is <b>\" + d.value + \" \" + d.unit + \"</b>.</span>\";\n      } else if (typeof(d)===\"string\") {\n        id = this.props.data.filter(e=>e.name===d).map(e=>e.id)[0];\n        html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d + \"</b><br>is <b>\" + this.props.data.filter(e=>e.name===d).map(e=>e.value)[0] + \" \" + this.props.data.filter(e=>e.name===d).map(e=>e.unit)[0] + \"</b>.</span>\";\n      }\n      \n      d3.select(this.tooltip.current)\n      .html(html)\n      .style(\"position\", \"absolute\")\n      .style(\"top\", d3.event.pageY - 30 + \"px\")\n      .style(\"left\", d3.event.pageX + 30 + \"px\")\n      .style(\"opacity\", 1);\n\n      d3.selectAll('.region_'+id+' rect').classed('selected', true);\n      d3.selectAll('.region_'+id+' text').classed('selected', true);\n      d3.selectAll('path.region_'+id).classed('selected', true);\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true);\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true);\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true);\n    })\n    .on('mouseout', d=>{\n      d3.select(this.tooltip.current)\n      .transition()\n      .duration(500)\n      .style(\"opacity\", 0);\n\n      d3.selectAll('.deemphasized').classed('deemphasized', false);\n      d3.selectAll('.selected').classed('selected', false);\n    });\n\n    this.updateView(by);\n  }\n\n  updateView(by) {\n    let marginTop = 40,\n      marginBottom = 0;\n    let barYScale = d3\n      .scaleBand()\n      .range([0, this.props.height - marginTop - marginBottom])\n      .domain(\n        this.props.data\n          .sort((a, b) =>\n            by === \"amount\"\n              ? d3.descending(a.value, b.value)\n              : d3.ascending(a.name, b.name)\n          )\n          .map((d) => d.name)\n      )\n      .paddingInner(0.1)\n      .paddingOuter(0.2);\n\n    d3.select(this.barchart.current)\n      .selectAll(\".bars\")\n      .transition()\n      .attr(\"transform\", (d) => \"translate(0,\" + barYScale(d.name) + \")\");\n\n    d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\n  }\n\n  componentDidMount() {\n    this.initView(this.state.sort_by);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.field !== prevProps.field) {\n      this.initView(this.state.sort_by);\n    } else {\n      if (this.state.sort_by !== prevState.sort_by) {\n        this.updateView(this.state.sort_by);\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <ToggleButtonGroup\n          type=\"radio\"\n          name=\"options\"\n          defaultValue={this.state.sort_by}\n          onChange={(val) => this.setState({ sort_by: val })}\n        >\n          <ToggleButton value={\"alphabet\"}>Sort Alphabetically</ToggleButton>\n          <ToggleButton value={\"amount\"}>Sort by Amount</ToggleButton>\n        </ToggleButtonGroup>\n        <svg width={this.props.width} height={this.props.height}>\n          <g className={\"axis\"}>\n            <g ref={this.axis_x}></g>\n            <text ref={this.axis_x_title}></text>\n            <g ref={this.axis_y}></g>\n          </g>\n\n          <g ref={this.barchart}></g>\n        </svg>\n        <div\n          ref={this.tooltip}\n          style={{\n            opacity: 0,\n            maxWidth: 400,\n            maxHeight: 520,\n            padding: 5,\n            overflow: \"auto\",\n            backgroundColor: \"rgba(255,255,255,0.95)\",\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\n            borderRadius: \"4px\",\n          }}\n        ></div>\n      </div>\n    );\n  }\n}\n\nexport default OtherLevelBarchart;\n","import React, { Component } from \"react\";\nimport Table from \"react-bootstrap/Table\";\n\nclass UpdatedTable extends Component {\n  render() {\n    return (\n      <div>\n        {this.props.title.startsWith(\"Resource Mix\") ? (\n          <Table striped bordered hover responsive=\"sm\">\n            <thead>\n              <tr>\n                <th>Generation by Fuel Type</th>\n                {this.props.region !== \"US\" && (\n                  <th>\n                    {this.props.region}\n                    {\" Resource Mix (%)\"}\n                  </th>\n                )}\n                <th>US Resource Mix (%)</th>\n              </tr>\n            </thead>\n            {this.props.title === \"Resource Mix by all fuel types\" && (\n              <tbody>\n                {+this.props.table_info.COAL !== 0 && (\n                  <tr className={this.props.type === \"COAL\" ? \"selected\" : \"\"}>\n                    <td>Coal</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.COAL}</td>\n                    )}\n                    <td>{this.props.table_info.US_COAL}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.OIL !== 0 && (\n                  <tr className={this.props.type === \"OIL\" ? \"selected\" : \"\"}>\n                    <td>Oil</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.OIL}</td>\n                    )}\n                    <td>{this.props.table_info.US_OIL}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.GAS !== 0 && (\n                  <tr className={this.props.type === \"GAS\" ? \"selected\" : \"\"}>\n                    <td>Gas</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.GAS}</td>\n                    )}\n                    <td>{this.props.table_info.US_GAS}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.NUCLEAR !== 0 && (\n                  <tr\n                    className={this.props.type === \"NUCLEAR\" ? \"selected\" : \"\"}\n                  >\n                    <td>Nuclear</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.NUCLEAR}</td>\n                    )}\n                    <td>{this.props.table_info.US_NUCLEAR}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.HYDRO !== 0 && (\n                  <tr className={this.props.type === \"HYDRO\" ? \"selected\" : \"\"}>\n                    <td>Hydro</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.HYDRO}</td>\n                    )}\n                    <td>{this.props.table_info.US_HYDRO}</td>\n                  </tr>\n                )}\n\n                {+this.props.table_info.BIOMASS !== 0 && (\n                  <tr\n                    className={this.props.type === \"BIOMASS\" ? \"selected\" : \"\"}\n                  >\n                    <td>Biomass</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.BIOMASS}</td>\n                    )}\n                    <td>{this.props.table_info.US_BIOMASS}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.WIND !== 0 && (\n                  <tr className={this.props.type === \"WIND\" ? \"selected\" : \"\"}>\n                    <td>Wind</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.WIND}</td>\n                    )}\n                    <td>{this.props.table_info.US_WIND}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.SOLAR !== 0 && (\n                  <tr className={this.props.type === \"SOLAR\" ? \"selected\" : \"\"}>\n                    <td>Solar</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.SOLAR}</td>\n                    )}\n                    <td>{this.props.table_info.US_SOLAR}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.GEOTHERMAL !== 0 && (\n                  <tr\n                    className={\n                      this.props.type === \"GEOTHERMAL\" ? \"selected\" : \"\"\n                    }\n                  >\n                    <td>Geothermal</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.GEOTHERMAL}</td>\n                    )}\n                    <td>{this.props.table_info.US_GEOTHERMAL}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.OFSL !== 0 && (\n                  <tr className={this.props.type === \"OFSL\" ? \"selected\" : \"\"}>\n                    <td>Other Fossil</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.OFSL}</td>\n                    )}\n                    <td>{this.props.table_info.US_OFSL}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.OTHF !== 0 && (\n                  <tr className={this.props.type === \"OTHF\" ? \"selected\" : \"\"}>\n                    <td>Other Unknown/Purchased Fuel</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.OTHF}</td>\n                    )}\n                    <td>{this.props.table_info.US_OTHF}</td>\n                  </tr>\n                )}\n              </tbody>\n            )}\n            {this.props.title ===\n              \"Resource Mix by renewable vs. non-renewable fuels\" && (\n              <tbody>\n                {+this.props.table_info.HYDRO !== 0 && (\n                  <tr className={this.props.type === \"HYDRO\" ? \"selected\" : \"\"}>\n                    <td>Hydro</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.HYDRO}</td>\n                    )}\n                    <td>{this.props.table_info.US_HYDRO}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.TNPR !== 0 && (\n                  <tr className={this.props.type === \"TNPR\" ? \"selected\" : \"\"}>\n                    <td>Total Nonrenewables</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.TNPR}</td>\n                    )}\n                    <td>{this.props.table_info.US_TNPR}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.THPR !== 0 && (\n                  <tr className={this.props.type === \"THPR\" ? \"selected\" : \"\"}>\n                    <td>Total Nonhydro Renewables</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.THPR}</td>\n                    )}\n                    <td>{this.props.table_info.US_THPR}</td>\n                  </tr>\n                )}\n              </tbody>\n            )}\n            {this.props.title ===\n              \"Resource Mix by combustible vs. non-combustible fuels\" && (\n              <tbody>\n                {+this.props.table_info.CYPR !== 0 && (\n                  <tr className={this.props.type === \"CYPR\" ? \"selected\" : \"\"}>\n                    <td>Total Combustion</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.CYPR}</td>\n                    )}\n                    <td>{this.props.table_info.US_CYPR}</td>\n                  </tr>\n                )}\n                {+this.props.table_info.CNPR !== 0 && (\n                  <tr className={this.props.type === \"CNPR\" ? \"selected\" : \"\"}>\n                    <td>Total Noncumbustion</td>\n                    {this.props.region !== \"US\" && (\n                      <td>{this.props.table_info.CNPR}</td>\n                    )}\n                    <td>{this.props.table_info.US_CNPR}</td>\n                  </tr>\n                )}\n              </tbody>\n            )}\n          </Table>\n        ) : (\n          <Table striped bordered hover responsive=\"sm\">\n            <thead>\n              <tr>\n                <th>Plant Name</th>\n                <th>{this.props.table_info.PNAME}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>Facility ID</td>\n                <td>{this.props.table_info.ORISPL}</td>\n              </tr>\n              <tr>\n                <td>Plant State</td>\n                <td>{this.props.table_info.PSTATABB}</td>\n              </tr>\n              <tr>\n                <td>eGRID Subregion</td>\n                <td>\n                  <a href=\"https://www.epa.gov/sites/production/files/styles/large/public/2020-03/2018_egrid_subregions.png\">\n                    {this.props.table_info.SUBRGN}\n                  </a>\n                </td>\n              </tr>\n              <tr>\n                <td>Plant Primary Fuel</td>\n                <td>{this.props.table_info.PLPRMFL}</td>\n              </tr>\n              <tr>\n                <td>Nameplate Capacity (MW)</td>\n                <td>{this.props.table_info.NAMEPCAP}</td>\n              </tr>\n              <tr>\n                <td>Plant Capacity Factor</td>\n                <td>{this.props.table_info.CAPFAC}</td>\n              </tr>\n              <tr>\n                <td>Generation (MWh)</td>\n                <td>{this.props.table_info.PLNGENAN}</td>\n              </tr>\n              <tr>\n                <td>Heat Input (MMBtu)</td>\n                <td>{this.props.table_info.PLHTIANT}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLNOXAN}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLNOXRTA}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Ozone Season Emissions (tons)</td>\n                <td>{this.props.table_info.PLNOXOZ}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Ozone Season Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLNOXRTO}</td>\n              </tr>\n              <tr>\n                <td>SO₂ Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLSO2AN}</td>\n              </tr>\n              <tr>\n                <td>SO₂ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLSO2RTA}</td>\n              </tr>\n              <tr>\n                <td>CO₂ Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLCO2AN}</td>\n              </tr>\n              <tr>\n                <td>CO₂ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLCO2RTA}</td>\n              </tr>\n              <tr>\n                <td>CH₄ Annual Emissions (lbs)</td>\n                <td>{this.props.table_info.PLCH4AN}</td>\n              </tr>\n              <tr>\n                <td>CH₄ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLCH4RTA}</td>\n              </tr>\n              <tr>\n                <td>N₂O Annual Emissions (lbs)</td>\n                <td>{this.props.table_info.PLN2OAN}</td>\n              </tr>\n              <tr>\n                <td>N₂O Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLN2ORTA}</td>\n              </tr>\n              <tr>\n                <td>CO₂ equivalent Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLCO2EQA}</td>\n              </tr>\n              <tr>\n                <td>CO₂ equivalent Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLC2ERTA}</td>\n              </tr>\n            </tbody>\n          </Table>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default UpdatedTable;\n","import React, { Component } from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport mapboxgl from \"mapbox-gl\";\nimport * as d3 from \"d3\";\nimport * as d3_composite from \"d3-composite-projections\";\n\nimport UpdatedTable from \"./Table\";\n\nimport \"./Visualization.css\";\n\nmapboxgl.accessToken =\n  \"pk.eyJ1Ijoia2F0aWVsb25nIiwiYSI6ImNpenpudmY1dzAxZmYzM2tmY2tobDN1MXoifQ._aoE2Zj7vx3dUlZw-gBCrg\";\n\nclass PlantLevelMapZoom extends Component {\n  constructor(props) {\n    super(props);\n    this.fuels = React.createRef();\n    this.legend = React.createRef();\n    this.state = {\n      selected_fuel: [],\n    };\n\n    this.field_factor_divided_by = 8;\n    this.max_radius = 72;\n    this.max_radius_before_remove = 24;\n    this.zoom_factor = this.max_radius / this.field_factor_divided_by;\n    this.legend_len = 6;\n    this.legend_percentile = [0.1, 0.5, 0.8, 0.95, 0.98, 1];\n\n    this.filter_text = \"Filter by Primary Fuel\";\n    this.filter_reset_text = \"Show All Fuels\";\n  }\n\n  formatLegend(d) {\n    if (d >= 1000) {\n      let num = d3.format(\".2s\")(d);\n      let abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      let chars1 = num.slice(-3);\n      let chars2 = chars1.substring(0, 2);\n      if (chars2 === \".0\") {\n        num = num.slice(0, -3) + num.slice(-1);\n        return num;\n      }\n      return num;\n    } else if (d >= 1 && d < 10) {\n      return d3.format(\".2\")(d);\n    } else if (d < 1) {\n      return d3.format(\".3\")(d);\n    } else {\n      return d3.format(\".0f\")(d);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.field !== prevProps.field) {\n      // filter\n      let w = d3.select(this.fuels.current).node().clientWidth,\n        h = d3.select(this.fuels.current).node().clientHeight;\n      let nbox = this.props.fuels.length + 1;\n      let boxlen = w / nbox;\n\n      d3.selectAll(\".fuels_selection\").selectAll(\"div\").remove();\n      let fuels = d3\n        .selectAll(\".fuels_selection\")\n        .append(\"div\")\n        .attr(\"class\", \"fuels\")\n        .selectAll(\"div\")\n        .data(this.props.fuels)\n        .enter()\n        .append(\"div\")\n        .style(\"display\", \"inline-block\")\n        .attr(\"class\", \"fuel\");\n\n      let fuels_svg = fuels\n        .append(\"svg\")\n        .attr(\"width\", boxlen)\n        .attr(\"height\", h);\n\n      fuels_svg\n        .append(\"image\")\n        .attr(\"xlink:href\", (d) => this.props.fuel_icon_lookup[d])\n        .attr(\"x\", boxlen / 2 - Math.min(boxlen, h * 0.5) / 2)\n        .attr(\"y\", 0)\n        .attr(\"width\", Math.min(boxlen, h * 0.5))\n        .attr(\"height\", Math.min(boxlen, h * 0.5));\n\n      fuels_svg\n        .filter((d) => this.props.fuel_icon_lookup[d] === \"\")\n        .append(\"circle\")\n        .attr(\"r\", Math.min(boxlen, h * 0.5) / 4)\n        .attr(\"fill\", (d) => this.props.fuel_color_lookup[d])\n        .attr(\"cx\", boxlen / 2)\n        .attr(\"cy\", Math.min(boxlen, h * 0.5) / 2);\n\n      fuels_svg\n        .append(\"text\")\n        .attr(\"x\", boxlen / 2)\n        .attr(\"y\", Math.min(boxlen, h * 0.5) * 1.5)\n        .attr(\"dx\", 0)\n        .attr(\"dy\", 0)\n        .text((d) => this.props.fuel_label_lookup[d])\n        .style(\"text-anchor\", \"middle\")\n        .call(this.props.wrap_long_labels, boxlen);\n\n      d3.select(\".fuels\")\n        .insert(\"div\", \".fuel\")\n        .style(\"display\", \"inline-block\")\n        .attr(\"class\", \"reset\")\n        .append(\"svg\")\n        .attr(\"width\", boxlen)\n        .attr(\"height\", h)\n        .append(\"text\")\n        .attr(\"x\", 0)\n        .attr(\"y\", Math.min(boxlen, h * 0.5) / 2)\n        .attr(\"dx\", 0)\n        .attr(\"dy\", 0)\n        .text(this.filter_text)\n        .style(\"text-anchor\", \"start\")\n        .style(\"font-weight\", \"bold\")\n        .style(\"font-size\", \"1.2em\")\n        .call(this.props.wrap_long_labels, boxlen);\n\n      d3.selectAll(\".fuel\").on(\"click\", (d) => {\n        let n = d3\n          .select(this.fuels.current)\n          .selectAll(\".fuel\")\n          .filter((e) => e === d);\n        if (this.map.loaded()) {\n          if (n.classed(\"selected\")) {\n            this.setState({\n              selected_fuel: this.state.selected_fuel.filter((e) => e !== d),\n            });\n          } else {\n            this.setState({\n              selected_fuel: this.state.selected_fuel.concat(d),\n            });\n          }\n        }\n      });\n\n      if (this.map.loaded()) {\n        const data = {\n          type: \"FeatureCollection\",\n          features: this.props.plant_data.features\n            .filter((d) => d.properties[this.props.field] > 0)\n            .map((d) => {\n              if (\n                d.properties[this.props.field] >=\n                this.props.plant_outlier[this.props.field]\n              ) {\n                d.properties[this.props.field] = this.props.plant_outlier[\n                  this.props.field\n                ];\n              }\n              return d;\n            }),\n        };\n        this.map.getSource(\"plants\").setData(data);\n        this.setRadius(data.features);\n\n        d3.selectAll(\".fuels_selection\")\n          .select(\".reset\")\n          .classed(\"reset_clickable\", false);\n        d3.selectAll(\".fuels_selection\")\n          .select(\".reset text\")\n          .text(this.filter_text)\n          .call(\n            this.props.wrap_long_labels,\n            d3.select(\".fuels_selection\").node().clientWidth /\n              (this.props.fuels.length + 1)\n          );\n        d3.selectAll(\".selected\").classed(\"selected\", false);\n\n        this.map.on(\"zoom\", \"plants\", () => {\n          let features = data.features;\n          let factor =\n            d3.max(features.map((d) => d.properties[this.props.field])) /\n            this.field_factor_divided_by;\n          this.updateLegend(features, factor);\n        });\n      }\n    } else {\n      if (\n        JSON.stringify(this.state.selected_fuel) !==\n          JSON.stringify(prevState.selected_fuel) &&\n        this.state.selected_fuel.length !== 0\n      ) {\n        if (this.map.loaded()) {\n          const data = {\n            type: \"FeatureCollection\",\n            features: this.props.plant_data.features\n              .filter((d) => d.properties[this.props.field] > 0)\n              .filter(\n                (d) =>\n                  this.state.selected_fuel.indexOf(d.properties.FUEL) !== -1\n              )\n              .map((d) => {\n                if (\n                  d.properties[this.props.field] >=\n                  this.props.plant_outlier[this.props.field]\n                ) {\n                  d.properties[this.props.field] = this.props.plant_outlier[\n                    this.props.field\n                  ];\n                }\n                return d;\n              }),\n          };\n          this.map.getSource(\"plants\").setData(data);\n          this.setRadius(data.features);\n          d3.selectAll(\".selected\").classed(\"selected\", false);\n          d3.selectAll(\".fuels_selection\")\n            .select(\".reset\")\n            .classed(\"reset_clickable\", true)\n            .on(\"click\", (d) => {\n              this.setState({ selected_fuel: [] });\n            });\n\n          d3.selectAll(\".fuels_selection\")\n            .select(\".reset text\")\n            .text(this.filter_reset_text)\n            .call(\n              this.props.wrap_long_labels,\n              d3.select(this.fuels.current).node().clientWidth /\n                (this.props.fuels.length + 1)\n            );\n\n          d3.selectAll(\".fuels_selection\")\n            .selectAll(\".fuel\")\n            .filter((d) => this.state.selected_fuel.indexOf(d) !== -1)\n            .classed(\"selected\", true);\n\n          this.map.on(\"zoom\", \"plants\", () => {\n            let features = data.features;\n            let factor =\n              d3.max(features.map((d) => d.properties[this.props.field])) /\n              this.field_factor_divided_by;\n            this.updateLegend(features, factor);\n          });\n        }\n      } else if (\n        JSON.stringify(this.state.selected_fuel) !==\n          JSON.stringify(prevState.selected_fuel) &&\n        this.state.selected_fuel.length === 0\n      ) {\n        if (this.map.loaded()) {\n          const data = {\n            type: \"FeatureCollection\",\n            features: this.props.plant_data.features\n              .filter((d) => d.properties[this.props.field] > 0)\n              .map((d) => {\n                if (\n                  d.properties[this.props.field] >=\n                  this.props.plant_outlier[this.props.field]\n                ) {\n                  d.properties[this.props.field] = this.props.plant_outlier[\n                    this.props.field\n                  ];\n                }\n                return d;\n              }),\n          };\n          this.map.getSource(\"plants\").setData(data);\n          this.setRadius(data.features);\n\n          d3.selectAll(\".fuels_selection\")\n            .select(\".reset\")\n            .classed(\"reset_clickable\", false);\n          d3.selectAll(\".fuels_selection\")\n            .select(\".reset text\")\n            .text(this.filter_text)\n            .call(\n              this.props.wrap_long_labels,\n              d3.select(\".fuels_selection\").node().clientWidth /\n                (this.props.fuels.length + 1)\n            );\n          d3.selectAll(\".selected\").classed(\"selected\", false);\n\n          this.map.on(\"zoom\", \"plants\", () => {\n            let features = data.features;\n            let factor =\n              d3.max(features.map((d) => d.properties[this.props.field])) /\n              this.field_factor_divided_by;\n            this.updateLegend(features, factor);\n          });\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    let init_zoom = this.props.init_zoom,\n      init_center = this.props.init_center;\n\n    // set up map\n    this.map = new mapboxgl.Map({\n      container: this.container,\n      style: \"mapbox://styles/mapbox/light-v10?optimize=true\",\n      center: init_center,\n      zoom: init_zoom,\n      minzoom: this.props.min_zoom,\n      maxzoom: this.props.max_zoom\n    });\n    this.map.addControl(new mapboxgl.NavigationControl());\n    this.map.addControl(new mapboxgl.FullscreenControl());\n\n    class ResetControl {\n      onAdd(map) {\n        this._map = map;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl\";\n        this._container.innerHTML =\n          \"<span class='mapboxgl-ctrl-icon' aria-haspopup='true' title='zoom to national view'><img src='reset_view_icon.png' alt='reset_view' width=29 height=29 style='border-radius: 4px'></img></span>\";\n        this._container.style.borderRadius = \"4px\";\n        this._container.style.boxShadow = \"0 0 0 2px rgba(0,0,0,.1)\";\n        this._container.style.cursor = \"pointer\";\n        this._container.onclick = function () {\n          map.flyTo({ center: init_center, zoom: init_zoom });\n        };\n        return this._container;\n      }\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map = undefined;\n      }\n    }\n    this.map.addControl(new ResetControl());\n\n    class LayerControl {\n      onAdd(map) {\n        this._map = map;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl\";\n        this._container.innerHTML =\n          \"<span class='mapboxgl-ctrl-group' style='padding: 10px;' aria-haspopup='true' title='change layers'><input id='light-v10' type='radio' name='rtoggle' value='light' checked='checked'/><label for='light'>light</label><input id='satellite-v9' type='radio' name='rtoggle' value='satellite' /><label for='satellite'>satellite</label></span>\";\n\n        d3.select(this._container)\n          .selectAll(\"input\")\n          .nodes()\n          .map((n) => {\n            n.onclick = function () {\n              if (map.loaded()) {\n                // map.setStyle(\"mapbox://styles/mapbox/\" + n.id);\n              }\n            };\n          });\n        return this._container;\n      }\n\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map = undefined;\n      }\n    }\n    this.map.addControl(new LayerControl());\n\n    class Legend {\n      onAdd(map) {\n        this._map = map;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl\";\n        this._container.innerHTML =\n          \"<div class='mapboxgl-ctrl-group' aria-haspopup='true'><div><span id='legend_title'></span></div><div><svg id='legend'></svg></div></div>\";\n\n        return this._container;\n      }\n\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map = undefined;\n      }\n    }\n\n    this.map.addControl(new Legend(), \"bottom-right\");\n\n    this.map.on(\"load\", () => {\n      const data = {\n        type: \"FeatureCollection\",\n        features: this.props.plant_data.features\n          .filter((d) => d.properties[this.props.field] > 0)\n          .map((d) => {\n            if (\n              d.properties[this.props.field] >=\n              this.props.plant_outlier[this.props.field]\n            ) {\n              d.properties[this.props.field] = this.props.plant_outlier[\n                this.props.field\n              ];\n            }\n            return d;\n          }),\n      };\n\n      this.map.addSource(\"plants\", {\n        type: \"geojson\",\n        data: data,\n      });\n\n      this.map.addLayer({\n        id: \"plants\",\n        type: \"circle\",\n        source: \"plants\",\n        paint: {\n          \"circle-stroke-width\": 1,\n          \"circle-stroke-color\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#000\",\n            [\n              \"match\",\n              [\"get\", \"FUEL\"],\n              \"COAL\",\n              this.props.fuel_color_lookup.COAL,\n              \"OIL\",\n              this.props.fuel_color_lookup.OIL,\n              \"GAS\",\n              this.props.fuel_color_lookup.GAS,\n              \"NUCLEAR\",\n              this.props.fuel_color_lookup.NUCLEAR,\n              \"HYDRO\",\n              this.props.fuel_color_lookup.HYDRO,\n              \"BIOMASS\",\n              this.props.fuel_color_lookup.BIOMASS,\n              \"WIND\",\n              this.props.fuel_color_lookup.WIND,\n              \"SOLAR\",\n              this.props.fuel_color_lookup.SOLAR,\n              \"GEOTHERMAL\",\n              this.props.fuel_color_lookup.GEOTHERMAL,\n              \"OFSL\",\n              this.props.fuel_color_lookup.OFSL,\n              \"OTHF\",\n              this.props.fuel_color_lookup.OTHF,\n              \"#000\",\n            ],\n          ],\n          \"circle-opacity\": this.props.circle_opacity,\n          \"circle-color\": [\n            \"match\",\n            [\"get\", \"FUEL\"],\n            \"COAL\",\n            this.props.fuel_color_lookup.COAL,\n            \"OIL\",\n            this.props.fuel_color_lookup.OIL,\n            \"GAS\",\n            this.props.fuel_color_lookup.GAS,\n            \"NUCLEAR\",\n            this.props.fuel_color_lookup.NUCLEAR,\n            \"HYDRO\",\n            this.props.fuel_color_lookup.HYDRO,\n            \"BIOMASS\",\n            this.props.fuel_color_lookup.BIOMASS,\n            \"WIND\",\n            this.props.fuel_color_lookup.WIND,\n            \"SOLAR\",\n            this.props.fuel_color_lookup.SOLAR,\n            \"GEOTHERMAL\",\n            this.props.fuel_color_lookup.GEOTHERMAL,\n            \"OFSL\",\n            this.props.fuel_color_lookup.OFSL,\n            \"OTHF\",\n            this.props.fuel_color_lookup.OTHF,\n            \"#000\",\n          ],\n        },\n      });\n\n      this.setRadius(data.features);\n\n      // interaction: mousemove, mouseleave, click\n      let show_tooltip = false,\n        hoveredPlantId = null,\n        tooltip = new mapboxgl.Popup({\n          closeButton: false,\n          closeOnClick: false,\n          maxWidth: d3.select(this.fuels.current).node().clientWidth * 0.7,\n        }).on(\"close\", () => {\n          tooltip.options.closeButton = false;\n          tooltip.options.anchor = \"bottom\";\n          show_tooltip = false;\n        });\n\n      this.map.on(\"mousemove\", \"plants\", (d) => {\n        if (!show_tooltip) {\n          if (d.features.length > 0) {\n            if (hoveredPlantId) {\n              this.map.setFeatureState(\n                { source: \"plants\", id: hoveredPlantId },\n                { hover: false }\n              );\n            }\n            hoveredPlantId = d.features[0].id;\n            this.map.setFeatureState(\n              { source: \"plants\", id: hoveredPlantId },\n              { hover: true }\n            );\n          }\n\n          this.map.getCanvas().style.cursor = \"pointer\";\n          tooltip\n            .setLngLat(d.features[0].geometry.coordinates.slice())\n            .setText(d.features[0].properties.name)\n            .addTo(this.map);\n        }\n      });\n\n      this.map.on(\"mouseleave\", \"plants\", () => {\n        if (!show_tooltip) {\n          this.map.getCanvas().style.cursor = \"\";\n          tooltip.remove();\n          if (hoveredPlantId) {\n            this.map.setFeatureState(\n              { source: \"plants\", id: hoveredPlantId },\n              { hover: false }\n            );\n          }\n          hoveredPlantId = null;\n        }\n      });\n\n      this.map.on(\"click\", \"plants\", (d) => {\n        if (\n          show_tooltip &&\n          d.features[0].geometry.coordinates.slice()[0] ===\n            tooltip.getLngLat().lng &&\n          d.features[0].geometry.coordinates.slice()[1] ===\n            tooltip.getLngLat().lat\n        ) {\n          tooltip.options.closeButton = false;\n          tooltip.options.anchor = \"bottom\";\n          show_tooltip = false;\n        } else {\n          if (d.features.length > 0) {\n            if (hoveredPlantId) {\n              this.map.setFeatureState(\n                { source: \"plants\", id: hoveredPlantId },\n                { hover: false }\n              );\n            }\n            hoveredPlantId = d.features[0].id;\n            this.map.setFeatureState(\n              { source: \"plants\", id: hoveredPlantId },\n              { hover: true }\n            );\n          }\n          let table_info = {};\n          Object.keys(d.features[0].properties).forEach((e) => {\n            table_info[e] = d.features[0].properties[e];\n          });\n          let description = renderToString(\n            <UpdatedTable title={this.props.title} table_info={table_info} />\n          );\n          tooltip.options.closeButton = true;\n          tooltip.options.anchor = \"left\";\n          tooltip\n            .setLngLat(d.features[0].geometry.coordinates.slice())\n            .setHTML(description)\n            .addTo(this.map);\n          show_tooltip = true;\n        }\n      });\n\n      this.map.on(\"zoom\", \"plants\", () => {\n        let features = data.features;\n        let factor =\n          d3.max(features.map((d) => d.properties[this.props.field])) /\n          this.field_factor_divided_by;\n        this.updateLegend(features, factor);\n      });\n    });\n  }\n\n  updateLegend(features, factor) {\n    let field_values, radius_values, scale;\n\n    // set up scale\n    field_values = features\n      .map((d) => d.properties[this.props.field])\n      .sort((a, b) => a - b);\n    radius_values = field_values\n      .map((d) =>\n        d3\n          .scaleLinear()\n          .domain([this.props.min_zoom, this.props.max_zoom])\n          .range([d / factor, (d / factor) * this.zoom_factor])(\n          this.map.getZoom()\n        )\n      )\n      .sort((a, b) => a - b);\n    scale = d3\n      .scaleLinear()\n      .domain(d3.extent(field_values))\n      .range(d3.extent(radius_values));\n\n    // draw legend\n    let w = d3.select(\"#legend\").node().clientWidth,\n      h = d3.select(\"#legend\").node().clientHeight;\n    let nbox = this.legend_len;\n    let boxlen = w / nbox;\n\n    d3.select(\"#legend\").selectAll(\"g\").remove();\n    d3.select(\"#legend_title\").html(this.props.title);\n\n    let legend_values =\n      field_values.length > 1\n        ? this.legend_percentile.map((d) => d3.quantile(field_values, d))\n        : field_values;\n\n    legend_values = legend_values.filter(\n      (d) => scale(d) <= this.max_radius_before_remove\n    );\n    let legend_cells = d3\n      .select(\"#legend\")\n      .append(\"g\")\n      .attr(\"width\", w)\n      .attr(\"height\", h)\n      .selectAll(\"g\")\n      .data(legend_values)\n      .enter()\n      .append(\"g\")\n      .attr(\"transform\", (d, i) => \"translate(\" + i * boxlen + \",\" + 5 + \")\");\n\n    legend_cells\n      .append(\"circle\")\n      .attr(\"r\", (d) => scale(d))\n      .attr(\"cx\", boxlen / 2)\n      .attr(\"cy\", Math.min(boxlen, h * 0.5) / 2);\n\n    legend_cells\n      .append(\"text\")\n      .attr(\"x\", boxlen / 2)\n      .attr(\n        \"y\",\n        Math.min(boxlen, h * 0.5) / 2 +\n          scale(legend_values[legend_values.length - 1]) +\n          10\n      )\n      .attr(\"dx\", 0)\n      .attr(\"dy\", 0)\n      .text((d) => this.formatLegend(d))\n      .style(\"text-anchor\", \"middle\");\n  }\n\n  updateStaticMap(features, factor) {\n    // add plants\n    let field_values, radius_values, scale;\n\n    // set up scale\n    field_values = features\n      .map((d) => d.properties[this.props.field])\n      .sort((a, b) => a - b);\n    radius_values = field_values\n      .map((d) =>\n        d3\n          .scaleLinear()\n          .domain([this.props.min_zoom, this.props.max_zoom])\n          .range([d / factor, (d / factor) * this.zoom_factor])(\n          this.map.getZoom()\n        )\n      )\n      .sort((a, b) => a - b);\n    scale = d3.scaleOrdinal().domain(field_values).range(radius_values);\n\n    // draw plants on static map\n    let w = d3.select('.map_container').node().clientWidth,\n    h = d3.select('.map_container').node().clientHeight;\n    let projection = d3_composite\n      .geoAlbersUsaTerritories()\n      .scale(this.props.static_map_scale)\n      .translate([w / 2, h / 2.5]);\n\n    d3.select(\".static_map\").selectAll(\"circle\").remove();\n    d3.select(\".static_map\")\n      .selectAll(\"circle\")\n      .data(features)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", (d) => projection(d.geometry.coordinates)[0])\n      .attr(\"cy\", (d) => projection(d.geometry.coordinates)[1])\n      .attr(\"r\", (d) => scale(d.properties[this.props.field]))\n      .style(\"opacity\", this.props.circle_opacity)\n      .style(\"fill\", (d) => this.props.fuel_color_lookup[d.properties.FUEL])\n      .style(\"stroke\", (d) => this.props.fuel_color_lookup[d.properties.FUEL]);\n  }\n\n  setRadius(features) {\n    let factor =\n      d3.max(features.map((d) => d.properties[this.props.field])) /\n      this.field_factor_divided_by;\n\n    this.map.setPaintProperty(\"plants\", \"circle-radius\", [\n      \"interpolate\",\n      [\"linear\"],\n      [\"zoom\"],\n      this.props.min_zoom,\n      [\"/\", [\"get\", this.props.field], factor],\n      this.props.max_zoom,\n      [\"/\", [\"get\", this.props.field], factor / this.zoom_factor],\n    ]);\n\n    this.updateLegend(features, factor);\n    this.updateStaticMap(features, factor);\n  }\n\n  render() {\n    let title = (\n      <p\n        style={{\n          fontSize: \"1.2em\",\n          fontWeight: \"bold\",\n          fill: \"#000\",\n          className: \"title\",\n          textAnchor: \"middle\",\n        }}\n      >\n        {this.props.title}\n      </p>\n    );\n\n    return (\n      <div id=\"map_zoomable\" >\n        {title}\n        <div\n          className=\"fuels_selection\"\n          ref={this.fuels}\n        ></div>\n        <div\n          className=\"map_container\"\n          ref={(node) => (this.container = node)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default PlantLevelMapZoom;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport * as d3_composite from \"d3-composite-projections\";\n\nimport \"./Visualization.css\";\n\nclass PlantLevelMapStatic extends Component {\n  constructor(props) {\n    super(props);\n    this.background = React.createRef();\n    this.container = React.createRef();\n  }\n\n  initStaticMap() {\n    let w = d3.select(this.container.current).node().clientWidth,\n    h = d3.select(this.container.current).node().clientHeight;\n    \n    let projection = d3_composite\n    .geoAlbersUsaTerritories()\n    .scale(this.props.scale)\n    .translate([w/ 2, h / 2.5]);\n    let path = d3.geoPath().projection(projection);\n\n    let svg = d3.select(this.container.current)\n    .append('svg')\n    .attr('width', w)\n    .attr('height', h);\n\n    // placeholder for map content\n    svg.append('g').attr('class', 'static_map');\n    \n    // add background\n    let background = svg.append('g');\n    background.selectAll(\"path\").remove();\n    background\n      .selectAll(\"path\")\n      .data(this.props.background_layer.features)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", path)\n      .attr(\"class\", \"paths\")\n      .style(\"fill\", \"transparent\")\n      .style(\"stroke\", \"rgb(221, 221, 221)\");\n\n    d3.select(\"#map_static\").style(\"display\", \"none\");\n  }\n\n  componentDidMount() {\n    this.initStaticMap();\n  }\n\n  render() {\n    let title = (\n      <div>\n        <p\n          style={{\n            fontSize: \"1.2em\",\n            fontWeight: \"bold\",\n            fill: \"#000\",\n            className: \"title\",\n            textAnchor: \"middle\",\n          }}\n        >\n          {this.props.title}\n        </p>\n      </div>\n    );\n\n    return (\n      <div id=\"map_static\">\n        {title}\n        <div\n          className=\"fuels_selection\"\n        ></div>\n        <div className=\"map_container\" ref={this.container} >\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PlantLevelMapStatic;\n","import React, { Component } from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport * as d3 from \"d3\";\nimport * as _ from \"underscore\";\nimport * as d3_composite from \"d3-composite-projections\";\n\nimport UpdatedTable from \"./Table\";\n\nclass ResourceMixChart extends Component {\n  constructor(props) {\n    super(props);\n    this.wrapper = React.createRef();\n    this.fuels = React.createRef();\n    this.barchart = React.createRef();\n    this.barchart_wrapper = React.createRef();\n    this.axis_y = React.createRef();\n    this.micromap = React.createRef();\n    this.tooltip = React.createRef();\n    this.state = {\n      selected_fuel: null,\n      show_tooltip: false\n    };\n    this.sort_text = \"Click to rearrange\";\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.field !== prevProps.field) {\n      this.initView();\n    } else {\n      if (\n        this.state.selected_fuel !== prevState.selected_fuel &&\n        this.state.selected_fuel !== null\n      ) {\n        d3.selectAll(\".selected\").classed(\"selected\", false);\n        d3.select(this.fuels.current)\n          .select(\".reset\")\n          .classed(\"reset_clickable\", true)\n          .on(\"click\", () => {\n            this.initView();\n          });\n        d3.select(this.fuels.current)\n          .selectAll(\".fuel\")\n          .filter((e) => e === this.state.selected_fuel)\n          .classed(\"selected\", true);\n\n        this.updateView(this.state.selected_fuel);\n      } else if (\n        this.state.selected_fuel !== prevState.selected_fuel &&\n        this.state.selected_fuel === null\n      ) {\n        d3.selectAll(\".selected\").classed(\"selected\", false);\n        d3.select(this.fuels.current)\n          .select(\".reset\")\n          .classed(\"reset_clickable\", false);\n\n        this.initView();\n      }\n    }\n  }\n\n  initView() {\n    this.setState({ selected_fuel: null });\n    let marginRight = 0,\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\n    let w = d3.select(this.barchart_wrapper.current).node().clientWidth,\n      h = d3.select(this.barchart_wrapper.current).node().clientHeight;\n\n    let w_legend = d3.select(this.fuels.current).node().clientWidth,\n      h_legend = d3.select(this.fuels.current).node().clientHeight;\n    let nbox = Object.keys(this.props.fuel_name_lookup).length + 1;\n    let boxlen = w_legend / nbox;\n\n    let fuel_names = this.props.fuels,\n      fuel_colors = Object.values(this.props.fuel_name_lookup).map(\n        (d) => this.props.fuel_color_lookup[d]\n      );\n    let barFillScale = d3.scaleOrdinal().domain(fuel_names).range(fuel_colors);\n\n    let data = [];\n    _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\n      let cumsum = 0;\n      fuel_names.forEach((f) => {\n        data.push({\n          name: d.name,\n          id: d.id,\n          unit: this.props.unit,\n          type: this.props.fuel_name_lookup[f],\n          value: d[f],\n          cumsum: cumsum,\n        });\n        cumsum = cumsum + d[f];\n      });\n    });\n    let name = _.uniq(data.map((d) => d.name));\n\n    let barXScale = d3\n      .scaleLinear()\n      .domain([0, 100])\n      .range([0, w - marginLeft - marginRight]);\n    let barYScale = d3\n      .scaleBand()\n      .domain(name)\n      .range([0, h])\n      .paddingInner(0.1)\n      .paddingOuter(0.2);\n\n    // micromap\n    d3.select(this.micromap.current).selectAll(\"path\").remove();\n    let w_micro = d3.select(this.micromap.current).node().clientWidth,\n      h_micro = d3.select(this.micromap.current).node().clientHeight;\n    const projection = d3_composite\n      .geoAlbersUsaTerritories()\n      .scale(h_micro * 2)\n      .translate([w_micro / 2, h_micro / 2]);\n    const path = d3.geoPath().projection(projection);\n    d3.select(this.micromap.current)\n      .selectAll(\"path\")\n      .data(this.props.layer.features)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", path)\n      .attr(\"class\", \"paths\")\n      .style(\"fill\", \"transparent\")\n      .style(\"stroke\", \"#000\")\n      .style(\"stroke-width\", 0.5);\n\n    // barchart\n    d3.select(this.barchart.current).selectAll(\"g\").remove();\n    d3.select(this.barchart.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",0)\")\n      .append(\"g\")\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"class\", (d) => \"resource_mix_bars bars_\" + d.id + \"_\" + d.type)\n      .attr(\"x\", (d) => barXScale(d.cumsum))\n      .attr(\"y\", (d) => barYScale(d.name))\n      .attr(\"rx\", 4)\n      .attr(\"ry\", 4)\n      .attr(\"width\", (d) => barXScale(d.value))\n      .attr(\"height\", barYScale.bandwidth())\n      .style(\"fill\", (d) => barFillScale(d.type))\n      .on(\"mouseover\", (d) => {\n        if (!this.state.show_tooltip) {\n          d3.select(this.tooltip.current)\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n        }\n      })\n      .on(\"mousemove\", (d) => {\n        if (!this.state.show_tooltip) {\n          let table_info = {};\n          data.filter(e=>e.name===d.name || e.name===\"US\").forEach(e=>{\n            if (e.name === \"US\") {\n              table_info[e.name+\"_\"+e.type]=d3.format(\".2f\")(e.value);\n            } else {\n              table_info[e.type]=d3.format(\".2f\")(e.value);\n            }\n          });\n          \n          let html = renderToString(<UpdatedTable region={d.name} title={this.props.title} type={d.type} table_info={table_info}/>);\n          d3.select(this.tooltip.current)\n            .html(html)\n            .style(\"position\", \"absolute\")\n            .style(\"top\", d3.event.pageY - 50 + \"px\")\n            .style(\"left\", d3.event.pageX + 50 + \"px\")\n            .style(\"opacity\", 1);\n          d3.select(this.wrapper.current)\n            .select(\"rect.bars_\" + d.id + \"_\" + d.type)\n            .classed(\"selected\", true);\n        }\n      })\n      .on(\"mouseout\", (d) => {\n        if (!this.state.show_tooltip) {\n          d3.select(this.tooltip.current)\n          .transition()\n          .duration(500)\n          .style(\"opacity\", 0);\n        d3.selectAll(\"rect.selected\").classed(\"selected\", false);\n        }\n      })\n      .on(\"click\", d => {\n        if (d3.select(this.wrapper.current).select(\"rect.bars_\" + d.id + \"_\" + d.type).classed('highlighted')) {\n          d3.selectAll('rect.highlighted').classed('highlighted', false);\n          this.setState({'show_tooltip': false});\n        } else {\n          d3.selectAll('rect.highlighted').classed('highlighted', false);\n          d3.selectAll('rect.selected').classed('selected', false);\n          d3.select(this.wrapper.current).select(\"rect.bars_\" + d.id + \"_\" + d.type).classed('highlighted', true);\n          this.setState({'show_tooltip': true});\n\n          d3.select(this.tooltip.current).style(\"opacity\", 0);\n          let table_info = {};\n          data.filter(e=>e.name===d.name || e.name===\"US\").forEach(e=>{\n            if (e.name === \"US\") {\n              table_info[e.name+\"_\"+e.type]=d3.format(\".2f\")(e.value);\n            } else {\n              table_info[e.type]=d3.format(\".2f\")(e.value);\n            }\n          });\n          \n          let html = renderToString(<UpdatedTable region={d.name} title={this.props.title} type={d.type} table_info={table_info}/>);\n          d3.select(this.tooltip.current)\n            .html(html)\n            .style(\"position\", \"absolute\")\n            .style(\"top\", d3.event.pageY - 50 + \"px\")\n            .style(\"left\", d3.event.pageX + 50 + \"px\")\n            .style(\"opacity\", 1);\n        }\n\n      });\n\n    // axis\n    d3.select(this.axis_y.current).selectAll(\"g\").remove();\n    d3.select(this.axis_y.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",0)\")\n      .call(d3.axisLeft(barYScale))\n      .selectAll(\"text\")\n      .filter((d) => d === \"US\")\n      .style(\"font-size\", \"1.5em\");\n\n    // filter\n    d3.select(this.fuels.current).selectAll(\"div\").remove();\n    let fuels = d3\n      .select(this.fuels.current)\n      .append(\"div\")\n      .attr(\"class\", \"fuels\")\n      .selectAll(\"div\")\n      .data(_.uniq(data.filter(d=>d.value>0).map(d=>d.type)))\n      .enter()\n      .append(\"div\")\n      .style(\"display\", \"inline-block\")\n      .attr(\"class\", \"fuel\");\n\n    let fuels_svg = fuels\n      .append(\"svg\")\n      .attr(\"width\", boxlen)\n      .attr(\"height\", h_legend);\n\n    fuels_svg\n      .append(\"image\")\n      .attr(\"xlink:href\", (d) => this.props.fuel_icon_lookup[d])\n      .attr(\"x\", boxlen / 2 - Math.min(boxlen, h_legend * 0.5) / 2)\n      .attr(\"y\", 0)\n      .attr(\"width\", Math.min(boxlen, h_legend * 0.5))\n      .attr(\"height\", Math.min(boxlen, h_legend * 0.5));\n\n    fuels_svg\n      .filter((d) => this.props.fuel_icon_lookup[d] === \"\")\n      .append(\"circle\")\n      .attr(\"r\", Math.min(boxlen, h_legend * 0.5) / 4)\n      .attr(\"fill\", (d) => this.props.fuel_color_lookup[d])\n      .attr(\"cx\", boxlen / 2)\n      .attr(\"cy\", Math.min(boxlen, h_legend * 0.5) / 2);\n\n    fuels_svg\n      .append(\"text\")\n      .attr(\"x\", boxlen / 2)\n      .attr(\"y\", Math.min(boxlen, h_legend * 0.5) * 1.5)\n      .attr(\"dx\", 0)\n      .attr(\"dy\", 0)\n      .text((d) => this.props.fuel_label_lookup[d])\n      .style(\"text-anchor\", \"middle\")\n      .call(this.props.wrap_long_labels, boxlen);\n\n    d3.select(\".fuels\")\n      .insert(\"div\", \".fuel\")\n      .style(\"display\", \"inline-block\")\n      .attr(\"class\", \"reset\")\n      .append(\"svg\")\n      .attr(\"width\", boxlen)\n      .attr(\"height\", h_legend)\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", Math.min(boxlen, h_legend * 0.5) * 0.75)\n      .attr(\"dx\", 0)\n      .attr(\"dy\", 0)\n      .text(this.sort_text)\n      .style(\"text-anchor\", \"start\")\n      .style(\"font-weight\", \"bold\")\n      .style(\"font-size\", \"1.1em\")\n      .call(this.props.wrap_long_labels, boxlen);\n\n    d3.selectAll(\".fuel\").on(\"click\", (d) => {\n      let n = d3\n        .select(this.fuels.current)\n        .selectAll(\".fuel\")\n        .filter((e) => e === d);\n      if (n.classed(\"selected\")) {\n        this.setState({ selected_fuel: null });\n      } else {\n        this.setState({ selected_fuel: d });\n      }\n    });\n  }\n\n  updateView(fuel) {\n    let marginRight = 0,\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\n    let w = d3.select(this.barchart_wrapper.current).node().clientWidth,\n      h = d3.select(this.barchart_wrapper.current).node().clientHeight;\n\n    if (fuel === null) {\n      const fuel_names = this.props.fuels;\n\n      let data = [];\n      _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\n        let cumsum = 0;\n        fuel_names.forEach((f) => {\n          data.push({\n            name: d.name,\n            id: d.id,\n            unit: this.props.unit,\n            type: this.props.fuel_name_lookup[f],\n            value: d[f],\n            cumsum: cumsum,\n          });\n          cumsum = cumsum + d[f];\n        });\n      });\n      let name = _.uniq(data.map((d) => d.name));\n      name = _.flatten([[\"US\"], name.filter((d) => d !== \"US\")]);\n\n      let barXScale = d3\n        .scaleLinear()\n        .domain([0, 100])\n        .range([0, w - marginLeft - marginRight]);\n      let barYScale = d3\n        .scaleBand()\n        .domain(name)\n        .range([0, h])\n        .paddingInner(0.1)\n        .paddingOuter(0.2);\n\n      // barchart\n      d3.select(this.barchart.current)\n        .selectAll(\"rect\")\n        .attr(\"x\", (d) => barXScale(d.cumsum))\n        .transition()\n        .attr(\"y\", (d) => barYScale(d.name));\n\n      // axis\n      d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\n    } else {\n      const fuel_names = _.flatten([\n        [_.invert(this.props.fuel_name_lookup)[fuel]],\n        this.props.fuels.filter(\n          (d) => d !== _.invert(this.props.fuel_name_lookup)[fuel]\n        ),\n      ]);\n\n      let data = [];\n      _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\n        let cumsum = 0;\n        fuel_names.forEach((f) => {\n          data.push({\n            name: d.name,\n            id: d.id,\n            unit: this.props.unit,\n            type: this.props.fuel_name_lookup[f],\n            value: d[f],\n            cumsum: cumsum,\n          });\n          cumsum = cumsum + d[f];\n        });\n      });\n\n      let name = data\n        .filter((d) => d.type === fuel)\n        .sort((a, b) => b.value - a.value)\n        .map((d) => d.name);\n      name = _.flatten([[\"US\"], name.filter((d) => d !== \"US\")]);\n\n      let barXScale = d3\n        .scaleLinear()\n        .domain([0, 100])\n        .range([0, w - marginLeft - marginRight]);\n\n      let barYScale = d3\n        .scaleBand()\n        .domain(name)\n        .range([0, h])\n        .paddingInner(0.1)\n        .paddingOuter(0.2);\n\n      d3.select(this.barchart.current)\n        .selectAll(\"rect\")\n        .each((d) => {\n          d.cumsum = data\n            .filter((e) => e.name === d.name && e.type === d.type)\n            .map((e) => e.cumsum)[0];\n        })\n        .attr(\"x\", (d) => barXScale(d.cumsum))\n        .transition()\n        .attr(\"y\", (d) => barYScale(d.name));\n\n      d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\n    }\n  }\n\n  render() {\n    let title = (\n      <p\n        style={{\n          fontSize: \"1.2em\",\n          fontWeight: \"bold\",\n          fill: \"#000\",\n          className: \"title\",\n          textAnchor: \"middle\",\n        }}\n      >\n        {this.props.title + \", by \" + this.props.layer_type}\n      </p>\n    );\n\n    return (\n      <div ref={this.wrapper}>\n        {title}\n        <svg\n          style={{ width: \"90%\", height: 150, margin: \"0 auto\" }}\n          ref={this.micromap}\n        ></svg>\n        <div\n          style={{ width: \"90%\", height: 80, margin: \"0 auto\" }}\n          ref={this.fuels}\n        ></div>\n        <svg\n          style={{ width: \"90%\", height: 600, margin: \"0 auto\" }}\n          ref={this.barchart_wrapper}\n        >\n          <g ref={this.barchart}></g>\n          <g ref={this.axis_y} className={\"axis axis_y\"}></g>\n        </svg>\n        <div\n          ref={this.tooltip}\n          style={{\n            opacity: 0,\n            maxWidth: 400,\n            maxHeight: 520,\n            overflow: \"auto\",\n            backgroundColor: \"rgba(255,255,255,0.95)\",\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\n            borderRadius: \"4px\",\n          }}\n        ></div>\n      </div>\n    );\n  }\n}\n\nexport default ResourceMixChart;\n","import React, { Component } from \"react\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport * as d3 from \"d3\";\r\n\r\nimport lookup from \"./assets/data/json/eGRID lookup.json\";\r\n\r\nimport OtherLevelMap from \"./OtherLevelMap\";\r\nimport OtherLevelMapLegend from \"./OtherLevelMapLegend\";\r\nimport OtherLevelBarchart from \"./OtherLevelBarchart\";\r\nimport PlantLevelMapZoom from \"./PlantLevelMapZoom\";\r\nimport PlantLevelMapStatic from \"./PlantLevelMapStatic\";\r\nimport ResourceMixChart from \"./ResourceMixChart\";\r\n\r\nimport coal from \"./assets/img/coal.svg\";\r\nimport gas from \"./assets/img/gas.svg\";\r\nimport hydro from \"./assets/img/hydro.svg\";\r\nimport nuclear from \"./assets/img/nuclear.svg\";\r\nimport oil from \"./assets/img/oil.svg\";\r\nimport papaya from \"./assets/img/papaya.svg\";\r\nimport solar from \"./assets/img/solar.svg\";\r\nimport wind from \"./assets/img/wind.svg\";\r\n\r\nimport \"./Visualization.css\";\r\n\r\nclass Visualization extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n\r\n    this.state = {\r\n      field: this.props.field,\r\n      name: this.props.name,\r\n      unit: this.props.unit,\r\n      tier1: this.props.tier1,\r\n      tier2: this.props.tier2,\r\n      tier4: this.props.tier4,\r\n      tier5: this.props.tier5,\r\n      data: [],\r\n      us_data: [],\r\n      resource_mix_data: [],\r\n      plant_data: [],\r\n      fuels: [],\r\n      map_fill: [],\r\n      background_layer: {},\r\n      layer: {},\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.updateState();\r\n    }\r\n  }\r\n\r\n  updateState() {\r\n    let category = lookup[this.props.tier1],\r\n      region = lookup[this.props.tier5];\r\n    let choropleth_data = [],\r\n      plant_data = { type: \"FeatureCollection\", features: [] },\r\n      resource_mix_data = [],\r\n      fuels = [],\r\n      map_fill = [],\r\n      background_layer = { type: \"FeatureCollection\", features: [] },\r\n      layer = { type: \"FeatureCollection\", features: [] };\r\n\r\n    // set state depending on region and category\r\n    const us_data = this.props.us_data.map((d) => {\r\n      Object.keys(d).forEach((e) => {\r\n        if (e.split(\"US\").length > 1) {\r\n          d[\r\n            this.props.field\r\n              .replace(/\\[|\\]|\\s/g, \"\")\r\n              .split(\",\")[0]\r\n              .substring(0, 2) + e.substring(2)\r\n          ] = d[e];\r\n        }\r\n      });\r\n      return d;\r\n    });\r\n\r\n    let data = [];\r\n    if (region === \"eGRID subregion\") {\r\n      data = this.props.subrgn_data;\r\n      layer = this.props.subrgn_layer;\r\n    } else if (region === \"NERC region\") {\r\n      data = this.props.nerc_data;\r\n      layer = this.props.nerc_layer;\r\n    } else if (region === \"state\") {\r\n      data = this.props.state_data;\r\n      layer = this.props.state_layer;\r\n    } else if (region === \"Plant\") {\r\n      data = this.props.plant_data;\r\n    }\r\n\r\n    if (category === \"grid gross loss rates\") {\r\n      choropleth_data = this.props.ggl_data;\r\n      layer = this.props.ggl_layer;\r\n      background_layer = this.props.state_layer;\r\n    } else if (category === \"resource mix (%)\") {\r\n      fuels = this.props.field.replace(/\\[|\\]|\\s/g, \"\").split(\",\");\r\n      resource_mix_data = data;\r\n    } else {\r\n      if (category.split(\"emission\").length > 1) {\r\n        map_fill = this.props.choropleth_map_fill.emission;\r\n      } else if (category.split(\"generation\").length > 1) {\r\n        map_fill = this.props.choropleth_map_fill.generation;\r\n      } else if (\r\n        category.split(\"non-baseload\").length > 1 ||\r\n        category.split(\"heat input\").length > 1 ||\r\n        category.split(\"nameplate\").length > 1\r\n      ) {\r\n        map_fill = this.props.choropleth_map_fill.others;\r\n      }\r\n\r\n      choropleth_data = data.map((d) => {\r\n        return {\r\n          name: d.name,\r\n          id: d.id,\r\n          label: d.label,\r\n          unit: this.props.unit,\r\n          type: region !== \"Plant\" ? lookup[this.props.tier5] : d.FUEL,\r\n          value: d[this.props.field],\r\n        };\r\n      });\r\n\r\n      if (region === \"Plant\") {\r\n        fuels = this.props.plant_fuels;\r\n        data.map((d) => {\r\n          plant_data.features.push({\r\n            type: \"Feature\",\r\n            properties: d,\r\n            id: d.id,\r\n            title: d.name,\r\n            geometry: { type: \"Point\", coordinates: [+d.LON, +d.LAT] },\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      field: this.props.field,\r\n      name: this.props.name,\r\n      unit: this.props.unit,\r\n      tier1: this.props.tier1,\r\n      tier2: this.props.tier2,\r\n      tier4: this.props.tier4,\r\n      tier5: this.props.tier5,\r\n      data: choropleth_data,\r\n      us_data: us_data,\r\n      resource_mix_data: resource_mix_data,\r\n      plant_data: plant_data,\r\n      fuels: fuels,\r\n      map_fill: map_fill,\r\n      layer: layer,\r\n      background_layer: background_layer,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let category = lookup[this.props.tier1],\r\n      region = lookup[this.props.tier5];\r\n    const plant_outlier = this.props.plant_outlier;\r\n    const fuel_label_lookup = this.props.fuel_label_lookup;\r\n    const fuel_color_lookup = this.props.fuel_color_lookup;\r\n    const fuel_icon_lookup = {\r\n      COAL: coal,\r\n      OIL: oil,\r\n      GAS: gas,\r\n      NUCLEAR: nuclear,\r\n      HYDRO: hydro,\r\n      BIOMASS: \"\",\r\n      WIND: wind,\r\n      SOLAR: solar,\r\n      GEOTHERMAL: \"\",\r\n      OFSL: \"\",\r\n      OTHF: papaya,\r\n      HYPR: \"\",\r\n      THPR: \"\",\r\n      TNPR: \"\",\r\n      CYPR: \"\",\r\n      CNPR: \"\",\r\n    };\r\n    const wrap_long_labels = this.props.wrap_long_labels;\r\n\r\n    let fuel_name_lookup = {};\r\n    this.state.fuels.forEach((d) => {\r\n      if (d.endsWith(\"CLPR\")) {\r\n        fuel_name_lookup[d] = \"COAL\";\r\n      } else if (d.endsWith(\"OLPR\")) {\r\n        fuel_name_lookup[d] = \"OIL\";\r\n      } else if (d.endsWith(\"GSPR\")) {\r\n        fuel_name_lookup[d] = \"GAS\";\r\n      } else if (d.endsWith(\"NCPR\")) {\r\n        fuel_name_lookup[d] = \"NUCLEAR\";\r\n      } else if (d.endsWith(\"HYPR\")) {\r\n        fuel_name_lookup[d] = \"HYDRO\";\r\n      } else if (d.endsWith(\"BMPR\")) {\r\n        fuel_name_lookup[d] = \"BIOMASS\";\r\n      } else if (d.endsWith(\"WIPR\")) {\r\n        fuel_name_lookup[d] = \"WIND\";\r\n      } else if (d.endsWith(\"SOPR\")) {\r\n        fuel_name_lookup[d] = \"SOLAR\";\r\n      } else if (d.endsWith(\"GTPR\")) {\r\n        fuel_name_lookup[d] = \"GEOTHERMAL\";\r\n      } else if (d.endsWith(\"OFPR\")) {\r\n        fuel_name_lookup[d] = \"OFSL\";\r\n      } else if (d.endsWith(\"OPPR\")) {\r\n        fuel_name_lookup[d] = \"OTHF\";\r\n      } else if (d.endsWith(\"HYPR\")) {\r\n        fuel_name_lookup[d] = \"HYPR\";\r\n      } else if (d.endsWith(\"THPR\")) {\r\n        fuel_name_lookup[d] = \"THPR\";\r\n      } else if (d.endsWith(\"TNPR\")) {\r\n        fuel_name_lookup[d] = \"TNPR\";\r\n      } else if (d.endsWith(\"CYPR\")) {\r\n        fuel_name_lookup[d] = \"CYPR\";\r\n      } else if (d.endsWith(\"CNPR\")) {\r\n        fuel_name_lookup[d] = \"CNPR\";\r\n      }\r\n    });\r\n\r\n    let vis;\r\n    if (category === \"grid gross loss rates\") {\r\n      vis = (\r\n        <OtherLevelMap\r\n          title={this.state.name}\r\n          width={800}\r\n          height={600}\r\n          scale={800}\r\n          data={this.props.ggl_data}\r\n          layer={this.props.ggl_layer}\r\n          us_data={this.state.us_data}\r\n          background_layer={this.props.state_layer}\r\n          field={this.state.field}\r\n          layer_type={category}\r\n          map_fill={this.state.map_fill}\r\n        />\r\n      );\r\n    } else if (category === \"resource mix (%)\") {\r\n      vis = (\r\n        <ResourceMixChart\r\n          title={this.state.name}\r\n          width={800}\r\n          height={600}\r\n          data={this.state.resource_mix_data}\r\n          layer={this.state.layer}\r\n          us_data={this.state.us_data}\r\n          unit={this.props.unit}\r\n          fuels={this.state.fuels}\r\n          category={category}\r\n          field={this.state.field}\r\n          layer_type={region}\r\n          fuel_label_lookup={fuel_label_lookup}\r\n          fuel_color_lookup={fuel_color_lookup}\r\n          fuel_icon_lookup={fuel_icon_lookup}\r\n          fuel_name_lookup={fuel_name_lookup}\r\n          wrap_long_labels={wrap_long_labels}\r\n        />\r\n      );\r\n    } else {\r\n      if (region !== \"Plant\") {\r\n        vis =\r\n          this.state.data.length === 0 ? (\r\n            <div className=\"loading\">\r\n              <Spinner animation=\"grow\" variant=\"success\" />\r\n            </div>\r\n          ) : (\r\n            <div className=\"visualization\">\r\n              <div className=\"visualization-parts\">\r\n                <OtherLevelMap\r\n                  title={this.state.name}\r\n                  width={800}\r\n                  height={500}\r\n                  data={this.state.data}\r\n                  layer={this.state.layer}\r\n                  us_data={this.state.us_data}\r\n                  unit={this.state.unit}\r\n                  field={this.state.field}\r\n                  scale={800}\r\n                  layer_type={region}\r\n                  map_fill={this.state.map_fill}\r\n                />\r\n                <OtherLevelMapLegend\r\n                  width={500}\r\n                  height={50}\r\n                  data={this.state.data}\r\n                  map_fill={this.state.map_fill}\r\n                />\r\n              </div>\r\n              <div className=\"visualization-parts\">\r\n                <OtherLevelBarchart\r\n                  title={this.state.name}\r\n                  width={400}\r\n                  height={600}\r\n                  data={this.state.data}\r\n                  field={this.state.field}\r\n                  us_data={this.us_data}\r\n                  layer_type={region}\r\n                  unit={this.state.unit}\r\n                  map_fill={this.state.map_fill}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n      } else if (region === \"Plant\") {\r\n        vis =\r\n          this.state.data.length === 0 ? (\r\n            <div className=\"loading\">\r\n              <Spinner animation=\"grow\" variant=\"success\" />\r\n            </div>\r\n          ) : (\r\n            <div className=\"visualization\">\r\n              <PlantLevelMapZoom\r\n                title={this.state.name}\r\n                static_map_scale={900}\r\n                data={this.state.data}\r\n                fuels={this.state.fuels}\r\n                plant_data={this.state.plant_data}\r\n                init_center={[-97.922211, 42.381266]}\r\n                init_zoom={3}\r\n                min_zoom={1}\r\n                max_zoom={20}\r\n                circle_opacity={0.8}\r\n                field={this.state.field}\r\n                plant_outlier={plant_outlier}\r\n                fuel_label_lookup={fuel_label_lookup}\r\n                fuel_color_lookup={fuel_color_lookup}\r\n                fuel_icon_lookup={fuel_icon_lookup}\r\n                wrap_long_labels={wrap_long_labels}\r\n              />\r\n              <PlantLevelMapStatic\r\n                title={this.state.name}\r\n                scale={900}\r\n                background_layer={this.props.state_layer}\r\n              />\r\n            </div>\r\n          );\r\n      }\r\n    }\r\n    return <div className=\"visualization\">{vis}</div>;\r\n  }\r\n}\r\n\r\nclass UpdatedVisualization extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.exportStaticMap = this.exportStaticMap.bind(this);\r\n    this.exportVis = this.exportVis.bind(this);\r\n  }\r\n\r\n  exportStaticMap() {\r\n    let zoomable_status = d3.select(\"#map_zoomable\").style(\"display\");\r\n    let static_status = d3.select(\"#map_static\").style(\"display\");\r\n    d3.select(\"#map_zoomable\").style(\"display\", \"none\");\r\n    d3.select(\"#map_static\").style(\"display\", null);\r\n    window.print();\r\n    d3.select(\"#map_zoomable\").style(\"display\", zoomable_status);\r\n    d3.select(\"#map_static\").style(\"display\", static_status);\r\n  }\r\n\r\n  exportVis() {\r\n    window.print();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"export-div\">\r\n          <Button variant=\"secondary\" size=\"sm\">\r\n            Export Table\r\n          </Button>{\" \"}\r\n          {lookup[this.props.tier5] !== \"Plant\" && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.exportVis}>\r\n              Export Visualization\r\n            </Button>\r\n          )}\r\n          {lookup[this.props.tier5] === \"Plant\" && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.exportVis}>\r\n              Export Zoomable Map\r\n            </Button>\r\n          )}\r\n          {lookup[this.props.tier5] === \"Plant\" && \" \"}\r\n          {lookup[this.props.tier5] === \"Plant\" && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.exportStaticMap}>\r\n              Export Static Map\r\n            </Button>\r\n          )}\r\n        </div>\r\n        <Visualization\r\n          choropleth_map_fill={this.props.choropleth_map_fill}\r\n          plant_fuels={this.props.plant_fuels}\r\n          plant_outlier={this.props.plant_outlier}\r\n          fuel_label_lookup={this.props.fuel_label_lookup}\r\n          fuel_color_lookup={this.props.fuel_color_lookup}\r\n          wrap_long_labels={this.props.wrap_long_labels}\r\n          field={this.props.field}\r\n          name={this.props.name}\r\n          unit={this.props.unit}\r\n          tier1={this.props.tier1}\r\n          tier2={this.props.tier2}\r\n          tier4={this.props.tier4}\r\n          tier5={this.props.tier5}\r\n          plant_data={this.props.plant_data}\r\n          state_data={this.props.state_data}\r\n          subrgn_data={this.props.subrgn_data}\r\n          nerc_data={this.props.nerc_data}\r\n          ggl_data={this.props.ggl_data}\r\n          us_data={this.props.us_data}\r\n          state_layer={this.props.state_layer}\r\n          subrgn_layer={this.props.subrgn_layer}\r\n          nerc_layer={this.props.nerc_layer}\r\n          ggl_layer={this.props.ggl_layer}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UpdatedVisualization;\r\n","import React, { Component } from \"react\";\r\nimport * as _ from \"underscore\";\r\n\r\nimport lookup from \"./assets/data/json/eGRID lookup.json\";\r\n\r\nimport { SentenceDropdown, SentenceMiscellaneous } from \"./Sentence\";\r\nimport UpdatedVisualization from \"./Visualization\";\r\n\r\nclass Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const init_options = this.props.options[0];\r\n    this.state = {\r\n      tier1: init_options.tier1,\r\n      tier2: init_options.tier2,\r\n      tier4: init_options.tier4,\r\n      tier5: init_options.tier5,\r\n      field: init_options[\"Final field name in eGRID\"],\r\n      unit: init_options.Units,\r\n      name: init_options[\"Full Name\"],\r\n      data: [],\r\n      all_options: this.props.options.filter(\r\n        (d) => d.tier1 === init_options.tier1\r\n      ),\r\n      tier1_available_options: _.uniq(this.props.options.map((d) => d.tier1)),\r\n      tier2_available_options: _.uniq(\r\n        this.props.options\r\n          .filter((d) => d.tier1 === init_options.tier1)\r\n          .map((d) => d.tier2)\r\n      ),\r\n      tier4_available_options: _.uniq(\r\n        this.props.options\r\n          .filter(\r\n            (d) =>\r\n              d.tier1 === init_options.tier1 &&\r\n              d.tier2 === init_options.tier2\r\n          )\r\n          .map((d) => d.tier4)\r\n      ),\r\n      tier5_available_options: _.uniq(\r\n        this.props.options\r\n          .filter(\r\n            (d) =>\r\n              d.tier1 === init_options.tier1 &&\r\n              d.tier2 === init_options.tier2 &&\r\n              d.tier4 === init_options.tier4\r\n          )\r\n          .map((d) => d.tier5)\r\n      ),\r\n    };\r\n\r\n    this.handleChange1 = this.handleChange1.bind(this);\r\n    this.handleChange2 = this.handleChange2.bind(this);\r\n    this.handleChange4 = this.handleChange4.bind(this);\r\n    this.handleChange5 = this.handleChange5.bind(this);\r\n  }\r\n\r\n  handleChange1(event) {\r\n    let val = event.target.value;\r\n    this.setState(\r\n      {\r\n        tier1: val,\r\n        all_options: this.props.options.filter((d) => d.tier1 === val),\r\n        updated_tier: \"tier1\",\r\n      },\r\n      () => {\r\n        let t2_avail = this.props.options.filter((d) => d.tier1 === val);\r\n        let t2_val =\r\n          t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n            ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n            : this.state.tier2;\r\n        this.setState({ tier2: t2_val }, () => {\r\n          let t4_avail = this.props.options.filter(\r\n            (d) =>\r\n              d.tier1 === val &&\r\n              d.tier2 === this.state.tier2\r\n          );\r\n          let t4_val =\r\n            t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n              ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n              : this.state.tier4;\r\n          this.setState({ tier4: t4_val }, () => {\r\n            let t5_avail = this.props.options.filter(\r\n              (d) =>\r\n                d.tier1 === val &&\r\n                d.tier2 === this.state.tier2 &&\r\n                d.tier4 === this.state.tier4\r\n            );\r\n            let t5_val =\r\n              t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n                ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n                : this.state.tier5;\r\n            this.setState({ tier5: t5_val }, () => {\r\n              let opt = this.state.all_options.filter(\r\n                (d) =>\r\n                  d.tier1 === this.state.tier1 &&\r\n                  d.tier2 === this.state.tier2 &&\r\n                  d.tier4 === this.state.tier4 &&\r\n                  d.tier5 === this.state.tier5\r\n              )[0];\r\n              this.setState({\r\n                tier2_available_options: _.uniq(\r\n                  this.state.all_options.map((d) => d.tier2)\r\n                ),\r\n                tier4_available_options: _.uniq(\r\n                  this.state.all_options\r\n                    .filter(\r\n                      (d) =>\r\n                        d.tier2 === this.state.tier2\r\n                    )\r\n                    .map((d) => d.tier4)\r\n                ),\r\n                tier5_available_options: _.uniq(\r\n                  this.state.all_options\r\n                    .filter(\r\n                      (d) =>\r\n                        d.tier2 === this.state.tier2 &&\r\n                        d.tier4 === this.state.tier4\r\n                    )\r\n                    .map((d) => d.tier5)\r\n                ),\r\n              });\r\n              this.setState({\r\n                field: opt[\"Final field name in eGRID\"],\r\n                unit: opt.Units,\r\n                name: opt[\"Full Name\"],\r\n              }, ()=>{\r\n                console.log(this.state);\r\n              });\r\n              \r\n            });\r\n          });\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  handleChange2(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier2: val, updated_tier: \"tier2\" }, () => {\r\n\r\n      let t4_avail = this.props.options.filter(\r\n        (d) =>\r\n          d.tier1 === this.state.tier1 &&\r\n          d.tier2 === val\r\n      );\r\n      let t4_val =\r\n        t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n          ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n          : this.state.tier4;\r\n      this.setState({ tier4: t4_val }, () => {\r\n        let t5_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === val &&\r\n            d.tier4 === this.state.tier4\r\n        );\r\n        let t5_val =\r\n          t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n            ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n            : this.state.tier5;\r\n        this.setState({ tier5: t5_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2\r\n                )\r\n                .map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2 &&\r\n                    d.tier4 === this.state.tier4\r\n                )\r\n                .map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState({\r\n            field: opt[\"Final field name in eGRID\"],\r\n            unit: opt.Units,\r\n            name: opt[\"Full Name\"],\r\n          }, ()=>{\r\n            console.log(this.state);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange4(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier4: val, updated_tier: \"tier4\" }, () => {\r\n      let t2_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier4 === val\r\n      );\r\n      let t2_val =\r\n        t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n          ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n          : this.state.tier2;\r\n      this.setState({ tier2: t2_val }, () => {\r\n        let t5_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === this.state.tier2 &&\r\n            d.tier4 === val\r\n        );\r\n        let t5_val =\r\n          t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n            ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n            : this.state.tier5;\r\n        this.setState({ tier5: t5_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2 &&\r\n                    d.tier4 === this.state.tier4\r\n                )\r\n                .map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState({\r\n            field: opt[\"Final field name in eGRID\"],\r\n            unit: opt.Units,\r\n            name: opt[\"Full Name\"],\r\n          }, ()=>{\r\n            console.log(this.state);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange5(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier5: val, updated_tier: \"tier5\" }, () => {\r\n      let t2_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier5 === val\r\n      );\r\n      let t2_val =\r\n        t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n          ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n          : this.state.tier2;\r\n      this.setState({ tier2: t2_val }, () => {\r\n        let t4_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === this.state.tier2 &&\r\n            d.tier5 === val\r\n        );\r\n        let t4_val =\r\n          t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n            ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n            : this.state.tier4;\r\n        this.setState({ tier4: t4_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState({\r\n            field: opt[\"Final field name in eGRID\"],\r\n            unit: opt.Units,\r\n            name: opt[\"Full Name\"],\r\n          }, ()=>{\r\n            console.log(this.state);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let all_options = this.state.all_options;\r\n    let tier2_options = _.uniq(all_options.map((op) => lookup[op.tier2])),\r\n      tier4_options = _.uniq(all_options.map((op) => lookup[op.tier4])),\r\n      tier5_options = _.uniq(all_options.map((op) => lookup[op.tier5]));\r\n    return (\r\n      <div>\r\n        <p className=\"main\">\r\n          I want to explore\r\n          <SentenceDropdown\r\n            id=\"tier1\"\r\n            change={this.handleChange1}\r\n            updated_tier={this.state.updated_tier}\r\n            selected_option={this.state.tier1}\r\n            available_options={this.state.tier1_available_options}\r\n            options={_.uniq(\r\n              this.props.options.map((op) => [op.tier1, lookup[op.tier1]]),\r\n              (d) => d[0]\r\n            )}\r\n          />\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct1}\r\n          />\r\n          <span> </span>\r\n          {tier2_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier2\"\r\n              change={this.handleChange2}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier2}\r\n              available_options={this.state.tier2_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier2,\r\n                  lookup[op.tier2],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier2_options.length === 1 && tier2_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier2]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct2}\r\n          />\r\n          <span> </span>\r\n          {tier4_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier4\"\r\n              change={this.handleChange4}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier4}\r\n              available_options={this.state.tier4_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier4,\r\n                  lookup[op.tier4],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier4_options.length === 1 && tier4_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier4]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct3}\r\n          />\r\n          <span> </span>\r\n          {tier5_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier5\"\r\n              change={this.handleChange5}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier5}\r\n              available_options={this.state.tier5_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier5,\r\n                  lookup[op.tier5],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier5_options.length === 1 && tier5_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier5]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct4}\r\n          />\r\n          <span> for </span>\r\n          <SentenceMiscellaneous value={this.props.year} />.\r\n        </p>\r\n        <UpdatedVisualization\r\n          className=\"main\"\r\n          choropleth_map_fill={this.props.choropleth_map_fill}\r\n          plant_fuels={this.props.plant_fuels}\r\n          plant_outlier={this.props.plant_outlier}\r\n          fuel_label_lookup={this.props.fuel_label_lookup}\r\n          fuel_color_lookup={this.props.fuel_color_lookup}\r\n          wrap_long_labels={this.props.wrap_long_labels}\r\n          field={this.state.field}\r\n          name={this.state.name}\r\n          unit={this.state.unit}\r\n          tier1={this.state.tier1}\r\n          tier2={this.state.tier2}\r\n          tier4={this.state.tier4}\r\n          tier5={this.state.tier5}\r\n          plant_data={this.props.plant_data}\r\n          state_data={this.props.state_data}\r\n          subrgn_data={this.props.subrgn_data}\r\n          nerc_data={this.props.nerc_data}\r\n          ggl_data={this.props.ggl_data}\r\n          us_data={this.props.us_data}\r\n          state_layer={this.props.state_layer}\r\n          subrgn_layer={this.props.subrgn_layer}\r\n          nerc_layer={this.props.nerc_layer}\r\n          ggl_layer={this.props.ggl_layer}\r\n        ></UpdatedVisualization>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n","import React, { Component } from \"react\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Dialog from \"./Dialog\";\r\nimport * as d3 from \"d3\";\r\nimport * as topojson from \"topojson-client\";\r\n\r\nimport logo from \"./assets/img/logo.png\";\r\n\r\nimport subrgn_topo from \"./assets/data/json/SUBRGN.json\";\r\nimport nerc_topo from \"./assets/data/json/NERC.json\";\r\nimport ggl_topo from \"./assets/data/json/GGL.json\";\r\nimport us_topo from \"./assets/data/json/US.json\";\r\n\r\nimport data from \"./assets/data/csv/eGRID all-level sentence structure.csv\";\r\nimport subrgn from \"./assets/data/csv/subregion.csv\";\r\nimport nerc from \"./assets/data/csv/NERC.csv\";\r\nimport state from \"./assets/data/csv/state.csv\";\r\nimport statefullname from \"./assets/data/csv/eGRID state fullname.csv\";\r\nimport plant from \"./assets/data/csv/plant.csv\";\r\nimport ggl from \"./assets/data/csv/GGL.csv\";\r\nimport us from \"./assets/data/csv/US.csv\";\r\n\r\nimport Main from \"./Main\";\r\n\r\nimport \"./App.css\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show_modal: false,\r\n      options: [],\r\n      plant_data: [],\r\n      state_data: [],\r\n      subrgn_data: [],\r\n      nerc_data: [],\r\n      ggl_data: [],\r\n      us_data: [],\r\n    };\r\n\r\n    this.year = 2018;\r\n    this.conjunction = {\r\n      tier1_0: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_1: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_2: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_3: {\r\n        conjunct1: \"of\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_4: {\r\n        conjunct1: \"from\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_5: {\r\n        conjunct1: \"from\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_6: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_7: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_8: {\r\n        conjunct1: \"\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_9: { conjunct1: \"\", conjunct2: \"\", conjunct3: \"\", conjunct4: \"\" },\r\n    };\r\n    this.choropleth_map_fill = {\r\n      emission: [\"#eff3ff\", \"#bdd7e7\", \"#6baed6\", \"#3182bd\", \"#08519c\"],\r\n      generation: [\"#feedde\", \"#fdbe85\", \"#fd8d3c\", \"#e6550d\", \"#a63603\"],\r\n      others: [\"#edf8e9\", \"#bae4b3\", \"#74c476\", \"#31a354\", \"#006d2c\"]\r\n    };\r\n    this.plant_fuels = [\r\n      \"COAL\",\r\n      \"OIL\",\r\n      \"GAS\",\r\n      \"NUCLEAR\",\r\n      \"HYDRO\",\r\n      \"BIOMASS\",\r\n      \"WIND\",\r\n      \"SOLAR\",\r\n      \"GEOTHERMAL\",\r\n      \"OFSL\",\r\n      \"OTHF\",\r\n    ];\r\n    this.plant_outlier = {\r\n      PLNOXRTA: 2000,\r\n      PLNOXRTO: 1000,\r\n      PLSO2RTA: 800,\r\n      PLCO2RTA: 10000,\r\n      PLCH4RTA: 20,\r\n      PLN2ORTA: 3,\r\n      PLC2ERTA: 10000,\r\n      PLNOXRA: 7,\r\n      PLNOXRO: 7,\r\n      PLSO2RA: 6,\r\n      PLCO2RA: 300,\r\n      PLNGENAN: 20000000,\r\n      PLNGENOZ: 10000000,\r\n      PLGENACL: undefined,\r\n      PLGENAOL: undefined,\r\n      PLGENAGS: 13000000,\r\n      PLGENANC: 27000000,\r\n      PLGENAHY: 16000000,\r\n      PLGENABM: undefined,\r\n      PLGENAWI: 2000000,\r\n      PLGENASO: 1000000,\r\n      PLGENAGT: 1000000,\r\n      PLGENAOF: 1000000,\r\n      PLGENAOP: undefined,\r\n      PLGENATN: 20000000,\r\n      PLGENATR: 20000000,\r\n      PLGENATH: 2000000,\r\n      PLGENACY: 20000000,\r\n      PLGENACN: 20000000,\r\n      PLHTIAN: 165000000,\r\n      PLHTIOZ: 75000000,\r\n      PLNOXAN: undefined,\r\n      PLNOXOZ: undefined,\r\n      PLSO2AN: 30000,\r\n      PLCO2AN: 17000000,\r\n      PLCH4AN: undefined,\r\n      PLN2OAN: undefined,\r\n      PLCO2EQA: 17000000,\r\n    };\r\n    this.fuel_label_lookup = {\r\n      COAL: \"Coal\",\r\n      OIL: \"Oil\",\r\n      GAS: \"Gas\",\r\n      NUCLEAR: \"Nuclear\",\r\n      HYDRO: \"Hydro\",\r\n      BIOMASS: \"Biomass\",\r\n      WIND: \"Wind\",\r\n      SOLAR: \"Solar\",\r\n      GEOTHERMAL: \"Geothermal\",\r\n      OFSL: \"Other Fossil\",\r\n      OTHF: \"Other Unknown\",\r\n      HYPR: \"Hydro\",\r\n      THPR: \"All Non-Hydro Renewables\",\r\n      TNPR: \"All Non-Renewables\",\r\n      CYPR: \"All Combustion\",\r\n      CNPR: \"All Non-Combustion\",\r\n    };\r\n    this.fuel_color_lookup = {\r\n      COAL: \"rgb(85, 85, 85)\",\r\n      OIL: \"rgb(237, 28, 36)\",\r\n      GAS: \"rgb(246, 139, 40)\",\r\n      NUCLEAR: \"rgb(207, 74, 154)\",\r\n      HYDRO: \"rgb(0, 129, 197)\",\r\n      BIOMASS: \"rgb(44, 160, 44)\",\r\n      WIND: \"rgb(13, 177, 75)\",\r\n      SOLAR: \"rgb(215, 201, 68)\",\r\n      GEOTHERMAL: \"rgb(255, 152, 150)\",\r\n      OFSL: \"rgb(140, 86, 75)\",\r\n      OTHF: \"rgb(255, 239, 213)\",\r\n      HYPR: \"rgb(0, 129, 197)\",\r\n      THPR: \"rgb(13, 177, 75)\",\r\n      TNPR: \"rgb(255, 187, 120)\",\r\n      CYPR: \"rgb(237, 28, 36)\",\r\n      CNPR: \"rgb(255, 187, 120)\",\r\n    };\r\n    this.wrap_long_labels = function (text, width) {\r\n      text.each(function () {\r\n        var text = d3.select(this),\r\n          words = text.text().split(/\\s+/).reverse(),\r\n          word,\r\n          line = [],\r\n          lineNumber = 0,\r\n          lineHeight = 1.1, // ems\r\n          x = text.attr(\"x\"),\r\n          y = text.attr(\"y\"),\r\n          dy = parseFloat(text.attr(\"dy\")),\r\n          tspan = text\r\n            .text(null)\r\n            .append(\"tspan\")\r\n            .attr(\"x\", x)\r\n            .attr(\"y\", y)\r\n            .attr(\"dy\", dy + \"em\");\r\n        while ((word = words.pop())) {\r\n          line.push(word);\r\n          tspan.text(line.join(\" \"));\r\n          if (tspan.node().getComputedTextLength() > width) {\r\n            line.pop();\r\n            tspan.text(line.join(\" \"));\r\n            line = [word];\r\n            tspan = text\r\n              .append(\"tspan\")\r\n              .attr(\"x\", x)\r\n              .attr(\"y\", y)\r\n              .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\r\n              .text(word);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    this.ggl_layer = topojson.feature(ggl_topo, \"GGL\");\r\n    this.subrgn_layer = topojson.feature(subrgn_topo, \"subregion\");\r\n    this.nerc_layer = topojson.feature(nerc_topo, \"NERC\");\r\n    this.state_layer = topojson.feature(us_topo, \"states\");\r\n\r\n    this.ggl_layer.features.map((d) => (d.name = d.properties.GGL));\r\n    this.nerc_layer.features = this.nerc_layer.features\r\n      .filter((d) => d.properties.NERC !== \"-\" && d.properties.NERC !== \"SPP\") // no data for \"-\" and \"SPP\"\r\n      .map((d) => {\r\n        d.name = d.properties.NERC;\r\n        return d;\r\n      });\r\n    this.subrgn_layer.features.map((d) => (d.name = d.properties.Subregions));\r\n    this.state_layer.features = this.state_layer.features.filter(d=>d.id !== 72 && d.id !== 78); // no data for state 72 and state 78\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.prepData();\r\n  }\r\n\r\n  prepData() {\r\n    Promise.all([\r\n      d3.csv(data),\r\n      d3.csv(subrgn),\r\n      d3.csv(state),\r\n      d3.csv(statefullname),\r\n      d3.csv(nerc),\r\n      d3.csv(plant),\r\n      d3.csv(ggl),\r\n      d3.csv(us),\r\n    ]).then(\r\n      ([options, subrgn, state, state_fullname, nerc, plant, ggl, us]) => {\r\n        // process data\r\n        state.map((d) => {\r\n          d.label = d.PSTATABB;\r\n          d.ABBR = d.PSTATABB;\r\n          d.PSTATABB = state_fullname\r\n            .filter((e) => e.STATE === d.PSTATABB)\r\n            .map((e) => e.STATEFULL)[0];\r\n          d.name = d.PSTATABB;\r\n\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = d.FIPSST;\r\n        });\r\n        this.state_layer.features.map((d) =>\r\n          state.filter((e) => e.FIPSST === d.id).length === 1\r\n            ? (d.name = state.filter((e) => e.FIPSST === d.id)[0].name)\r\n            : \"\"\r\n        );\r\n\r\n        plant.map((d, i) => {\r\n          d.label = d.PNAME;\r\n          d.name = d.PNAME;\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = i;\r\n        });\r\n\r\n        subrgn.map((d, i) => {\r\n          d.label = d.SUBRGN;\r\n          d.name = d.SUBRGN;\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = i;\r\n        });\r\n\r\n        nerc = nerc.filter((d) => d.NERC !== \"NA\");\r\n        nerc.map((d, i) => {\r\n          d.label = d.NERC;\r\n          d.name = d.NERC;\r\n          Object.keys(d).forEach(function (e) {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = i;\r\n        });\r\n\r\n        ggl.map((d, i) => {\r\n          d.label = d.GGL;\r\n          d.name = d.GGL;\r\n          d.id = i;\r\n          d.unit = \"%\";\r\n          d.value = +d.percentage;\r\n        });\r\n\r\n        us.map((d) => {\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.name = \"US\";\r\n          d.id = -1;\r\n        });\r\n\r\n        this.state_data = state;\r\n        this.plant_data = plant;\r\n        this.subrgn_data = subrgn;\r\n        this.nerc_data = nerc;\r\n        this.ggl_data = ggl;\r\n        this.us_data = us;\r\n\r\n        this.setState({\r\n          options: options.filter((e) => e.tier5 !== \"52\"),\r\n          state_data: state,\r\n          plant_data: plant,\r\n          subrgn_data: subrgn,\r\n          nerc_data: nerc,\r\n          ggl_data: ggl,\r\n          us_data: us,\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        {this.state.options.length > 0 &&\r\n        this.state.plant_data.length > 0 &&\r\n        this.state.state_data.length > 0 &&\r\n        this.state.subrgn_data.length > 0 &&\r\n        this.state.nerc_data.length > 0 &&\r\n        this.state.ggl_data.length > 0 &&\r\n        this.state.us_data.length > 0 ? (\r\n          <div>\r\n            <header>\r\n              <h2>Emissions and Generation Resource Integrated Database</h2>\r\n              <span className=\"dialog\"> (</span>\r\n              <span\r\n                className=\"dialog-text\"\r\n                onClick={() => this.setState({ show_modal: true })}\r\n              >\r\n                More Information\r\n              </span>\r\n              <span className=\"dialog\">)</span>\r\n              <img id=\"logo\" src={logo}></img>\r\n            </header>\r\n            <Main\r\n              year={this.year}\r\n              conjunction={this.conjunction}\r\n              choropleth_map_fill={this.choropleth_map_fill}\r\n              plant_fuels={this.plant_fuels}\r\n              plant_outlier={this.plant_outlier}\r\n              fuel_label_lookup={this.fuel_label_lookup}\r\n              fuel_color_lookup={this.fuel_color_lookup}\r\n              wrap_long_labels={this.wrap_long_labels}\r\n              options={this.state.options}\r\n              plant_data={this.state.plant_data}\r\n              state_data={this.state.state_data}\r\n              subrgn_data={this.state.subrgn_data}\r\n              nerc_data={this.state.nerc_data}\r\n              ggl_data={this.state.ggl_data}\r\n              us_data={this.state.us_data}\r\n              state_layer={this.state_layer}\r\n              subrgn_layer={this.subrgn_layer}\r\n              nerc_layer={this.nerc_layer}\r\n              ggl_layer={this.ggl_layer}\r\n            ></Main>\r\n          </div>\r\n        ) : (\r\n          <div className=\"loading\">\r\n            <Spinner animation=\"grow\" variant=\"success\" />\r\n          </div>\r\n        )}\r\n        <Dialog\r\n          show={this.state.show_modal}\r\n          onHide={() => this.setState({ show_modal: false })}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/logo.199eebe4.png\";","module.exports = __webpack_public_path__ + \"static/media/eGRID all-level sentence structure.d04b63af.csv\";","module.exports = __webpack_public_path__ + \"static/media/subregion.64fdecd4.csv\";","module.exports = __webpack_public_path__ + \"static/media/NERC.c9b492cd.csv\";","module.exports = __webpack_public_path__ + \"static/media/state.0b78ae39.csv\";","module.exports = __webpack_public_path__ + \"static/media/eGRID state fullname.a33812da.csv\";","module.exports = __webpack_public_path__ + \"static/media/plant.08bfd867.csv\";"],"sourceRoot":""}