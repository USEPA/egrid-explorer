{"version":3,"sources":["assets/img/coal.svg","assets/img/gas.svg","assets/img/hydro.svg","assets/img/nuclear.svg","assets/img/oil.svg","assets/img/papaya.svg","assets/img/solar.svg","assets/img/wind.svg","assets/img/logo.png","assets/data/csv/eGRID all-level sentence structure.csv","Components/Sentence.js","Components/OtherLevelMap.js","Components/OtherLevelMapLegend.js","Components/OtherLevelBarchart.js","Components/Table.js","Components/PlantLevelMapZoom.js","Components/ResourceMixChart.js","Components/Visualization.js","Components/Main.js","Components/Dialog.js","App.js","serviceWorker.js","index.js","assets/data/csv/subregion.csv","assets/data/csv/NERC.csv","assets/data/csv/state.csv","assets/data/csv/eGRID state fullname.csv","assets/data/csv/plant.csv","assets/data/csv/GGL.csv","assets/data/csv/US.csv"],"names":["module","exports","SentenceDropdown","opts","selected_option","this","props","available_options","options","some","option","opt","id","updated_tier","indexOf","key","value","disabled","push","onChange","change","Component","SentenceMiscellaneous","OtherLevelMap","tooltip","React","createRef","background","map","labels","d","d3","isNaN","Math","floor","layer","label_width","layer_type","label_height","projection","d3_composite","scale","translate","width","height","path","mapfill","features","data","filter","e","name","prop","centroid","properties","fill_scale","range","domainArr","sort","a","b","domain","length","current","selectAll","remove","enter","append","attr","style","on","transition","duration","html","title","slice","toLowerCase","split","unit","pageY","pageX","classed","text","label","background_layer","initView","prevProps","field","fontSize","fontWeight","fill","className","textAnchor","formatNumber","us_data","ref","opacity","maxWidth","maxHeight","padding","overflow","backgroundColor","boxShadow","borderRadius","OtherLevelMapLegend","legend","t","num","substring","d3_legend","shape","shapeWidth","shapeHeight","shapePadding","labelOffset","orient","labelFormat","labelAlign","i","label_str","generatedLabels","node","call","formatLegendLabel","OtherLevelBarchart","barchart","axis_x","axis_y","axis_x_title","state","sort_by","by","marginLeft","barFillScale","barXScale","barYScale","paddingInner","paddingOuter","bars","bandwidth","formatLabel","ticks","tickFormat","formatXaxis","updateView","prevState","ToggleButtonGroup","type","defaultValue","val","setState","ToggleButton","UpdatedTable","startsWith","Table","striped","bordered","hover","responsive","region","table_info","COAL","US_COAL","OIL","US_OIL","GAS","US_GAS","NUCLEAR","US_NUCLEAR","HYDRO","US_HYDRO","BIOMASS","US_BIOMASS","WIND","US_WIND","SOLAR","US_SOLAR","GEOTHERMAL","US_GEOTHERMAL","OFSL","US_OFSL","OTHF","US_OTHF","TNPR","US_TNPR","THPR","US_THPR","CYPR","US_CYPR","CNPR","US_CNPR","PNAME","ORISPL","PSTATABB","href","SUBRGN","PLPRMFL","NAMEPCAP","CAPFAC","PLNGENAN","PLHTIANT","PLNOXAN","PLNOXRTA","PLNOXOZ","PLNOXRTO","PLSO2AN","PLSO2RTA","PLCO2AN","PLCO2RTA","PLCH4AN","PLCH4RTA","PLN2OAN","PLN2ORTA","PLCO2EQA","PLC2ERTA","mapboxgl","accessToken","PlantLevelMapZoom","fuels","selected_fuel","min_zoom_out","max_zoom_in","field_factor_divided_by","max_radius","max_radius_before_remove","zoom_factor","legend_len","legend_percentile","plant_outlier","PLNOXRA","PLNOXRO","PLSO2RA","PLCO2RA","PLNGENOZ","PLGENACL","undefined","PLGENAOL","PLGENAGS","PLGENANC","PLGENAHY","PLGENABM","PLGENAWI","PLGENASO","PLGENAGT","PLGENAOF","PLGENAOP","PLGENATN","PLGENATR","PLGENATH","PLGENACY","PLGENACN","PLHTIAN","PLHTIOZ","filter_text","filter_reset_text","w","clientWidth","h","clientHeight","boxlen","fuels_svg","fuel_icon_lookup","min","fuel_color_lookup","fuel_label_lookup","wrap_long_labels","insert","n","loaded","concat","json_data","getSource","setData","setRadius","select","factor","updateLegend","JSON","stringify","FUEL","init_zoom","init_center","Map","container","center","zoom","setMaxZoom","setMinZoom","addControl","NavigationControl","FullscreenControl","ResetControl","_map","_container","document","createElement","innerHTML","cursor","onclick","flyTo","parentNode","removeChild","LayerControl","nodes","Legend","addSource","addLayer","source","paint","show_tooltip","hoveredPlantId","Popup","closeButton","closeOnClick","anchor","setFeatureState","getCanvas","setLngLat","geometry","coordinates","setText","addTo","getLngLat","lng","lat","Object","keys","forEach","description","renderToString","setHTML","field_values","radius_values","getZoom","legend_values","legend_cells","formatLegend","setPaintProperty","margin","ResourceMixChart","wrapper","barchart_wrapper","micromap","sort_text","w_legend","h_legend","fuel_name_lookup","fuel_names","fuel_colors","values","_","cumsum","f","w_micro","h_micro","fuel","each","Visualization","tier1","tier2","tier4","tier5","resource_mix_data","ggl_layer","topojson","ggl_topo","subrgn_layer","subrgn_topo","nerc_layer","nerc_topo","state_layer","us_topo","GGL","NERC","Subregions","initState","updateState","Promise","all","subrgn","statefullname","nerc","plant","ggl","us","then","state_fullname","ABBR","STATE","STATEFULL","replace","FIPSST","percentage","state_data","plant_data","subrgn_data","nerc_data","ggl_data","category","lookup","data_formatted","LON","LAT","HYPR","coal","oil","gas","nuclear","hydro","wind","solar","papaya","endsWith","vis","word","words","reverse","line","lineNumber","x","y","dy","parseFloat","tspan","pop","join","getComputedTextLength","Spinner","animation","variant","UpdatedVisualization","display","Button","size","conjunction","tier1_0","conjunct1","conjunct2","conjunct3","conjunct4","tier1_1","tier1_2","tier1_3","tier1_4","tier1_5","tier1_6","tier1_7","tier1_8","tier1_9","Main","init_options","Units","all_options","tier1_available_options","tier2_available_options","tier4_available_options","tier5_available_options","handleChange1","bind","handleChange2","handleChange4","handleChange5","event","target","t2_avail","t2_val","t4_avail","t4_val","t5_avail","t5_val","console","log","tier2_options","op","tier4_options","tier5_options","Dialog","Modal","aria-labelledby","centered","Header","Title","Body","Footer","onClick","onHide","App","OPTIONS","show_modal","src","logo","show","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.1628513d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/coal.9692c7b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/gas.383feb87.svg\";","module.exports = __webpack_public_path__ + \"static/media/hydro.d3125ed9.svg\";","module.exports = __webpack_public_path__ + \"static/media/nuclear.2a50e8cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/oil.9b1b3165.svg\";","module.exports = __webpack_public_path__ + \"static/media/papaya.303f93a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/solar.bb67ad70.svg\";","module.exports = __webpack_public_path__ + \"static/media/wind.d4de7a67.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.199eebe4.png\";","module.exports = __webpack_public_path__ + \"static/media/eGRID all-level sentence structure.1ab9a58e.csv\";","import React, { Component } from \"react\";\nimport \"../App.css\";\n\nclass SentenceDropdown extends Component {\n  render() {\n    const opts = [];\n    let selected_option = this.props.selected_option,\n      available_options = this.props.available_options;\n\n    this.props.options.some((option) => {\n      let opt = null;\n      if (this.props.id === \"tier1\") {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={false}>\n            {option[1]}\n          </option>\n        );\n      } else if (this.props.id === this.props.updated_tier) {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={false}>\n            {option[1]}\n          </option>\n        );\n      } else if (available_options.indexOf(option[0]) !== -1) {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={false}>\n            {option[1]}\n          </option>\n        );\n      } else if (available_options.indexOf(option[0]) === -1) {\n        opt = (\n          <option key={option[0]} value={option[0]} disabled={true}>\n            {option[1]}\n          </option>\n        );\n      }\n      opts.push(opt);\n    });\n\n    return (\n      <select value={selected_option} onChange={this.props.change}>\n        {opts}\n      </select>\n    );\n  }\n}\n\nclass SentenceMiscellaneous extends Component {\n  render() {\n    return <span>{this.props.value}</span>;\n  }\n}\n\nexport { SentenceDropdown, SentenceMiscellaneous };\n","import React, { Component } from \"react\";\r\nimport \"../App.css\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3_composite from \"d3-composite-projections\";\r\n\r\nclass OtherLevelMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tooltip = React.createRef();\r\n    this.background = React.createRef();\r\n    this.map = React.createRef();\r\n    this.labels = React.createRef();\r\n  }\r\n\r\n  formatNumber(d) {\r\n    if (d < 1) {\r\n      return d3.format(\".3f\")(d);\r\n    } else if (d >= 1000000) {\r\n      return d3.format(\",.0f\")(d);\r\n    } else {\r\n      return isNaN(d) ? \"\" : d3.format(\",.2f\")(Math.floor(d * 100) / 100);\r\n    }\r\n  }\r\n\r\n  initView() {\r\n    const layer = this.props.layer,\r\n      label_width =\r\n        this.props.layer_type === \"grid gross loss rates\"\r\n          ? 120\r\n          : this.props.layer_type === \"state\"\r\n          ? 20\r\n          : 40,\r\n      label_height =\r\n        this.props.layer_type !== \"grid gross loss rates\" ? 14 : 22;\r\n\r\n    const projection = d3_composite\r\n      .geoAlbersUsaTerritories()\r\n      .scale(this.props.scale)\r\n      .translate([this.props.width / 2, this.props.height / 2.5]);\r\n    const path = d3.geoPath().projection(projection);\r\n    const mapfill = this.props.mapfill;\r\n\r\n    // add centroid to layer\r\n    layer.features = layer.features\r\n      .map((d) => {\r\n        if (this.props.data.filter((e) => e.name === d.name)[0]) {\r\n          let prop = this.props.data.filter((e) => e.name === d.name)[0];\r\n          prop.centroid = path.centroid(d);\r\n          d.properties = prop;\r\n        } else {\r\n          d.properties = null;\r\n        }\r\n        return d;\r\n      })\r\n      .filter((d) => d.properties !== null);\r\n\r\n    // add fill scale\r\n    let fill_scale = d3.scaleThreshold().range(mapfill);\r\n    let domainArr = layer.features\r\n      .map((e) => e.properties.value)\r\n      .sort((a, b) => a - b);\r\n    fill_scale.domain(\r\n      d3\r\n        .range(mapfill.length - 1)\r\n        .map((d) => d3.quantile(domainArr, (d + 1) / mapfill.length))\r\n    );\r\n\r\n    // add layers\r\n    d3.select(this.map.current).selectAll(\"path\").remove();\r\n    d3.select(this.map.current)\r\n      .selectAll(\"path\")\r\n      .data(layer.features)\r\n      .enter()\r\n      .append(\"path\")\r\n      .attr(\"d\", path)\r\n      .attr(\"class\", (d) => \"paths mouseover_target region_\" + d.properties.id)\r\n      .style(\"fill\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\"\r\n          ? fill_scale(d.properties.value)\r\n          : \"transparent\"\r\n      )\r\n      .style(\"stroke\", \"#000\")\r\n      .style(\"stroke-width\", 0.5)\r\n      .on('mouseover', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(100)\r\n        .style(\"opacity\", 1);\r\n      })\r\n      .on('mousemove', d=>{\r\n        let html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.properties.name + \"</b><br>is <b>\" + d.properties.value + \" \" + d.properties.unit + \"</b>.</span>\";\r\n        d3.select(this.tooltip.current)\r\n        .html(html)\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"top\", d3.event.pageY + 30 + \"px\")\r\n        .style(\"left\", d3.event.pageX - 150 + \"px\")\r\n        .style(\"opacity\", 1);\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true);\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true);\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true);\r\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true);\r\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true);\r\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true);\r\n      })\r\n      .on('mouseout', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(500)\r\n        .style(\"opacity\", 0);\r\n\r\n        d3.selectAll('.deemphasized').classed('deemphasized', false);\r\n        d3.selectAll('.selected').classed('selected', false);\r\n      });\r\n\r\n    // add labels\r\n    d3.select(this.labels.current).selectAll(\"g\").remove();\r\n    let labels = d3\r\n      .select(this.labels.current)\r\n      .selectAll(\"g\")\r\n      .data(layer.features)\r\n      .enter()\r\n      .append(\"g\");\r\n\r\n    labels\r\n      .append(\"rect\")\r\n      .attr(\"x\", (d) => d.properties.centroid[0] - label_width / 2)\r\n      .attr(\"y\", (d) => d.properties.centroid[1])\r\n      .attr(\"width\", label_width)\r\n      .attr(\"height\", label_height)\r\n      .attr(\"rx\", 4)\r\n      .style(\"fill\", \"#fff\")\r\n      .style(\"stroke\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\" ? \"none\" : \"#000\"\r\n      );\r\n\r\n    labels\r\n      .append(\"text\")\r\n      .attr(\"x\", (d) => d.properties.centroid[0])\r\n      .attr(\"y\", (d) => d.properties.centroid[1] + label_height * 0.8)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"font-size\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\" ? \"0.7em\" : \"1em\"\r\n      )\r\n      .style(\"font-weight\", \"bold\")\r\n      .text((d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\"\r\n          ? d.properties.label\r\n          : d.properties.label + \": \" + d.properties.value + \"%\"\r\n      ).on('mouseover', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(100)\r\n        .style(\"opacity\", 1);\r\n      })\r\n      .on('mousemove', d=>{\r\n        let html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.properties.name + \"</b><br>is <b>\" + d.properties.value + \" \" + d.properties.unit + \"</b>.</span>\";\r\n        d3.select(this.tooltip.current)\r\n        .html(html)\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"top\", d3.event.pageY + 30 + \"px\")\r\n        .style(\"left\", d3.event.pageX - 150 + \"px\")\r\n        .style(\"opacity\", 1);\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true);\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true);\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true);\r\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true);\r\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true);\r\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true);\r\n      })\r\n      .on('mouseout', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(500)\r\n        .style(\"opacity\", 0);\r\n\r\n        d3.selectAll('.deemphasized').classed('deemphasized', false);\r\n        d3.selectAll('.selected').classed('selected', false);\r\n      });\r\n\r\n    // add background (grid gross loss rates)\r\n    if (this.props.layer_type === \"grid gross loss rates\") {\r\n      d3.select(this.background.current).selectAll(\"path\").remove();\r\n      d3.select(this.background.current)\r\n        .selectAll(\"path\")\r\n        .data(this.props.background_layer.features)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", path)\r\n        .attr(\"class\", \"paths\")\r\n        .style(\"fill\", \"transparent\")\r\n        .style(\"stroke\", \"rgb(221, 221, 221)\");\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initView();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.initView();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let title = (\r\n      <div>\r\n        <p\r\n          style={{\r\n            fontSize: \"1.2em\",\r\n            fontWeight: \"bold\",\r\n            fill: \"#000\",\r\n            className: \"title\",\r\n            textAnchor: \"middle\",\r\n          }}\r\n        >\r\n          {this.props.title}\r\n        </p>\r\n        {this.props.layer_type !== \"grid gross loss rates\" && (\r\n          <p\r\n            style={{\r\n              fontSize: \"1em\",\r\n              fontWeight: \"bold\",\r\n              fill: \"#000\",\r\n              className: \"title\",\r\n              textAnchor: \"middle\",\r\n            }}\r\n          >\r\n            {\"US: \" +\r\n              this.formatNumber(this.props.us_data[0][this.props.field]) +\r\n              \"(\" +\r\n              this.props.unit +\r\n              \")\"}\r\n          </p>\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        {title}\r\n        <svg width={this.props.width} height={this.props.height}>\r\n          <g ref={this.background} />\r\n          <g ref={this.map} />\r\n          <g ref={this.labels} />\r\n        </svg>\r\n        <div\r\n          ref={this.tooltip}\r\n          style={{\r\n            opacity: 0,\r\n            maxWidth: 400,\r\n            maxHeight: 520,\r\n            padding: 5,\r\n            overflow: \"auto\",\r\n            backgroundColor: \"rgba(255,255,255,0.95)\",\r\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\r\n            borderRadius: \"4px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OtherLevelMap;\r\n","import React, { Component, createRef } from \"react\";\nimport OtherLevelMap from \"./OtherLevelMap\";\nimport * as d3 from \"d3\";\nimport * as d3_legend from \"d3-svg-legend\";\n\nclass OtherLevelMapLegend extends Component {\n  constructor(props) {\n    super(props);\n    this.legend = React.createRef();\n  }\n\n  formatLegendLabel(t) {\n    if (t >= 1000) {\n      let num = d3.format(\".2s\")(t);\n      let abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      return num;\n    } else {\n      return d3.format(\".3\")(t);\n    }\n  }\n  render() {\n    const mapfill = this.props.mapfill;\n    let fill_scale = d3.scaleThreshold().range(mapfill);\n    let domainArr = this.props.data.map((e) => e.value).sort((a, b) => a - b);\n    fill_scale.domain(\n      d3\n        .range(mapfill.length - 1)\n        .map((d) => d3.quantile(domainArr, (d + 1) / mapfill.length))\n    );\n\n    let legend = d3_legend\n      .legendColor()\n      .scale(fill_scale)\n      .shape(\"rect\")\n      .shapeWidth(90)\n      .shapeHeight(10)\n      .shapePadding(0)\n      .labelOffset(10)\n      .orient(\"horizontal\")\n      .scale(fill_scale)\n      .labelFormat(d3.format(\".3f\"))\n      .labelAlign(\"start\")\n      .labels((d) => {\n        if (d.i === 0) {\n          return 0;\n        } else {\n          let label_str = d.generatedLabels[d.i - 1].split(\" \");\n          return label_str[label_str.length - 1];\n        }\n      });\n\n    return (\n      <svg width={this.props.width} height={this.props.height}>\n        <g\n          ref={(node) =>\n            d3\n              .select(node)\n              .call(legend)\n              .selectAll(\"text\")\n              .text(this.formatLegendLabel)\n          }\n        ></g>\n      </svg>\n    );\n  }\n}\n\nexport default OtherLevelMapLegend;\n","import React, { Component } from \"react\";\nimport ToggleButtonGroup from \"react-bootstrap/ToggleButtonGroup\";\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\n\nimport * as d3 from \"d3\";\nclass OtherLevelBarchart extends Component {\n  constructor(props) {\n    super(props);\n    this.barchart = React.createRef();\n    this.axis_x = React.createRef();\n    this.axis_y = React.createRef();\n    this.axis_x_title = React.createRef();\n    this.tooltip = React.createRef();\n    this.state = {\n      sort_by: \"alphabet\",\n    };\n  }\n\n  formatXaxis(d) {\n    if (d >= 1000) {\n      let num = d3.format(\".2s\")(d);\n      let abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      let chars1 = num.slice(-3);\n      let chars2 = chars1.substring(0, 2);\n      if (chars2 === \".0\") {\n        num = num.slice(0, -3) + num.slice(-1);\n        return num;\n      }\n      return num;\n    } else if (d >= 1 && d < 10) {\n      return d3.format(\".2\")(d);\n    } else if (d < 1) {\n      return d3.format(\".3\")(d);\n    } else {\n      return d3.format(\".0f\")(d);\n    }\n  }\n\n  formatNumber(d) {\n    if (d < 1) {\n      return d3.format(\".3f\")(d);\n    } else if (d >= 1000000) {\n      return d3.format(\",.0f\")(d);\n    } else {\n      return isNaN(d) ? \"\" : d3.format(\",.2f\")(Math.floor(d * 100) / 100);\n    }\n  }\n\n  formatLabel(d) {\n    if (d >= 1000000) {\n      var num = d3.format(\".2s\")(d);\n      var abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      var chars1 = num.slice(-3);\n      var chars2 = chars1.substring(0, 2);\n      if (chars2 === \".0\") {\n        num = num.slice(0, -3) + num.slice(-1);\n        return num;\n      }\n      return num;\n    } else if (d >= 1 && d < 10) {\n      return d3.format(\".2\")(d);\n    } else if (d < 1) {\n      return d3.format(\".3\")(d);\n    } else {\n      return isNaN(d) ? \"\" : d3.format(\",.0f\")(d);\n    }\n  }\n\n  initView(by) {\n    // scale\n    let marginTop = 40,\n      marginBottom = 0,\n      marginRight = 60,\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\n    let barFillScale = d3.scaleThreshold().range(this.props.mapfill),\n      barXScale = d3\n        .scaleLinear()\n        .range([0, this.props.width - marginLeft - marginRight])\n        .domain(d3.extent(this.props.data, (e) => e.value)),\n      barYScale = d3\n        .scaleBand()\n        .range([0, this.props.height - marginTop - marginBottom])\n        .domain(this.props.data.map((d) => d.name))\n        .paddingInner(0.1)\n        .paddingOuter(0.2);\n\n    // update scale domain\n    let domainArr = this.props.data.map((e) => e.value).sort((a, b) => a - b);\n    barFillScale.domain(\n      d3\n        .range(this.props.mapfill.length - 1)\n        .map((d) => d3.quantile(domainArr, (d + 1) / this.props.mapfill.length))\n    );\n\n    // bars\n    d3.select(this.barchart.current).selectAll(\"g\").remove();\n    let bars = d3\n      .select(this.barchart.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\n      .append(\"g\")\n      .selectAll(\"g\")\n      .data(this.props.data)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", d=>\"bars mouseover_target barchart_mouseover_target\" + \" region_\" + d.id)\n      .attr(\"transform\", (d) => \"translate(0,\" + barYScale(d.name) + \")\");\n\n    bars\n      .append(\"rect\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"width\", (d) => barXScale(d.value))\n      .attr(\"height\", barYScale.bandwidth())\n      .style(\"fill\", (d) => barFillScale(d.value));\n\n    bars\n      .append(\"text\")\n      .attr(\"class\", \"labels\")\n      .attr(\"x\", (d) => barXScale(d.value))\n      .attr(\"y\", 0)\n      .attr(\"dx\", 5)\n      .attr(\"dy\", barYScale.bandwidth() / 2 + 5)\n      .text((d) => this.formatLabel(d.value))\n      .style(\"fill\", \"#000\")\n      .style(\"stroke\", \"none\");\n\n    // axis\n    d3.select(this.axis_x.current).selectAll(\"g\").remove();\n    d3.select(this.axis_x.current)\n      .attr(\"class\", \"axis_x\")\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\n      .call(d3.axisTop(barXScale).ticks(5).tickFormat(this.formatXaxis))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"rotate(-30)\");\n\n    d3.select(this.axis_x_title.current)\n      .attr(\n        \"transform\",\n        \"translate(\" +\n          (this.props.width - marginRight + 5) +\n          \",\" +\n          marginTop +\n          \")\"\n      )\n      .style(\"fill\", \"#000\")\n      .style(\"text-anchor\", \"start\")\n      .style(\"stroke\", \"none\")\n      .style(\"font-size\", \"0.75em\")\n      .text(this.props.unit);\n\n    d3.select(this.axis_y.current).selectAll(\"g\").remove();\n    d3.select(this.axis_y.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\n      .attr(\"class\", \"axis_y\")\n      .call(d3.axisLeft(barYScale))\n      .selectAll('.tick')\n      .attr('class', d=>'tick mouseover_target barchart_mouseover_target region_'+ this.props.data.filter(e=>e.name===d).map(e=>e.id)[0]);\n    \n    d3.selectAll('.barchart_mouseover_target')\n    .on('mouseover', d=>{\n      d3.select(this.tooltip.current)\n      .transition()\n      .duration(100)\n      .style(\"opacity\", 1);\n    })\n    .on('mousemove', d=>{\n      let html, id;\n      if (typeof(d)===\"object\") {\n        id = d.id;\n        html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.name + \"</b><br>is <b>\" + d.value + \" \" + d.unit + \"</b>.</span>\";\n      } else if (typeof(d)===\"string\") {\n        id = this.props.data.filter(e=>e.name===d).map(e=>e.id)[0];\n        html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d + \"</b><br>is <b>\" + this.props.data.filter(e=>e.name===d).map(e=>e.value)[0] + \" \" + this.props.data.filter(e=>e.name===d).map(e=>e.unit)[0] + \"</b>.</span>\";\n      }\n      \n      d3.select(this.tooltip.current)\n      .html(html)\n      .style(\"position\", \"absolute\")\n      .style(\"top\", d3.event.pageY - 30 + \"px\")\n      .style(\"left\", d3.event.pageX + 30 + \"px\")\n      .style(\"opacity\", 1);\n\n      d3.selectAll('.region_'+id+' rect').classed('selected', true);\n      d3.selectAll('.region_'+id+' text').classed('selected', true);\n      d3.selectAll('path.region_'+id).classed('selected', true);\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true);\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true);\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true);\n    })\n    .on('mouseout', d=>{\n      d3.select(this.tooltip.current)\n      .transition()\n      .duration(500)\n      .style(\"opacity\", 0);\n\n      d3.selectAll('.deemphasized').classed('deemphasized', false);\n      d3.selectAll('.selected').classed('selected', false);\n    });\n\n    this.updateView(by);\n  }\n\n  updateView(by) {\n    let marginTop = 40,\n      marginBottom = 0;\n    let barYScale = d3\n      .scaleBand()\n      .range([0, this.props.height - marginTop - marginBottom])\n      .domain(\n        this.props.data\n          .sort((a, b) =>\n            by === \"amount\"\n              ? d3.descending(a.value, b.value)\n              : d3.ascending(a.name, b.name)\n          )\n          .map((d) => d.name)\n      )\n      .paddingInner(0.1)\n      .paddingOuter(0.2);\n\n    d3.select(this.barchart.current)\n      .selectAll(\".bars\")\n      .transition()\n      .attr(\"transform\", (d) => \"translate(0,\" + barYScale(d.name) + \")\");\n\n    d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\n  }\n\n  componentDidMount() {\n    this.initView(this.state.sort_by);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.field !== prevProps.field) {\n      this.initView(this.state.sort_by);\n    } else {\n      if (this.state.sort_by !== prevState.sort_by) {\n        this.updateView(this.state.sort_by);\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <ToggleButtonGroup\n          type=\"radio\"\n          name=\"options\"\n          defaultValue={this.state.sort_by}\n          onChange={(val) => this.setState({ sort_by: val })}\n        >\n          <ToggleButton value={\"alphabet\"}>Sort Alphabetically</ToggleButton>\n          <ToggleButton value={\"amount\"}>Sort by Amount</ToggleButton>\n        </ToggleButtonGroup>\n        <svg width={this.props.width} height={this.props.height}>\n          <g className={\"axis\"}>\n            <g ref={this.axis_x}></g>\n            <text ref={this.axis_x_title}></text>\n            <g ref={this.axis_y}></g>\n          </g>\n\n          <g ref={this.barchart}></g>\n        </svg>\n        <div\n          ref={this.tooltip}\n          style={{\n            opacity: 0,\n            maxWidth: 400,\n            maxHeight: 520,\n            padding: 5,\n            overflow: \"auto\",\n            backgroundColor: \"rgba(255,255,255,0.95)\",\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\n            borderRadius: \"4px\",\n          }}\n        ></div>\n      </div>\n    );\n  }\n}\n\nexport default OtherLevelBarchart;\n","import React, { Component } from \"react\";\nimport Table from \"react-bootstrap/Table\";\n\nclass UpdatedTable extends Component {\n  render() {\n    return (\n      <div>\n        {this.props.title.startsWith(\"Resource Mix\") ? (\n          <Table striped bordered hover responsive=\"sm\">\n            <thead>\n              <tr>\n                <th>Generation by Fuel Type</th>\n                {this.props.region !== \"US\" && (\n                  <th>\n                    {this.props.region}\n                    {\" Resource Mix (%)\"}\n                  </th>\n                )}\n                <th>US Resource Mix (%)</th>\n              </tr>\n            </thead>\n            {this.props.title === \"Resource Mix by all fuel types\" && (\n              <tbody>\n                <tr className={this.props.type === \"COAL\" ? \"selected\" : \"\"}>\n                  <td>Coal</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.COAL}</td>\n                  )}\n                  <td>{this.props.table_info.US_COAL}</td>\n                </tr>\n                <tr className={this.props.type === \"OIL\" ? \"selected\" : \"\"}>\n                  <td>Oil</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.OIL}</td>\n                  )}\n                  <td>{this.props.table_info.US_OIL}</td>\n                </tr>\n                <tr className={this.props.type === \"GAS\" ? \"selected\" : \"\"}>\n                  <td>Gas</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.GAS}</td>\n                  )}\n                  <td>{this.props.table_info.US_GAS}</td>\n                </tr>\n                <tr className={this.props.type === \"NUCLEAR\" ? \"selected\" : \"\"}>\n                  <td>Nuclear</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.NUCLEAR}</td>\n                  )}\n                  <td>{this.props.table_info.US_NUCLEAR}</td>\n                </tr>\n                <tr className={this.props.type === \"HYDRO\" ? \"selected\" : \"\"}>\n                  <td>Hydro</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.HYDRO}</td>\n                  )}\n                  <td>{this.props.table_info.US_HYDRO}</td>\n                </tr>\n                <tr className={this.props.type === \"BIOMASS\" ? \"selected\" : \"\"}>\n                  <td>Biomass</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.BIOMASS}</td>\n                  )}\n                  <td>{this.props.table_info.US_BIOMASS}</td>\n                </tr>\n                <tr className={this.props.type === \"WIND\" ? \"selected\" : \"\"}>\n                  <td>Wind</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.WIND}</td>\n                  )}\n                  <td>{this.props.table_info.US_WIND}</td>\n                </tr>\n                <tr className={this.props.type === \"SOLAR\" ? \"selected\" : \"\"}>\n                  <td>Solar</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.SOLAR}</td>\n                  )}\n                  <td>{this.props.table_info.US_SOLAR}</td>\n                </tr>\n                <tr\n                  className={this.props.type === \"GEOTHERMAL\" ? \"selected\" : \"\"}\n                >\n                  <td>Geothermal</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.GEOTHERMAL}</td>\n                  )}\n                  <td>{this.props.table_info.US_GEOTHERMAL}</td>\n                </tr>\n                <tr className={this.props.type === \"OFSL\" ? \"selected\" : \"\"}>\n                  <td>Other Fossil</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.OFSL}</td>\n                  )}\n                  <td>{this.props.table_info.US_OFSL}</td>\n                </tr>\n                <tr className={this.props.type === \"OTHF\" ? \"selected\" : \"\"}>\n                  <td>Other Unknown/Purchased Fuel</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.OTHF}</td>\n                  )}\n                  <td>{this.props.table_info.US_OTHF}</td>\n                </tr>\n              </tbody>\n            )}\n            {this.props.title ===\n              \"Resource Mix by renewable vs. non-renewable fuels\" && (\n              <tbody>\n                <tr className={this.props.type === \"HYDRO\" ? \"selected\" : \"\"}>\n                  <td>Hydro</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.HYDRO}</td>\n                  )}\n                  <td>{this.props.table_info.US_HYDRO}</td>\n                </tr>\n                <tr className={this.props.type === \"TNPR\" ? \"selected\" : \"\"}>\n                  <td>Total Nonrenewables</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.TNPR}</td>\n                  )}\n                  <td>{this.props.table_info.US_TNPR}</td>\n                </tr>\n                <tr className={this.props.type === \"THPR\" ? \"selected\" : \"\"}>\n                  <td>Total Nonhydro Renewables</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.THPR}</td>\n                  )}\n                  <td>{this.props.table_info.US_THPR}</td>\n                </tr>\n              </tbody>\n            )}\n            {this.props.title ===\n              \"Resource Mix by combustible vs. non-combustible fuels\" && (\n              <tbody>\n                <tr className={this.props.type === \"CYPR\" ? \"selected\" : \"\"}>\n                  <td>Total Combustion</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.CYPR}</td>\n                  )}\n                  <td>{this.props.table_info.US_CYPR}</td>\n                </tr>\n                <tr className={this.props.type === \"CNPR\" ? \"selected\" : \"\"}>\n                  <td>Total Noncumbustion</td>\n                  {this.props.region !== \"US\" && (\n                    <td>{this.props.table_info.CNPR}</td>\n                  )}\n                  <td>{this.props.table_info.US_CNPR}</td>\n                </tr>\n              </tbody>\n            )}\n          </Table>\n        ) : (\n          <Table striped bordered hover responsive=\"sm\">\n            <thead>\n              <tr>\n                <th>Plant Name</th>\n                <th>{this.props.table_info.PNAME}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>Facility ID</td>\n                <td>{this.props.table_info.ORISPL}</td>\n              </tr>\n              <tr>\n                <td>Plant State</td>\n                <td>{this.props.table_info.PSTATABB}</td>\n              </tr>\n              <tr>\n                <td>eGRID Subregion</td>\n                <td><a href=\"https://www.epa.gov/sites/production/files/styles/large/public/2020-03/2018_egrid_subregions.png\">{this.props.table_info.SUBRGN}</a></td>\n              </tr>\n              <tr>\n                <td>Plant Primary Fuel</td>\n                <td>{this.props.table_info.PLPRMFL}</td>\n              </tr>\n              <tr>\n                <td>Nameplate Capacity (MW)</td>\n                <td>{this.props.table_info.NAMEPCAP}</td>\n              </tr>\n              <tr>\n                <td>Plant Capacity Factor</td>\n                <td>{this.props.table_info.CAPFAC}</td>\n              </tr>\n              <tr>\n                <td>Generation (MWh)</td>\n                <td>{this.props.table_info.PLNGENAN}</td>\n              </tr>\n              <tr>\n                <td>Heat Input (MMBtu)</td>\n                <td>{this.props.table_info.PLHTIANT}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLNOXAN}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLNOXRTA}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Ozone Season Emissions (tons)</td>\n                <td>{this.props.table_info.PLNOXOZ}</td>\n              </tr>\n              <tr>\n                <td>NOₓ Ozone Season Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLNOXRTO}</td>\n              </tr>\n              <tr>\n                <td>SO₂ Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLSO2AN}</td>\n              </tr>\n              <tr>\n                <td>SO₂ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLSO2RTA}</td>\n              </tr>\n              <tr>\n                <td>CO₂ Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLCO2AN}</td>\n              </tr>\n              <tr>\n                <td>CO₂ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLCO2RTA}</td>\n              </tr>\n              <tr>\n                <td>CH₄ Annual Emissions (lbs)</td>\n                <td>{this.props.table_info.PLCH4AN}</td>\n              </tr>\n              <tr>\n                <td>CH₄ Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLCH4RTA}</td>\n              </tr>\n              <tr>\n                <td>N₂O Annual Emissions (lbs)</td>\n                <td>{this.props.table_info.PLN2OAN}</td>\n              </tr>\n              <tr>\n                <td>N₂O Annual Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLN2ORTA}</td>\n              </tr>\n              <tr>\n                <td>CO₂ equivalent Annual Emissions (tons)</td>\n                <td>{this.props.table_info.PLCO2EQA}</td>\n              </tr>\n              <tr>\n                <td>CO₂ equivalent Output Emission Rate (lb/MWh)</td>\n                <td>{this.props.table_info.PLC2ERTA}</td>\n              </tr>\n            </tbody>\n          </Table>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default UpdatedTable;\n","import React, { Component } from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport mapboxgl from \"mapbox-gl\";\nimport * as d3 from \"d3\";\n\nimport UpdatedTable from \"./Table\";\nimport \"./Visualization.css\";\n\nmapboxgl.accessToken =\n  \"pk.eyJ1Ijoia2F0aWVsb25nIiwiYSI6ImNpenpudmY1dzAxZmYzM2tmY2tobDN1MXoifQ._aoE2Zj7vx3dUlZw-gBCrg\";\n\nclass PlantLevelMapZoom extends Component {\n  constructor(props) {\n    super(props);\n    this.fuels = React.createRef();\n    this.legend = React.createRef();\n    this.state = {\n      selected_fuel: [],\n    };\n\n    this.min_zoom_out = 1;\n    this.max_zoom_in = 20;\n\n    this.field_factor_divided_by = 8;\n    this.max_radius = 72;\n    this.max_radius_before_remove = 24;\n    this.zoom_factor = this.max_radius / this.field_factor_divided_by;\n    this.legend_len = 6;\n    this.legend_percentile = [0.1, 0.5, 0.8, 0.95, 0.98, 1];\n\n    this.plant_outlier = {\n      PLNOXRTA: 2000,\n      PLNOXRTO: 1000,\n      PLSO2RTA: 800,\n      PLCO2RTA: 10000,\n      PLCH4RTA: 20,\n      PLN2ORTA: 3,\n      PLC2ERTA: 10000,\n      PLNOXRA: 7,\n      PLNOXRO: 7,\n      PLSO2RA: 6,\n      PLCO2RA: 300,\n      PLNGENAN: 20000000,\n      PLNGENOZ: 10000000,\n      PLGENACL: undefined,\n      PLGENAOL: undefined,\n      PLGENAGS: 13000000,\n      PLGENANC: 27000000,\n      PLGENAHY: 16000000,\n      PLGENABM: undefined,\n      PLGENAWI: 2000000,\n      PLGENASO: 1000000,\n      PLGENAGT: 1000000,\n      PLGENAOF: 1000000,\n      PLGENAOP: undefined,\n      PLGENATN: 20000000,\n      PLGENATR: 20000000,\n      PLGENATH: 2000000,\n      PLGENACY: 20000000,\n      PLGENACN: 20000000,\n      PLHTIAN: 165000000,\n      PLHTIOZ: 75000000,\n      PLNOXAN: undefined,\n      PLNOXOZ: undefined,\n      PLSO2AN: 30000,\n      PLCO2AN: 17000000,\n      PLCH4AN: undefined,\n      PLN2OAN: undefined,\n      PLCO2EQA: 17000000,\n    };\n    this.filter_text = \"Filter by Primary Fuel\";\n    this.filter_reset_text = \"Show All Fuels\";\n  }\n\n  formatLegend(d) {\n    if (d >= 1000) {\n      let num = d3.format(\".2s\")(d);\n      let abbr = num.slice(-1);\n      if (abbr === \"G\") {\n        num = num.substring(0, num.length - 1) + \"B\";\n      }\n      let chars1 = num.slice(-3);\n      let chars2 = chars1.substring(0, 2);\n      if (chars2 === \".0\") {\n        num = num.slice(0, -3) + num.slice(-1);\n        return num;\n      }\n      return num;\n    } else if (d >= 1 && d < 10) {\n      return d3.format(\".2\")(d);\n    } else if (d < 1) {\n      return d3.format(\".3\")(d);\n    } else {\n      return d3.format(\".0f\")(d);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.field !== prevProps.field) {\n      // filter\n      let w = d3.select(this.fuels.current).node().clientWidth,\n        h = d3.select(this.fuels.current).node().clientHeight;\n      let nbox = this.props.fuels.length + 1;\n      let boxlen = w / nbox;\n\n      d3.select(this.fuels.current).selectAll(\"div\").remove();\n      let fuels = d3\n        .select(this.fuels.current)\n        .append(\"div\")\n        .attr(\"class\", \"fuels\")\n        .selectAll(\"div\")\n        .data(this.props.fuels)\n        .enter()\n        .append(\"div\")\n        .style(\"display\", \"inline-block\")\n        .attr(\"class\", \"fuel\");\n\n      let fuels_svg = fuels\n        .append(\"svg\")\n        .attr(\"width\", boxlen)\n        .attr(\"height\", h);\n\n      fuels_svg\n        .append(\"image\")\n        .attr(\"xlink:href\", (d) => this.props.fuel_icon_lookup[d])\n        .attr(\"x\", boxlen / 2 - Math.min(boxlen, h * 0.5) / 2)\n        .attr(\"y\", 0)\n        .attr(\"width\", Math.min(boxlen, h * 0.5))\n        .attr(\"height\", Math.min(boxlen, h * 0.5));\n\n      fuels_svg\n        .filter((d) => this.props.fuel_icon_lookup[d] === \"\")\n        .append(\"circle\")\n        .attr(\"r\", Math.min(boxlen, h * 0.5) / 4)\n        .attr(\"fill\", (d) => this.props.fuel_color_lookup[d])\n        .attr(\"cx\", boxlen / 2)\n        .attr(\"cy\", Math.min(boxlen, h * 0.5) / 2);\n\n      fuels_svg\n        .append(\"text\")\n        .attr(\"x\", boxlen / 2)\n        .attr(\"y\", Math.min(boxlen, h * 0.5) * 1.5)\n        .attr(\"dx\", 0)\n        .attr(\"dy\", 0)\n        .text((d) => this.props.fuel_label_lookup[d])\n        .style(\"text-anchor\", \"middle\")\n        .call(this.props.wrap_long_labels, boxlen);\n\n      d3.select(\".fuels\")\n        .insert(\"div\", \".fuel\")\n        .style(\"display\", \"inline-block\")\n        .attr(\"class\", \"reset\")\n        .append(\"svg\")\n        .attr(\"width\", boxlen)\n        .attr(\"height\", h)\n        .append(\"text\")\n        .attr(\"x\", 0)\n        .attr(\"y\", Math.min(boxlen, h * 0.5) / 2)\n        .attr(\"dx\", 0)\n        .attr(\"dy\", 0)\n        .text(this.filter_text)\n        .style(\"text-anchor\", \"start\")\n        .style(\"font-weight\", \"bold\")\n        .style(\"font-size\", \"1.2em\")\n        .call(this.props.wrap_long_labels, boxlen);\n\n      d3.selectAll(\".fuel\").on(\"click\", (d) => {\n        let n = d3\n          .select(this.fuels.current)\n          .selectAll(\".fuel\")\n          .filter((e) => e === d);\n        if (this.map.loaded()) {\n          if (n.classed(\"selected\")) {\n            this.setState({\n              selected_fuel: this.state.selected_fuel.filter((e) => e !== d),\n            });\n          } else {\n            this.setState({\n              selected_fuel: this.state.selected_fuel.concat(d),\n            });\n          }\n        }\n      });\n\n      if (this.map.loaded()) {\n        const data = {\n          type: \"FeatureCollection\",\n          features: this.props.json_data.features\n            .filter((d) => d.properties[this.props.field] > 0)\n            .map((d) => {\n              if (\n                d.properties[this.props.field] >=\n                this.plant_outlier[this.props.field]\n              ) {\n                d.properties[this.props.field] = this.plant_outlier[\n                  this.props.field\n                ];\n              }\n              return d;\n            }),\n        };\n        this.map.getSource(\"plants\").setData(data);\n        this.setRadius(data.features);\n\n        d3.select(this.fuels.current)\n          .select(\".reset\")\n          .classed(\"reset_clickable\", false);\n        d3.select(this.fuels.current)\n          .select(\".reset text\")\n          .text(this.filter_text)\n          .call(\n            this.props.wrap_long_labels,\n            d3.select(this.fuels.current).node().clientWidth /\n              (this.props.fuels.length + 1)\n          );\n        d3.selectAll(\".selected\").classed(\"selected\", false);\n\n        this.map.on(\"zoom\", \"plants\", () => {\n          let features = data.features;\n          let factor =\n            d3.max(features.map((d) => d.properties[this.props.field])) /\n            this.field_factor_divided_by;\n          this.updateLegend(features, factor);\n        });\n      }\n    } else {\n      if (\n        JSON.stringify(this.state.selected_fuel) !==\n          JSON.stringify(prevState.selected_fuel) &&\n        this.state.selected_fuel.length !== 0\n      ) {\n        if (this.map.loaded()) {\n          const data = {\n            type: \"FeatureCollection\",\n            features: this.props.json_data.features\n              .filter((d) => d.properties[this.props.field] > 0)\n              .filter(\n                (d) =>\n                  this.state.selected_fuel.indexOf(d.properties.FUEL) !== -1\n              )\n              .map((d) => {\n                if (\n                  d.properties[this.props.field] >=\n                  this.plant_outlier[this.props.field]\n                ) {\n                  d.properties[this.props.field] = this.plant_outlier[\n                    this.props.field\n                  ];\n                }\n                return d;\n              }),\n          };\n          this.map.getSource(\"plants\").setData(data);\n          this.setRadius(data.features);\n          d3.selectAll(\".selected\").classed(\"selected\", false);\n          d3.select(this.fuels.current)\n            .select(\".reset\")\n            .classed(\"reset_clickable\", true)\n            .on(\"click\", (d) => {\n              this.setState({ selected_fuel: [] });\n            });\n\n          d3.select(this.fuels.current)\n            .select(\".reset text\")\n            .text(this.filter_reset_text)\n            .call(\n              this.props.wrap_long_labels,\n              d3.select(this.fuels.current).node().clientWidth /\n                (this.props.fuels.length + 1)\n            );\n\n          d3.select(this.fuels.current)\n            .selectAll(\".fuel\")\n            .filter((d) => this.state.selected_fuel.indexOf(d) !== -1)\n            .classed(\"selected\", true);\n\n          this.map.on(\"zoom\", \"plants\", () => {\n            let features = data.features;\n            let factor =\n              d3.max(features.map((d) => d.properties[this.props.field])) /\n              this.field_factor_divided_by;\n            this.updateLegend(features, factor);\n          });\n        }\n      } else if (\n        JSON.stringify(this.state.selected_fuel) !==\n          JSON.stringify(prevState.selected_fuel) &&\n        this.state.selected_fuel.length === 0\n      ) {\n        if (this.map.loaded()) {\n          const data = {\n            type: \"FeatureCollection\",\n            features: this.props.json_data.features\n              .filter((d) => d.properties[this.props.field] > 0)\n              .map((d) => {\n                if (\n                  d.properties[this.props.field] >=\n                  this.plant_outlier[this.props.field]\n                ) {\n                  d.properties[this.props.field] = this.plant_outlier[\n                    this.props.field\n                  ];\n                }\n                return d;\n              }),\n          };\n          this.map.getSource(\"plants\").setData(data);\n          this.setRadius(data.features);\n\n          d3.select(this.fuels.current)\n            .select(\".reset\")\n            .classed(\"reset_clickable\", false);\n          d3.select(this.fuels.current)\n            .select(\".reset text\")\n            .text(this.filter_text)\n            .call(\n              this.props.wrap_long_labels,\n              d3.select(this.fuels.current).node().clientWidth /\n                (this.props.fuels.length + 1)\n            );\n          d3.selectAll(\".selected\").classed(\"selected\", false);\n\n          this.map.on(\"zoom\", \"plants\", () => {\n            let features = data.features;\n            let factor =\n              d3.max(features.map((d) => d.properties[this.props.field])) /\n              this.field_factor_divided_by;\n            this.updateLegend(features, factor);\n          });\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    let init_zoom = this.props.init_zoom,\n      init_center = this.props.init_center;\n\n    // set up map\n    this.map = new mapboxgl.Map({\n      container: this.container,\n      style: \"mapbox://styles/mapbox/light-v10\",\n      center: init_center,\n      zoom: init_zoom,\n    });\n    this.map.setMaxZoom(this.max_zoom_in);\n    this.map.setMinZoom(this.min_zoom_out);\n    this.map.addControl(new mapboxgl.NavigationControl());\n    this.map.addControl(new mapboxgl.FullscreenControl());\n\n    class ResetControl {\n      onAdd(map) {\n        this._map = map;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl\";\n        this._container.innerHTML =\n          \"<span class='mapboxgl-ctrl-icon' aria-haspopup='true' title='zoom to national view'><img src='reset_view_icon.png' alt='reset_view' width=29 height=29 style='border-radius: 4px'></img></span>\";\n        this._container.style.borderRadius = \"4px\";\n        this._container.style.boxShadow = \"0 0 0 2px rgba(0,0,0,.1)\";\n        this._container.style.cursor = \"pointer\";\n        this._container.onclick = function () {\n          map.flyTo({ center: init_center, zoom: init_zoom });\n        };\n        return this._container;\n      }\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map = undefined;\n      }\n    }\n    this.map.addControl(new ResetControl());\n\n    class LayerControl {\n      onAdd(map) {\n        this._map = map;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl\";\n        this._container.innerHTML =\n          \"<span class='mapboxgl-ctrl-group' style='padding: 10px;' aria-haspopup='true' title='change layers'><input id='light-v10' type='radio' name='rtoggle' value='light' checked='checked'/><label for='light'>light</label><input id='satellite-v9' type='radio' name='rtoggle' value='satellite' /><label for='satellite'>satellite</label></span>\";\n\n        d3.select(this._container)\n          .selectAll(\"input\")\n          .nodes()\n          .map((n) => {\n            n.onclick = function () {\n              if (map.loaded()) {\n                // map.setStyle(\"mapbox://styles/mapbox/\" + n.id);\n              }\n            };\n          });\n        return this._container;\n      }\n\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map = undefined;\n      }\n    }\n    this.map.addControl(new LayerControl());\n\n    class Legend {\n      onAdd(map) {\n        this._map = map;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl\";\n        this._container.innerHTML =\n          \"<div class='mapboxgl-ctrl-group' aria-haspopup='true'><div><span id='legend_title'></span></div><div id='legend'></div></div>\";\n\n        return this._container;\n      }\n\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map = undefined;\n      }\n    }\n\n    this.map.addControl(new Legend(), \"bottom-right\");\n\n    this.map.on(\"load\", () => {\n      const data = {\n        type: \"FeatureCollection\",\n        features: this.props.json_data.features\n          .filter((d) => d.properties[this.props.field] > 0)\n          .map((d) => {\n            if (\n              d.properties[this.props.field] >=\n              this.plant_outlier[this.props.field]\n            ) {\n              d.properties[this.props.field] = this.plant_outlier[\n                this.props.field\n              ];\n            }\n            return d;\n          }),\n      };\n\n      this.map.addSource(\"plants\", {\n        type: \"geojson\",\n        data: data,\n      });\n\n      this.map.addLayer({\n        id: \"plants\",\n        type: \"circle\",\n        source: \"plants\",\n        paint: {\n          \"circle-stroke-width\": 1,\n          \"circle-stroke-color\": [\n            \"case\",\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\n            \"#000\",\n            [\n              \"match\",\n              [\"get\", \"FUEL\"],\n              \"COAL\",\n              this.props.fuel_color_lookup.COAL,\n              \"OIL\",\n              this.props.fuel_color_lookup.OIL,\n              \"GAS\",\n              this.props.fuel_color_lookup.GAS,\n              \"NUCLEAR\",\n              this.props.fuel_color_lookup.NUCLEAR,\n              \"HYDRO\",\n              this.props.fuel_color_lookup.HYDRO,\n              \"BIOMASS\",\n              this.props.fuel_color_lookup.BIOMASS,\n              \"WIND\",\n              this.props.fuel_color_lookup.WIND,\n              \"SOLAR\",\n              this.props.fuel_color_lookup.SOLAR,\n              \"GEOTHERMAL\",\n              this.props.fuel_color_lookup.GEOTHERMAL,\n              \"OFSL\",\n              this.props.fuel_color_lookup.OFSL,\n              \"OTHF\",\n              this.props.fuel_color_lookup.OTHF,\n              \"#000\",\n            ],\n          ],\n          \"circle-opacity\": 0.8,\n          \"circle-color\": [\n            \"match\",\n            [\"get\", \"FUEL\"],\n            \"COAL\",\n            this.props.fuel_color_lookup.COAL,\n            \"OIL\",\n            this.props.fuel_color_lookup.OIL,\n            \"GAS\",\n            this.props.fuel_color_lookup.GAS,\n            \"NUCLEAR\",\n            this.props.fuel_color_lookup.NUCLEAR,\n            \"HYDRO\",\n            this.props.fuel_color_lookup.HYDRO,\n            \"BIOMASS\",\n            this.props.fuel_color_lookup.BIOMASS,\n            \"WIND\",\n            this.props.fuel_color_lookup.WIND,\n            \"SOLAR\",\n            this.props.fuel_color_lookup.SOLAR,\n            \"GEOTHERMAL\",\n            this.props.fuel_color_lookup.GEOTHERMAL,\n            \"OFSL\",\n            this.props.fuel_color_lookup.OFSL,\n            \"OTHF\",\n            this.props.fuel_color_lookup.OTHF,\n            \"#000\",\n          ],\n        },\n      });\n\n      this.setRadius(data.features);\n\n      // interaction: mousemove, mouseleave, click\n      let show_tooltip = false,\n        hoveredPlantId = null,\n        tooltip = new mapboxgl.Popup({\n          closeButton: false,\n          closeOnClick: false,\n          maxWidth: d3.select(this.fuels.current).node().clientWidth * 0.7,\n        }).on(\"close\", () => {\n          tooltip.options.closeButton = false;\n          tooltip.options.anchor = \"bottom\";\n          show_tooltip = false;\n        });\n\n      this.map.on(\"mousemove\", \"plants\", (d) => {\n        if (!show_tooltip) {\n          if (d.features.length > 0) {\n            if (hoveredPlantId) {\n              this.map.setFeatureState(\n                { source: \"plants\", id: hoveredPlantId },\n                { hover: false }\n              );\n            }\n            hoveredPlantId = d.features[0].id;\n            this.map.setFeatureState(\n              { source: \"plants\", id: hoveredPlantId },\n              { hover: true }\n            );\n          }\n\n          this.map.getCanvas().style.cursor = \"pointer\";\n          tooltip\n            .setLngLat(d.features[0].geometry.coordinates.slice())\n            .setText(d.features[0].properties.name)\n            .addTo(this.map);\n        }\n      });\n\n      this.map.on(\"mouseleave\", \"plants\", () => {\n        if (!show_tooltip) {\n          this.map.getCanvas().style.cursor = \"\";\n          tooltip.remove();\n          if (hoveredPlantId) {\n            this.map.setFeatureState(\n              { source: \"plants\", id: hoveredPlantId },\n              { hover: false }\n            );\n          }\n          hoveredPlantId = null;\n        }\n      });\n\n      this.map.on(\"click\", \"plants\", (d) => {\n        if (\n          show_tooltip &&\n          d.features[0].geometry.coordinates.slice()[0] ===\n            tooltip.getLngLat().lng &&\n          d.features[0].geometry.coordinates.slice()[1] ===\n            tooltip.getLngLat().lat\n        ) {\n          tooltip.options.closeButton = false;\n          tooltip.options.anchor = \"bottom\";\n          show_tooltip = false;\n        } else {\n          if (d.features.length > 0) {\n            if (hoveredPlantId) {\n              this.map.setFeatureState(\n                { source: \"plants\", id: hoveredPlantId },\n                { hover: false }\n              );\n            }\n            hoveredPlantId = d.features[0].id;\n            this.map.setFeatureState(\n              { source: \"plants\", id: hoveredPlantId },\n              { hover: true }\n            );\n          }\n          let table_info = {};\n          Object.keys(d.features[0].properties).forEach((e) => {\n            table_info[e] = d.features[0].properties[e];\n          });\n          let description = renderToString(\n            <UpdatedTable title={this.props.title} table_info={table_info} />\n          );\n          tooltip.options.closeButton = true;\n          tooltip.options.anchor = \"left\";\n          tooltip\n            .setLngLat(d.features[0].geometry.coordinates.slice())\n            .setHTML(description)\n            .addTo(this.map);\n          show_tooltip = true;\n        }\n      });\n\n      this.map.on(\"zoom\", \"plants\", () => {\n        let features = data.features;\n        let factor =\n          d3.max(features.map((d) => d.properties[this.props.field])) /\n          this.field_factor_divided_by;\n        this.updateLegend(features, factor);\n      });\n    });\n  }\n\n  updateLegend(features, factor) {\n    let field_values, radius_values, scale;\n\n    // set up scale\n    field_values = features\n      .map((d) => d.properties[this.props.field])\n      .sort((a, b) => a - b);\n    radius_values = field_values\n      .map((d) =>\n        d3\n          .scaleLinear()\n          .domain([this.min_zoom_out, this.max_zoom_in])\n          .range([d / factor, (d / factor) * this.zoom_factor])(\n          this.map.getZoom()\n        )\n      )\n      .sort((a, b) => a - b);\n    scale = d3\n      .scaleLinear()\n      .domain(d3.extent(field_values))\n      .range(d3.extent(radius_values));\n\n    // draw legend\n    let w = d3.select(\"#legend\").node().clientWidth,\n      h = d3.select(\"#legend\").node().clientHeight;\n    let nbox = this.legend_len;\n    let boxlen = w / nbox;\n\n    d3.select(\"#legend\").selectAll(\"svg\").remove();\n    d3.select(\"#legend_title\").html(this.props.title);\n\n    let legend_values =\n      field_values.length > 1\n        ? this.legend_percentile.map((d) => d3.quantile(field_values, d))\n        : field_values;\n        \n    legend_values = legend_values.filter(d=>scale(d)<=this.max_radius_before_remove);\n    let legend_cells = d3\n      .select(\"#legend\")\n      .append(\"svg\")\n      .attr(\"width\", w)\n      .attr(\"height\", h)\n      .selectAll(\"g\")\n      .data(legend_values)\n      .enter()\n      .append(\"g\")\n      .attr(\"transform\", (d, i) => \"translate(\" + i * boxlen + \",\" + 5 + \")\");\n\n    legend_cells\n      .append(\"circle\")\n      .attr(\"r\", (d) => scale(d))\n      .attr(\"cx\", boxlen / 2)\n      .attr(\"cy\", Math.min(boxlen, h * 0.5) / 2);\n\n    legend_cells\n      .append(\"text\")\n      .attr(\"x\", boxlen / 2)\n      .attr(\n        \"y\",\n        Math.min(boxlen, h * 0.5) / 2 +\n          scale(legend_values[legend_values.length - 1]) +\n          10\n      )\n      .attr(\"dx\", 0)\n      .attr(\"dy\", 0)\n      .text((d) => this.formatLegend(d))\n      .style(\"text-anchor\", \"middle\");\n\n    \n  }\n\n  setRadius(features) {\n    let factor =\n      d3.max(features.map((d) => d.properties[this.props.field])) /\n      this.field_factor_divided_by;\n\n    this.map.setPaintProperty(\"plants\", \"circle-radius\", [\n      \"interpolate\",\n      [\"linear\"],\n      [\"zoom\"],\n      this.min_zoom_out,\n      [\"/\", [\"get\", this.props.field], factor],\n      this.max_zoom_in,\n      [\"/\", [\"get\", this.props.field], factor / this.zoom_factor],\n    ]);\n\n    this.updateLegend(features, factor);\n  }\n\n  render() {\n    let title = (\n      <p\n        style={{\n          fontSize: \"1.2em\",\n          fontWeight: \"bold\",\n          fill: \"#000\",\n          className: \"title\",\n          textAnchor: \"middle\",\n        }}\n      >\n        {this.props.title}\n      </p>\n    );\n\n    return (\n      <div>\n        {title}\n        <div\n          style={{ width: \"90%\", height: 80, margin: \"0 auto\" }}\n          ref={this.fuels}\n        ></div>\n        <div\n          ref={(node) => (this.container = node)}\n          className=\"mapbox-container\"\n        />\n        {/* <div ref={this.legend}></div> */}\n      </div>\n    );\n  }\n}\n\nexport default PlantLevelMapZoom;\n","import React, { Component } from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport * as d3 from \"d3\";\nimport * as _ from \"underscore\";\nimport * as d3_composite from \"d3-composite-projections\";\n\nimport UpdatedTable from \"./Table\";\n\nclass ResourceMixChart extends Component {\n  constructor(props) {\n    super(props);\n    this.wrapper = React.createRef();\n    this.fuels = React.createRef();\n    this.barchart = React.createRef();\n    this.barchart_wrapper = React.createRef();\n    this.axis_y = React.createRef();\n    this.micromap = React.createRef();\n    this.tooltip = React.createRef();\n    this.state = {\n      selected_fuel: null,\n      show_tooltip: false\n    };\n    this.sort_text = \"Click to rearrange\";\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.field !== prevProps.field) {\n      this.initView();\n    } else {\n      if (\n        this.state.selected_fuel !== prevState.selected_fuel &&\n        this.state.selected_fuel !== null\n      ) {\n        d3.selectAll(\".selected\").classed(\"selected\", false);\n        d3.select(this.fuels.current)\n          .select(\".reset\")\n          .classed(\"reset_clickable\", true)\n          .on(\"click\", () => {\n            this.initView();\n          });\n        d3.select(this.fuels.current)\n          .selectAll(\".fuel\")\n          .filter((e) => e === this.state.selected_fuel)\n          .classed(\"selected\", true);\n\n        this.updateView(this.state.selected_fuel);\n      } else if (\n        this.state.selected_fuel !== prevState.selected_fuel &&\n        this.state.selected_fuel === null\n      ) {\n        d3.selectAll(\".selected\").classed(\"selected\", false);\n        d3.select(this.fuels.current)\n          .select(\".reset\")\n          .classed(\"reset_clickable\", false);\n\n        this.initView();\n      }\n    }\n  }\n\n  initView() {\n    this.setState({ selected_fuel: null });\n    let marginRight = 0,\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\n    let w = d3.select(this.barchart_wrapper.current).node().clientWidth,\n      h = d3.select(this.barchart_wrapper.current).node().clientHeight;\n\n    let w_legend = d3.select(this.fuels.current).node().clientWidth,\n      h_legend = d3.select(this.fuels.current).node().clientHeight;\n    let nbox = Object.keys(this.props.fuel_name_lookup).length + 1;\n    let boxlen = w_legend / nbox;\n\n    let fuel_names = this.props.fuels,\n      fuel_colors = Object.values(this.props.fuel_name_lookup).map(\n        (d) => this.props.fuel_color_lookup[d]\n      );\n    let barFillScale = d3.scaleOrdinal().domain(fuel_names).range(fuel_colors);\n\n    let data = [];\n    _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\n      let cumsum = 0;\n      fuel_names.forEach((f) => {\n        data.push({\n          name: d.name,\n          id: d.id,\n          unit: this.props.unit,\n          type: this.props.fuel_name_lookup[f],\n          value: d[f],\n          cumsum: cumsum,\n        });\n        cumsum = cumsum + d[f];\n      });\n    });\n    let name = _.uniq(data.map((d) => d.name));\n\n    let barXScale = d3\n      .scaleLinear()\n      .domain([0, 100])\n      .range([0, w - marginLeft - marginRight]);\n    let barYScale = d3\n      .scaleBand()\n      .domain(name)\n      .range([0, h])\n      .paddingInner(0.1)\n      .paddingOuter(0.2);\n\n    // micromap\n    d3.select(this.micromap.current).selectAll(\"path\").remove();\n    let w_micro = d3.select(this.micromap.current).node().clientWidth,\n      h_micro = d3.select(this.micromap.current).node().clientHeight;\n    const projection = d3_composite\n      .geoAlbersUsaTerritories()\n      .scale(h_micro * 2)\n      .translate([w_micro / 2, h_micro / 2]);\n    const path = d3.geoPath().projection(projection);\n    d3.select(this.micromap.current)\n      .selectAll(\"path\")\n      .data(this.props.layer.features)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", path)\n      .attr(\"class\", \"paths\")\n      .style(\"fill\", \"transparent\")\n      .style(\"stroke\", \"#000\")\n      .style(\"stroke-width\", 0.5);\n\n    // barchart\n    d3.select(this.barchart.current).selectAll(\"g\").remove();\n    d3.select(this.barchart.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",0)\")\n      .append(\"g\")\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"class\", (d) => \"resource_mix_bars bars_\" + d.id + \"_\" + d.type)\n      .attr(\"x\", (d) => barXScale(d.cumsum))\n      .attr(\"y\", (d) => barYScale(d.name))\n      .attr(\"rx\", 4)\n      .attr(\"ry\", 4)\n      .attr(\"width\", (d) => barXScale(d.value))\n      .attr(\"height\", barYScale.bandwidth())\n      .style(\"fill\", (d) => barFillScale(d.type))\n      .on(\"mouseover\", (d) => {\n        if (!this.state.show_tooltip) {\n          d3.select(this.tooltip.current)\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n        }\n      })\n      .on(\"mousemove\", (d) => {\n        if (!this.state.show_tooltip) {\n          let table_info = {};\n          data.filter(e=>e.name===d.name || e.name===\"US\").forEach(e=>{\n            if (e.name === \"US\") {\n              table_info[e.name+\"_\"+e.type]=d3.format(\".2f\")(e.value);\n            } else {\n              table_info[e.type]=d3.format(\".2f\")(e.value);\n            }\n          });\n          \n          let html = renderToString(<UpdatedTable region={d.name} title={this.props.title} type={d.type} table_info={table_info}/>);\n          d3.select(this.tooltip.current)\n            .html(html)\n            .style(\"position\", \"absolute\")\n            .style(\"top\", d3.event.pageY - 50 + \"px\")\n            .style(\"left\", d3.event.pageX + 50 + \"px\")\n            .style(\"opacity\", 1);\n          d3.select(this.wrapper.current)\n            .select(\"rect.bars_\" + d.id + \"_\" + d.type)\n            .classed(\"selected\", true);\n        }\n      })\n      .on(\"mouseout\", (d) => {\n        if (!this.state.show_tooltip) {\n          d3.select(this.tooltip.current)\n          .transition()\n          .duration(500)\n          .style(\"opacity\", 0);\n        d3.selectAll(\"rect.selected\").classed(\"selected\", false);\n        }\n      })\n      .on(\"click\", d => {\n        if (d3.select(this.wrapper.current).select(\"rect.bars_\" + d.id + \"_\" + d.type).classed('highlighted')) {\n          d3.selectAll('rect.highlighted').classed('highlighted', false);\n          this.setState({'show_tooltip': false});\n        } else {\n          d3.selectAll('rect.highlighted').classed('highlighted', false);\n          d3.selectAll('rect.selected').classed('selected', false);\n          d3.select(this.wrapper.current).select(\"rect.bars_\" + d.id + \"_\" + d.type).classed('highlighted', true);\n          this.setState({'show_tooltip': true});\n\n          d3.select(this.tooltip.current).style(\"opacity\", 0);\n          let table_info = {};\n          data.filter(e=>e.name===d.name || e.name===\"US\").forEach(e=>{\n            if (e.name === \"US\") {\n              table_info[e.name+\"_\"+e.type]=d3.format(\".2f\")(e.value);\n            } else {\n              table_info[e.type]=d3.format(\".2f\")(e.value);\n            }\n          });\n          \n          let html = renderToString(<UpdatedTable region={d.name} title={this.props.title} type={d.type} table_info={table_info}/>);\n          d3.select(this.tooltip.current)\n            .html(html)\n            .style(\"position\", \"absolute\")\n            .style(\"top\", d3.event.pageY - 50 + \"px\")\n            .style(\"left\", d3.event.pageX + 50 + \"px\")\n            .style(\"opacity\", 1);\n        }\n\n      });\n\n    // axis\n    d3.select(this.axis_y.current).selectAll(\"g\").remove();\n    d3.select(this.axis_y.current)\n      .attr(\"transform\", \"translate(\" + marginLeft + \",0)\")\n      .call(d3.axisLeft(barYScale))\n      .selectAll(\"text\")\n      .filter((d) => d === \"US\")\n      .style(\"font-size\", \"1.5em\");\n\n    // filter\n    d3.select(this.fuels.current).selectAll(\"div\").remove();\n    let fuels = d3\n      .select(this.fuels.current)\n      .append(\"div\")\n      .attr(\"class\", \"fuels\")\n      .selectAll(\"div\")\n      .data(Object.values(this.props.fuel_name_lookup))\n      .enter()\n      .append(\"div\")\n      .style(\"display\", \"inline-block\")\n      .attr(\"class\", \"fuel\");\n\n    let fuels_svg = fuels\n      .append(\"svg\")\n      .attr(\"width\", boxlen)\n      .attr(\"height\", h_legend);\n\n    fuels_svg\n      .append(\"image\")\n      .attr(\"xlink:href\", (d) => this.props.fuel_icon_lookup[d])\n      .attr(\"x\", boxlen / 2 - Math.min(boxlen, h_legend * 0.5) / 2)\n      .attr(\"y\", 0)\n      .attr(\"width\", Math.min(boxlen, h_legend * 0.5))\n      .attr(\"height\", Math.min(boxlen, h_legend * 0.5));\n\n    fuels_svg\n      .filter((d) => this.props.fuel_icon_lookup[d] === \"\")\n      .append(\"circle\")\n      .attr(\"r\", Math.min(boxlen, h_legend * 0.5) / 4)\n      .attr(\"fill\", (d) => this.props.fuel_color_lookup[d])\n      .attr(\"cx\", boxlen / 2)\n      .attr(\"cy\", Math.min(boxlen, h_legend * 0.5) / 2);\n\n    fuels_svg\n      .append(\"text\")\n      .attr(\"x\", boxlen / 2)\n      .attr(\"y\", Math.min(boxlen, h_legend * 0.5) * 1.5)\n      .attr(\"dx\", 0)\n      .attr(\"dy\", 0)\n      .text((d) => this.props.fuel_label_lookup[d])\n      .style(\"text-anchor\", \"middle\")\n      .call(this.props.wrap_long_labels, boxlen);\n\n    d3.select(\".fuels\")\n      .insert(\"div\", \".fuel\")\n      .style(\"display\", \"inline-block\")\n      .attr(\"class\", \"reset\")\n      .append(\"svg\")\n      .attr(\"width\", boxlen)\n      .attr(\"height\", h_legend)\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", Math.min(boxlen, h_legend * 0.5) * 0.75)\n      .attr(\"dx\", 0)\n      .attr(\"dy\", 0)\n      .text(this.sort_text)\n      .style(\"text-anchor\", \"start\")\n      .style(\"font-weight\", \"bold\")\n      .style(\"font-size\", \"1.1em\")\n      .call(this.props.wrap_long_labels, boxlen);\n\n    d3.selectAll(\".fuel\").on(\"click\", (d) => {\n      let n = d3\n        .select(this.fuels.current)\n        .selectAll(\".fuel\")\n        .filter((e) => e === d);\n      if (n.classed(\"selected\")) {\n        this.setState({ selected_fuel: null });\n      } else {\n        this.setState({ selected_fuel: d });\n      }\n    });\n  }\n\n  updateView(fuel) {\n    let marginRight = 0,\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\n    let w = d3.select(this.barchart_wrapper.current).node().clientWidth,\n      h = d3.select(this.barchart_wrapper.current).node().clientHeight;\n\n    if (fuel === null) {\n      const fuel_names = this.props.fuels;\n\n      let data = [];\n      _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\n        let cumsum = 0;\n        fuel_names.forEach((f) => {\n          data.push({\n            name: d.name,\n            id: d.id,\n            unit: this.props.unit,\n            type: this.props.fuel_name_lookup[f],\n            value: d[f],\n            cumsum: cumsum,\n          });\n          cumsum = cumsum + d[f];\n        });\n      });\n      let name = _.uniq(data.map((d) => d.name));\n      name = _.flatten([[\"US\"], name.filter((d) => d !== \"US\")]);\n\n      let barXScale = d3\n        .scaleLinear()\n        .domain([0, 100])\n        .range([0, w - marginLeft - marginRight]);\n      let barYScale = d3\n        .scaleBand()\n        .domain(name)\n        .range([0, h])\n        .paddingInner(0.1)\n        .paddingOuter(0.2);\n\n      // barchart\n      d3.select(this.barchart.current)\n        .selectAll(\"rect\")\n        .attr(\"x\", (d) => barXScale(d.cumsum))\n        .transition()\n        .attr(\"y\", (d) => barYScale(d.name));\n\n      // axis\n      d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\n    } else {\n      const fuel_names = _.flatten([\n        [_.invert(this.props.fuel_name_lookup)[fuel]],\n        this.props.fuels.filter(\n          (d) => d !== _.invert(this.props.fuel_name_lookup)[fuel]\n        ),\n      ]);\n\n      let data = [];\n      _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\n        let cumsum = 0;\n        fuel_names.forEach((f) => {\n          data.push({\n            name: d.name,\n            id: d.id,\n            unit: this.props.unit,\n            type: this.props.fuel_name_lookup[f],\n            value: d[f],\n            cumsum: cumsum,\n          });\n          cumsum = cumsum + d[f];\n        });\n      });\n\n      let name = data\n        .filter((d) => d.type === fuel)\n        .sort((a, b) => b.value - a.value)\n        .map((d) => d.name);\n      name = _.flatten([[\"US\"], name.filter((d) => d !== \"US\")]);\n\n      let barXScale = d3\n        .scaleLinear()\n        .domain([0, 100])\n        .range([0, w - marginLeft - marginRight]);\n\n      let barYScale = d3\n        .scaleBand()\n        .domain(name)\n        .range([0, h])\n        .paddingInner(0.1)\n        .paddingOuter(0.2);\n\n      d3.select(this.barchart.current)\n        .selectAll(\"rect\")\n        .each((d) => {\n          d.cumsum = data\n            .filter((e) => e.name === d.name && e.type === d.type)\n            .map((e) => e.cumsum)[0];\n        })\n        .attr(\"x\", (d) => barXScale(d.cumsum))\n        .transition()\n        .attr(\"y\", (d) => barYScale(d.name));\n\n      d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\n    }\n  }\n\n  render() {\n    let title = (\n      <p\n        style={{\n          fontSize: \"1.2em\",\n          fontWeight: \"bold\",\n          fill: \"#000\",\n          className: \"title\",\n          textAnchor: \"middle\",\n        }}\n      >\n        {this.props.title + \", by \" + this.props.layer_type}\n      </p>\n    );\n\n    return (\n      <div ref={this.wrapper}>\n        {title}\n        <svg\n          style={{ width: \"90%\", height: 150, margin: \"0 auto\" }}\n          ref={this.micromap}\n        ></svg>\n        <div\n          style={{ width: \"90%\", height: 80, margin: \"0 auto\" }}\n          ref={this.fuels}\n        ></div>\n        <svg\n          style={{ width: \"90%\", height: 600, margin: \"0 auto\" }}\n          ref={this.barchart_wrapper}\n        >\n          <g ref={this.barchart}></g>\n          <g ref={this.axis_y} className={\"axis axis_y\"}></g>\n        </svg>\n        <div\n          ref={this.tooltip}\n          style={{\n            opacity: 0,\n            maxWidth: 400,\n            maxHeight: 520,\n            overflow: \"auto\",\n            backgroundColor: \"rgba(255,255,255,0.95)\",\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\n            borderRadius: \"4px\",\n          }}\n        ></div>\n      </div>\n    );\n  }\n}\n\nexport default ResourceMixChart;\n","import React, { Component } from \"react\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport * as topojson from \"topojson-client\";\r\n\r\nimport subrgn from \"../assets/data/csv/subregion.csv\";\r\nimport nerc from \"../assets/data/csv/NERC.csv\";\r\nimport state from \"../assets/data/csv/state.csv\";\r\nimport statefullname from \"../assets/data/csv/eGRID state fullname.csv\";\r\nimport plant from \"../assets/data/csv/plant.csv\";\r\nimport ggl from \"../assets/data/csv/GGL.csv\";\r\nimport us from \"../assets/data/csv/US.csv\";\r\n\r\nimport lookup from \"../assets/data/json/eGRID lookup.json\";\r\nimport subrgn_topo from \"../assets/data/json/SUBRGN.json\";\r\nimport nerc_topo from \"../assets/data/json/NERC.json\";\r\nimport ggl_topo from \"../assets/data/json/GGL.json\";\r\nimport us_topo from \"../assets/data/json/US.json\";\r\n\r\nimport coal from \"../assets/img/coal.svg\";\r\nimport gas from \"../assets/img/gas.svg\";\r\nimport hydro from \"../assets/img/hydro.svg\";\r\nimport nuclear from \"../assets/img/nuclear.svg\";\r\nimport oil from \"../assets/img/oil.svg\";\r\nimport papaya from \"../assets/img/papaya.svg\";\r\nimport solar from \"../assets/img/solar.svg\";\r\nimport wind from \"../assets/img/wind.svg\";\r\n\r\nimport OtherLevelMap from \"./OtherLevelMap\";\r\nimport OtherLevelMapLegend from \"./OtherLevelMapLegend\";\r\nimport OtherLevelBarchart from \"./OtherLevelBarchart\";\r\nimport PlantLevelMapZoom from \"./PlantLevelMapZoom\";\r\nimport ResourceMixChart from \"./ResourceMixChart\";\r\n\r\nimport \"./Visualization.css\";\r\n\r\nclass Visualization extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      field: this.props.field,\r\n      name: this.props.name,\r\n      unit: this.props.unit,\r\n      tier1: this.props.tier1,\r\n      tier2: this.props.tier2,\r\n      tier4: this.props.tier4,\r\n      tier5: this.props.tier5,\r\n      data: [],\r\n      resource_mix_data: [],\r\n      json_data: [],\r\n      fuels: [],\r\n      mapfill: [],\r\n      background_layer: {},\r\n      layer: {},\r\n    };\r\n\r\n    this.ggl_layer = topojson.feature(ggl_topo, \"GGL\");\r\n    this.subrgn_layer = topojson.feature(subrgn_topo, \"subregion\");\r\n    this.nerc_layer = topojson.feature(nerc_topo, \"NERC\");\r\n    this.state_layer = topojson.feature(us_topo, \"states\");\r\n\r\n    this.ggl_layer.features.map((d) => (d.name = d.properties.GGL));\r\n    this.nerc_layer.features = this.nerc_layer.features\r\n      .filter((d) => d.properties.NERC !== \"-\")\r\n      .map((d) => {\r\n        d.name = d.properties.NERC;\r\n        return d;\r\n      });\r\n    this.subrgn_layer.features.map((d) => (d.name = d.properties.Subregions));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.updateState();\r\n    }\r\n  }\r\n\r\n  initState() {\r\n    Promise.all([\r\n      d3.csv(subrgn),\r\n      d3.csv(state),\r\n      d3.csv(statefullname),\r\n      d3.csv(nerc),\r\n      d3.csv(plant),\r\n      d3.csv(ggl),\r\n      d3.csv(us),\r\n    ]).then(([subrgn, state, state_fullname, nerc, plant, ggl, us]) => {\r\n      // process data\r\n      state.map((d) => {\r\n        d.label = d.PSTATABB;\r\n        d.ABBR = d.PSTATABB;\r\n        d.PSTATABB = state_fullname\r\n          .filter((e) => e.STATE === d.PSTATABB)\r\n          .map((e) => e.STATEFULL)[0]; //add state full names to state layer\r\n        d.name = d.PSTATABB;\r\n\r\n        Object.keys(d).forEach((e) => {\r\n          if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n            d[e] = +d[e].replace(/,/g, \"\");\r\n          }\r\n        });\r\n        d.id = d.FIPSST;\r\n      });\r\n      this.state_layer.features.map((d) =>\r\n        state.filter((e) => e.FIPSST === d.id).length === 1\r\n          ? (d.name = state.filter((e) => e.FIPSST === d.id)[0].name)\r\n          : \"\"\r\n      );\r\n\r\n      plant.map((d, i) => {\r\n        d.label = d.PNAME;\r\n        d.name = d.PNAME;\r\n        Object.keys(d).forEach((e) => {\r\n          if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n            d[e] = +d[e].replace(/,/g, \"\");\r\n          }\r\n        });\r\n        d.id = i;\r\n      });\r\n\r\n      subrgn.map((d, i) => {\r\n        d.label = d.SUBRGN;\r\n        d.name = d.SUBRGN;\r\n        Object.keys(d).forEach((e) => {\r\n          if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n            d[e] = +d[e].replace(/,/g, \"\");\r\n          }\r\n        });\r\n        d.id = i;\r\n      });\r\n\r\n      nerc = nerc.filter((d) => d.NERC !== \"NA\");\r\n      nerc.map((d, i) => {\r\n        d.label = d.NERC;\r\n        d.name = d.NERC;\r\n        Object.keys(d).forEach(function (e) {\r\n          if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n            d[e] = +d[e].replace(/,/g, \"\");\r\n          }\r\n        });\r\n        d.id = i;\r\n      });\r\n\r\n      ggl.map((d, i) => {\r\n        d.label = d.GGL;\r\n        d.name = d.GGL;\r\n        d.id = i;\r\n        d.unit = \"%\";\r\n        d.value = +d.percentage;\r\n      });\r\n\r\n      us.map((d) => {\r\n        Object.keys(d).forEach((e) => {\r\n          if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n            d[e] = +d[e].replace(/,/g, \"\");\r\n          }\r\n        });\r\n        d.name = \"US\";\r\n        d.id = -1;\r\n      });\r\n\r\n      this.state_data = state;\r\n      this.plant_data = plant;\r\n      this.subrgn_data = subrgn;\r\n      this.nerc_data = nerc;\r\n      this.ggl_data = ggl;\r\n      this.us_data = us;\r\n\r\n      this.updateState();\r\n    });\r\n  }\r\n\r\n  updateState() {\r\n    let category = lookup[this.props.tier1],\r\n      region = lookup[this.props.tier5];\r\n    let data_formatted = [],\r\n      json_data = { type: \"FeatureCollection\", features: [] },\r\n      resource_mix_data = [],\r\n      fuels = [],\r\n      mapfill = [],\r\n      background_layer = { type: \"FeatureCollection\", features: [] },\r\n      layer = { type: \"FeatureCollection\", features: [] };\r\n\r\n    // set state depending on region and category\r\n    this.us_data.map((d) => {\r\n      Object.keys(d).forEach((e) => {\r\n        if (e.split(\"US\").length > 1) {\r\n          d[\r\n            this.props.field\r\n              .replace(/\\[|\\]|\\s/g, \"\")\r\n              .split(\",\")[0]\r\n              .substring(0, 2) + e.substring(2)\r\n          ] = d[e];\r\n        }\r\n      });\r\n    });\r\n\r\n    let data = [];\r\n    if (region === \"eGRID subregion\") {\r\n      data = this.subrgn_data;\r\n      layer = this.subrgn_layer;\r\n    } else if (region === \"NERC region\") {\r\n      data = this.nerc_data;\r\n      layer = this.nerc_layer;\r\n    } else if (region === \"state\") {\r\n      data = this.state_data;\r\n      layer = this.state_layer;\r\n    } else if (region === \"Plant\") {\r\n      data = this.plant_data;\r\n    }\r\n\r\n    if (category === \"grid gross loss rates\") {\r\n      data_formatted = this.ggl_data;\r\n      layer = this.ggl_layer;\r\n      background_layer = this.state_layer;\r\n    } else if (category === \"resource mix (%)\") {\r\n      fuels = this.props.field.replace(/\\[|\\]|\\s/g, \"\").split(\",\");\r\n      resource_mix_data = data;\r\n    } else {\r\n      if (category.split(\"emission\").length > 1) {\r\n        mapfill = [\"#eff3ff\", \"#bdd7e7\", \"#6baed6\", \"#3182bd\", \"#08519c\"];\r\n      } else if (category.split(\"generation\").length > 1) {\r\n        mapfill = [\"#feedde\", \"#fdbe85\", \"#fd8d3c\", \"#e6550d\", \"#a63603\"];\r\n      } else if (\r\n        category.split(\"non-baseload\").length > 1 ||\r\n        category.split(\"heat input\").length > 1 ||\r\n        category.split(\"nameplate\").length > 1\r\n      ) {\r\n        mapfill = [\"#edf8e9\", \"#bae4b3\", \"#74c476\", \"#31a354\", \"#006d2c\"];\r\n      }\r\n\r\n      data_formatted = data.map((d) => {\r\n        return {\r\n          name: d.name,\r\n          id: d.id,\r\n          label: d.label,\r\n          unit: this.props.unit,\r\n          type: region !== \"Plant\" ? lookup[this.props.tier5] : d.FUEL,\r\n          value: d[this.props.field],\r\n        };\r\n      });\r\n\r\n      if (region === \"Plant\") {\r\n        fuels = [\r\n          \"COAL\",\r\n          \"OIL\",\r\n          \"GAS\",\r\n          \"NUCLEAR\",\r\n          \"HYDRO\",\r\n          \"BIOMASS\",\r\n          \"WIND\",\r\n          \"SOLAR\",\r\n          \"GEOTHERMAL\",\r\n          \"OFSL\",\r\n          \"OTHF\",\r\n        ];\r\n        data.map((d) => {\r\n          json_data.features.push({\r\n            type: \"Feature\",\r\n            properties: d,\r\n            id: d.id,\r\n            title: d.name,\r\n            geometry: { type: \"Point\", coordinates: [+d.LON, +d.LAT] },\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      field: this.props.field,\r\n      name: this.props.name,\r\n      unit: this.props.unit,\r\n      tier1: this.props.tier1,\r\n      tier2: this.props.tier2,\r\n      tier4: this.props.tier4,\r\n      tier5: this.props.tier5,\r\n      data: data_formatted,\r\n      resource_mix_data: resource_mix_data,\r\n      json_data: json_data,\r\n      fuels: fuels,\r\n      mapfill: mapfill,\r\n      layer: layer,\r\n      background_layer: background_layer,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let category = lookup[this.props.tier1],\r\n      region = lookup[this.props.tier5];\r\n    const fuel_label_lookup = {\r\n      COAL: \"Coal\",\r\n      OIL: \"Oil\",\r\n      GAS: \"Gas\",\r\n      NUCLEAR: \"Nuclear\",\r\n      HYDRO: \"Hydro\",\r\n      BIOMASS: \"Biomass\",\r\n      WIND: \"Wind\",\r\n      SOLAR: \"Solar\",\r\n      GEOTHERMAL: \"Geothermal\",\r\n      OFSL: \"Other Fossil\",\r\n      OTHF: \"Other Unknown\",\r\n      HYPR: \"Hydro\",\r\n      THPR: \"All Non-Hydro Renewables\",\r\n      TNPR: \"All Non-Renewables\",\r\n      CYPR: \"All Combustion\",\r\n      CNPR: \"All Non-Combustion\",\r\n    };\r\n    const fuel_color_lookup = {\r\n      COAL: \"rgb(85, 85, 85)\",\r\n      OIL: \"rgb(237, 28, 36)\",\r\n      GAS: \"rgb(246, 139, 40)\",\r\n      NUCLEAR: \"rgb(207, 74, 154)\",\r\n      HYDRO: \"rgb(0, 129, 197)\",\r\n      BIOMASS: \"rgb(44, 160, 44)\",\r\n      WIND: \"rgb(13, 177, 75)\",\r\n      SOLAR: \"rgb(215, 201, 68)\",\r\n      GEOTHERMAL: \"rgb(255, 152, 150)\",\r\n      OFSL: \"rgb(140, 86, 75)\",\r\n      OTHF: \"rgb(255, 239, 213)\",\r\n      HYPR: \"rgb(0, 129, 197)\",\r\n      THPR: \"rgb(13, 177, 75)\",\r\n      TNPR: \"rgb(255, 187, 120)\",\r\n      CYPR: \"rgb(237, 28, 36)\",\r\n      CNPR: \"rgb(255, 187, 120)\",\r\n    };\r\n    const fuel_icon_lookup = {\r\n      COAL: coal,\r\n      OIL: oil,\r\n      GAS: gas,\r\n      NUCLEAR: nuclear,\r\n      HYDRO: hydro,\r\n      BIOMASS: \"\",\r\n      WIND: wind,\r\n      SOLAR: solar,\r\n      GEOTHERMAL: \"\",\r\n      OFSL: \"\",\r\n      OTHF: papaya,\r\n      HYPR: \"\",\r\n      THPR: \"\",\r\n      TNPR: \"\",\r\n      CYPR: \"\",\r\n      CNPR: \"\",\r\n    };\r\n    let fuel_name_lookup = {};\r\n    this.state.fuels.forEach((d) => {\r\n      if (d.endsWith(\"CLPR\")) {\r\n        fuel_name_lookup[d] = \"COAL\";\r\n      } else if (d.endsWith(\"OLPR\")) {\r\n        fuel_name_lookup[d] = \"OIL\";\r\n      } else if (d.endsWith(\"GSPR\")) {\r\n        fuel_name_lookup[d] = \"GAS\";\r\n      } else if (d.endsWith(\"NCPR\")) {\r\n        fuel_name_lookup[d] = \"NUCLEAR\";\r\n      } else if (d.endsWith(\"HYPR\")) {\r\n        fuel_name_lookup[d] = \"HYDRO\";\r\n      } else if (d.endsWith(\"BMPR\")) {\r\n        fuel_name_lookup[d] = \"BIOMASS\";\r\n      } else if (d.endsWith(\"WIPR\")) {\r\n        fuel_name_lookup[d] = \"WIND\";\r\n      } else if (d.endsWith(\"SOPR\")) {\r\n        fuel_name_lookup[d] = \"SOLAR\";\r\n      } else if (d.endsWith(\"GTPR\")) {\r\n        fuel_name_lookup[d] = \"GEOTHERMAL\";\r\n      } else if (d.endsWith(\"OFPR\")) {\r\n        fuel_name_lookup[d] = \"OFSL\";\r\n      } else if (d.endsWith(\"OPPR\")) {\r\n        fuel_name_lookup[d] = \"OTHF\";\r\n      } else if (d.endsWith(\"HYPR\")) {\r\n        fuel_name_lookup[d] = \"HYPR\";\r\n      } else if (d.endsWith(\"THPR\")) {\r\n        fuel_name_lookup[d] = \"THPR\";\r\n      } else if (d.endsWith(\"TNPR\")) {\r\n        fuel_name_lookup[d] = \"TNPR\";\r\n      } else if (d.endsWith(\"CYPR\")) {\r\n        fuel_name_lookup[d] = \"CYPR\";\r\n      } else if (d.endsWith(\"CNPR\")) {\r\n        fuel_name_lookup[d] = \"CNPR\";\r\n      }\r\n    });\r\n\r\n    const wrap_long_labels = function (text, width) {\r\n      text.each(function () {\r\n        var text = d3.select(this),\r\n          words = text.text().split(/\\s+/).reverse(),\r\n          word,\r\n          line = [],\r\n          lineNumber = 0,\r\n          lineHeight = 1.1, // ems\r\n          x = text.attr(\"x\"),\r\n          y = text.attr(\"y\"),\r\n          dy = parseFloat(text.attr(\"dy\")),\r\n          tspan = text\r\n            .text(null)\r\n            .append(\"tspan\")\r\n            .attr(\"x\", x)\r\n            .attr(\"y\", y)\r\n            .attr(\"dy\", dy + \"em\");\r\n        while ((word = words.pop())) {\r\n          line.push(word);\r\n          tspan.text(line.join(\" \"));\r\n          if (tspan.node().getComputedTextLength() > width) {\r\n            line.pop();\r\n            tspan.text(line.join(\" \"));\r\n            line = [word];\r\n            tspan = text\r\n              .append(\"tspan\")\r\n              .attr(\"x\", x)\r\n              .attr(\"y\", y)\r\n              .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\r\n              .text(word);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    let vis;\r\n    if (category === \"grid gross loss rates\") {\r\n      vis = (\r\n        <OtherLevelMap\r\n          title={this.state.name}\r\n          width={800}\r\n          height={600}\r\n          scale={800}\r\n          layer={this.state.layer}\r\n          background_layer={this.state.background_layer}\r\n          data={this.state.data}\r\n          us_data={this.us_data}\r\n          field={this.state.field}\r\n          layer_type={category}\r\n          mapfill={this.state.mapfill}\r\n        />\r\n      );\r\n    } else if (category === \"resource mix (%)\") {\r\n      vis = (\r\n        <ResourceMixChart\r\n          title={this.state.name}\r\n          width={800}\r\n          height={600}\r\n          data={this.state.resource_mix_data}\r\n          us_data={this.us_data}\r\n          unit={this.props.unit}\r\n          fuels={this.state.fuels}\r\n          category={category}\r\n          field={this.state.field}\r\n          layer={this.state.layer}\r\n          layer_type={region}\r\n          fuel_label_lookup={fuel_label_lookup}\r\n          fuel_color_lookup={fuel_color_lookup}\r\n          fuel_icon_lookup={fuel_icon_lookup}\r\n          fuel_name_lookup={fuel_name_lookup}\r\n          wrap_long_labels={wrap_long_labels}\r\n        />\r\n      );\r\n    } else {\r\n      if (region !== \"Plant\") {\r\n        vis =\r\n          this.state.data.length === 0 ? (\r\n            <div className=\"loading\">\r\n              <Spinner animation=\"grow\" variant=\"success\" />\r\n            </div>\r\n          ) : (\r\n            <div className=\"visualization\">\r\n              <div className=\"visualization-parts\">\r\n                <OtherLevelMap\r\n                  title={this.state.name}\r\n                  width={800}\r\n                  height={500}\r\n                  data={this.state.data}\r\n                  us_data={this.us_data}\r\n                  unit={this.state.unit}\r\n                  field={this.state.field}\r\n                  scale={800}\r\n                  layer={this.state.layer}\r\n                  layer_type={region}\r\n                  mapfill={this.state.mapfill}\r\n                />\r\n                <OtherLevelMapLegend\r\n                  width={500}\r\n                  height={50}\r\n                  data={this.state.data}\r\n                  mapfill={this.state.mapfill}\r\n                />\r\n              </div>\r\n              <div className=\"visualization-parts\">\r\n                <OtherLevelBarchart\r\n                  title={this.state.name}\r\n                  width={400}\r\n                  height={600}\r\n                  data={this.state.data}\r\n                  field={this.state.field}\r\n                  us_data={this.us_data}\r\n                  layer_type={region}\r\n                  unit={this.state.unit}\r\n                  mapfill={this.state.mapfill}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n      } else if (region === \"Plant\") {\r\n        vis =\r\n          this.state.data.length === 0 ? (\r\n            <div className=\"loading\">\r\n              <Spinner animation=\"grow\" variant=\"success\" />\r\n            </div>\r\n          ) : (\r\n            <div className=\"visualization\">\r\n              <PlantLevelMapZoom\r\n                title={this.state.name}\r\n                data={this.state.data}\r\n                fuels={this.state.fuels}\r\n                json_data={this.state.json_data}\r\n                init_center={[-97.922211, 42.381266]}\r\n                init_zoom={3}\r\n                field={this.state.field}\r\n                fuel_label_lookup={fuel_label_lookup}\r\n                fuel_color_lookup={fuel_color_lookup}\r\n                fuel_icon_lookup={fuel_icon_lookup}\r\n                wrap_long_labels={wrap_long_labels}\r\n              />\r\n            </div>\r\n          );\r\n      }\r\n    }\r\n    return <div className=\"visualization\">{vis}</div>;\r\n  }\r\n}\r\n\r\nclass UpdatedVisualization extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"export-div\" style={{display: \"none\"}}>\r\n          <Button variant=\"secondary\" size=\"sm\">\r\n            Export Table\r\n          </Button>{\" \"}\r\n          {lookup[this.props.tier5] !== \"Plant\" && <Button variant=\"secondary\" size=\"sm\">\r\n            Export Visualization\r\n          </Button>}\r\n          {lookup[this.props.tier5] === \"Plant\" && <Button variant=\"secondary\" size=\"sm\">\r\n            Export Zoomable Map\r\n          </Button>}\r\n          {lookup[this.props.tier5] === \"Plant\" && \" \"}\r\n          {lookup[this.props.tier5] === \"Plant\" && <Button variant=\"secondary\" size=\"sm\">\r\n            Export Static Map\r\n          </Button>}\r\n        </div>\r\n        <Visualization\r\n          field={this.props.field}\r\n          name={this.props.name}\r\n          unit={this.props.unit}\r\n          tier1={this.props.tier1}\r\n          tier2={this.props.tier2}\r\n          tier4={this.props.tier4}\r\n          tier5={this.props.tier5}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UpdatedVisualization;\r\n","import React, { Component } from \"react\";\r\nimport * as _ from \"underscore\";\r\nimport { SentenceDropdown, SentenceMiscellaneous } from \"./Sentence\";\r\nimport UpdatedVisualization from \"./Visualization\";\r\nimport lookup from \"../assets/data/json/eGRID lookup.json\";\r\n\r\nconst year = 2018;\r\nconst conjunction = {\r\n  tier1_0: {\r\n    conjunct1: \"for\",\r\n    conjunct2: \"for\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_1: {\r\n    conjunct1: \"for\",\r\n    conjunct2: \"for\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_2: {\r\n    conjunct1: \"for\",\r\n    conjunct2: \"for\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_3: {\r\n    conjunct1: \"of\",\r\n    conjunct2: \"\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_4: {\r\n    conjunct1: \"from\",\r\n    conjunct2: \"\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_5: {\r\n    conjunct1: \"from\",\r\n    conjunct2: \"\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_6: {\r\n    conjunct1: \"for\",\r\n    conjunct2: \"\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_7: {\r\n    conjunct1: \"for\",\r\n    conjunct2: \"for\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_8: {\r\n    conjunct1: \"\",\r\n    conjunct2: \"\",\r\n    conjunct3: \"at the\",\r\n    conjunct4: \"level\",\r\n  },\r\n  tier1_9: { conjunct1: \"\", conjunct2: \"\", conjunct3: \"\", conjunct4: \"\" },\r\n};\r\n\r\nclass Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const init_options = this.props.options[0];\r\n    this.state = {\r\n      tier1: init_options.tier1,\r\n      tier2: init_options.tier2,\r\n      tier4: init_options.tier4,\r\n      tier5: init_options.tier5,\r\n      field: init_options[\"Final field name in eGRID\"],\r\n      unit: init_options.Units,\r\n      name: init_options[\"Full Name\"],\r\n      data: [],\r\n      all_options: this.props.options.filter(\r\n        (d) => d.tier1 === init_options.tier1\r\n      ),\r\n      tier1_available_options: _.uniq(this.props.options.map((d) => d.tier1)),\r\n      tier2_available_options: _.uniq(\r\n        this.props.options\r\n          .filter((d) => d.tier1 === init_options.tier1)\r\n          .map((d) => d.tier2)\r\n      ),\r\n      tier4_available_options: _.uniq(\r\n        this.props.options\r\n          .filter(\r\n            (d) =>\r\n              d.tier1 === init_options.tier1 &&\r\n              d.tier2 === init_options.tier2\r\n          )\r\n          .map((d) => d.tier4)\r\n      ),\r\n      tier5_available_options: _.uniq(\r\n        this.props.options\r\n          .filter(\r\n            (d) =>\r\n              d.tier1 === init_options.tier1 &&\r\n              d.tier2 === init_options.tier2 &&\r\n              d.tier4 === init_options.tier4\r\n          )\r\n          .map((d) => d.tier5)\r\n      ),\r\n    };\r\n\r\n    this.handleChange1 = this.handleChange1.bind(this);\r\n    this.handleChange2 = this.handleChange2.bind(this);\r\n    this.handleChange4 = this.handleChange4.bind(this);\r\n    this.handleChange5 = this.handleChange5.bind(this);\r\n  }\r\n\r\n  handleChange1(event) {\r\n    let val = event.target.value;\r\n    this.setState(\r\n      {\r\n        tier1: val,\r\n        all_options: this.props.options.filter((d) => d.tier1 === val),\r\n        updated_tier: \"tier1\",\r\n      },\r\n      () => {\r\n        let t2_avail = this.props.options.filter((d) => d.tier1 === val);\r\n        let t2_val =\r\n          t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n            ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n            : this.state.tier2;\r\n        this.setState({ tier2: t2_val }, () => {\r\n          let t4_avail = this.props.options.filter(\r\n            (d) =>\r\n              d.tier1 === val &&\r\n              d.tier2 === this.state.tier2\r\n          );\r\n          let t4_val =\r\n            t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n              ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n              : this.state.tier4;\r\n          this.setState({ tier4: t4_val }, () => {\r\n            let t5_avail = this.props.options.filter(\r\n              (d) =>\r\n                d.tier1 === val &&\r\n                d.tier2 === this.state.tier2 &&\r\n                d.tier4 === this.state.tier4\r\n            );\r\n            let t5_val =\r\n              t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n                ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n                : this.state.tier5;\r\n            this.setState({ tier5: t5_val }, () => {\r\n              let opt = this.state.all_options.filter(\r\n                (d) =>\r\n                  d.tier1 === this.state.tier1 &&\r\n                  d.tier2 === this.state.tier2 &&\r\n                  d.tier4 === this.state.tier4 &&\r\n                  d.tier5 === this.state.tier5\r\n              )[0];\r\n              this.setState({\r\n                tier2_available_options: _.uniq(\r\n                  this.state.all_options.map((d) => d.tier2)\r\n                ),\r\n                tier4_available_options: _.uniq(\r\n                  this.state.all_options\r\n                    .filter(\r\n                      (d) =>\r\n                        d.tier2 === this.state.tier2\r\n                    )\r\n                    .map((d) => d.tier4)\r\n                ),\r\n                tier5_available_options: _.uniq(\r\n                  this.state.all_options\r\n                    .filter(\r\n                      (d) =>\r\n                        d.tier2 === this.state.tier2 &&\r\n                        d.tier4 === this.state.tier4\r\n                    )\r\n                    .map((d) => d.tier5)\r\n                ),\r\n              });\r\n              this.setState({\r\n                field: opt[\"Final field name in eGRID\"],\r\n                unit: opt.Units,\r\n                name: opt[\"Full Name\"],\r\n              }, ()=>{\r\n                console.log(this.state);\r\n              });\r\n              \r\n            });\r\n          });\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  handleChange2(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier2: val, updated_tier: \"tier2\" }, () => {\r\n\r\n      let t4_avail = this.props.options.filter(\r\n        (d) =>\r\n          d.tier1 === this.state.tier1 &&\r\n          d.tier2 === val\r\n      );\r\n      let t4_val =\r\n        t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n          ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n          : this.state.tier4;\r\n      this.setState({ tier4: t4_val }, () => {\r\n        let t5_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === val &&\r\n            d.tier4 === this.state.tier4\r\n        );\r\n        let t5_val =\r\n          t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n            ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n            : this.state.tier5;\r\n        this.setState({ tier5: t5_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2\r\n                )\r\n                .map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2 &&\r\n                    d.tier4 === this.state.tier4\r\n                )\r\n                .map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState({\r\n            field: opt[\"Final field name in eGRID\"],\r\n            unit: opt.Units,\r\n            name: opt[\"Full Name\"],\r\n          }, ()=>{\r\n            console.log(this.state);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange4(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier4: val, updated_tier: \"tier4\" }, () => {\r\n      let t2_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier4 === val\r\n      );\r\n      let t2_val =\r\n        t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n          ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n          : this.state.tier2;\r\n      this.setState({ tier2: t2_val }, () => {\r\n        let t5_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === this.state.tier2 &&\r\n            d.tier4 === val\r\n        );\r\n        let t5_val =\r\n          t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n            ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n            : this.state.tier5;\r\n        this.setState({ tier5: t5_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2 &&\r\n                    d.tier4 === this.state.tier4\r\n                )\r\n                .map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState({\r\n            field: opt[\"Final field name in eGRID\"],\r\n            unit: opt.Units,\r\n            name: opt[\"Full Name\"],\r\n          }, ()=>{\r\n            console.log(this.state);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange5(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier5: val, updated_tier: \"tier5\" }, () => {\r\n      let t2_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier5 === val\r\n      );\r\n      let t2_val =\r\n        t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n          ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n          : this.state.tier2;\r\n      this.setState({ tier2: t2_val }, () => {\r\n        let t4_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === this.state.tier2 &&\r\n            d.tier5 === val\r\n        );\r\n        let t4_val =\r\n          t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n            ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n            : this.state.tier4;\r\n        this.setState({ tier4: t4_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState({\r\n            field: opt[\"Final field name in eGRID\"],\r\n            unit: opt.Units,\r\n            name: opt[\"Full Name\"],\r\n          }, ()=>{\r\n            console.log(this.state);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let all_options = this.state.all_options;\r\n    let tier2_options = _.uniq(all_options.map((op) => lookup[op.tier2])),\r\n      tier4_options = _.uniq(all_options.map((op) => lookup[op.tier4])),\r\n      tier5_options = _.uniq(all_options.map((op) => lookup[op.tier5]));\r\n    return (\r\n      <div>\r\n        <p className=\"main\">\r\n          I want to explore\r\n          <SentenceDropdown\r\n            id=\"tier1\"\r\n            change={this.handleChange1}\r\n            updated_tier={this.state.updated_tier}\r\n            selected_option={this.state.tier1}\r\n            available_options={this.state.tier1_available_options}\r\n            options={_.uniq(\r\n              this.props.options.map((op) => [op.tier1, lookup[op.tier1]]),\r\n              (d) => d[0]\r\n            )}\r\n          />\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={conjunction[\"tier1_\" + this.state.tier1].conjunct1}\r\n          />\r\n          <span> </span>\r\n          {tier2_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier2\"\r\n              change={this.handleChange2}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier2}\r\n              available_options={this.state.tier2_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier2,\r\n                  lookup[op.tier2],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier2_options.length === 1 && tier2_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier2]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={conjunction[\"tier1_\" + this.state.tier1].conjunct2}\r\n          />\r\n          <span> </span>\r\n          {tier4_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier4\"\r\n              change={this.handleChange4}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier4}\r\n              available_options={this.state.tier4_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier4,\r\n                  lookup[op.tier4],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier4_options.length === 1 && tier4_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier4]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={conjunction[\"tier1_\" + this.state.tier1].conjunct3}\r\n          />\r\n          <span> </span>\r\n          {tier5_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier5\"\r\n              change={this.handleChange5}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier5}\r\n              available_options={this.state.tier5_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier5,\r\n                  lookup[op.tier5],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier5_options.length === 1 && tier5_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier5]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={conjunction[\"tier1_\" + this.state.tier1].conjunct4}\r\n          />\r\n          <span> for </span>\r\n          <SentenceMiscellaneous value={year} />.\r\n        </p>\r\n        <UpdatedVisualization\r\n          className=\"main\"\r\n          field={this.state.field}\r\n          name={this.state.name}\r\n          unit={this.state.unit}\r\n          tier1={this.state.tier1}\r\n          tier2={this.state.tier2}\r\n          tier4={this.state.tier4}\r\n          tier5={this.state.tier5}\r\n        ></UpdatedVisualization>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nfunction Dialog(props) {\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      size=\"lg\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Emissions and Generation Resource Integrated Database\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <p>\r\n          Use the drop down arrows to query the data you would like to view. You\r\n          can change the main data displayed (emission rates, generation, etc.),\r\n          the pollutant type (CO2, NOx, etc.), the fuel type (coal, gas, etc.),\r\n          and the geographic representation (state, eGRID subregion, plant,\r\n          etc.), where applicable. Note that non-baseload emission rates and\r\n          non-baseload generation are not available at the plant level.\r\n        </p>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={props.onHide}>Close</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default Dialog;\r\n","import React, { Component } from \"react\";\r\nimport Main from \"./Components/Main\";\r\nimport logo from \"./assets/img/logo.png\";\r\nimport * as d3 from \"d3\";\r\nimport data from \"./assets/data/csv/eGRID all-level sentence structure.csv\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Dialog from \"./Components/Dialog\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { OPTIONS: [], show_modal: false };\r\n  }\r\n\r\n  componentDidMount() {\r\n    d3.csv(data).then((d) => {\r\n      this.setState({ OPTIONS: d.filter((e) => e.tier5 !== \"52\") });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        {this.state.OPTIONS.length > 0 ? (\r\n          <div>\r\n            <header>\r\n              <h2>Emissions and Generation Resource Integrated Database</h2>\r\n              <span className=\"dialog\"> (</span>\r\n              <span className=\"dialog-text\" onClick={() => this.setState({ show_modal: true })}>More Information</span>\r\n              <span className=\"dialog\">)</span>\r\n              <img id=\"logo\" src={logo}></img>\r\n            </header>\r\n            <Main options={this.state.OPTIONS}></Main>\r\n          </div>\r\n        ) : (\r\n          <div className=\"loading\">\r\n            <Spinner animation=\"grow\" variant=\"success\" />\r\n          </div>\r\n        )}\r\n        <Dialog\r\n          show={this.state.show_modal}\r\n          onHide={() => this.setState({ show_modal: false })}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/subregion.962d9d51.csv\";","module.exports = __webpack_public_path__ + \"static/media/NERC.e4d5529c.csv\";","module.exports = __webpack_public_path__ + \"static/media/state.aa898527.csv\";","module.exports = __webpack_public_path__ + \"static/media/eGRID state fullname.a33812da.csv\";","module.exports = __webpack_public_path__ + \"static/media/plant.004a86b9.csv\";","module.exports = __webpack_public_path__ + \"static/media/GGL.5324b8ca.csv\";","module.exports = __webpack_public_path__ + \"static/media/US.e83321ee.csv\";"],"sourceRoot":""}