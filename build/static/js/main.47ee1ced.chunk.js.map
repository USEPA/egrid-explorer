{"version":3,"sources":["assets/img/hydro.svg","assets/img/nuclear.svg","assets/img/oil.svg","assets/img/papaya.svg","assets/img/solar.svg","assets/img/wind.svg","assets/img/logo.png","serviceWorker.js","Dialog.js","Sentence.js","OtherLevelMap.js","OtherLevelMapLegend.js","OtherLevelBarchart.js","Table.js","PlantLevelMapZoom.js","PlantLevelMapStatic.js","ResourceMixChart.js","Visualization.js","Main.js","App.js","index.js","assets/data/csv/eGRID all-level sentence structure.csv","assets/data/csv/subregion.csv","assets/data/csv/NERC.csv","assets/data/csv/state.csv","assets/data/csv/eGRID state fullname.csv","assets/data/csv/plant.csv","assets/data/csv/GGL.csv","assets/data/csv/US.csv","assets/img/coal.svg","assets/img/gas.svg"],"names":["module","exports","Boolean","window","location","hostname","match","Dialog","props","Modal","size","aria-labelledby","centered","Header","closeButton","Title","id","Body","Footer","Button","variant","onClick","onHide","SentenceDropdown","opts","selected_option","this","available_options","options","some","option","opt","updated_tier","indexOf","key","value","disabled","push","style","fontSize","fontWeight","border","borderBottom","paddingLeft","paddingRight","marginRight","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","outline","onChange","change","Component","SentenceMiscellaneous","OtherLevelMap","tooltip","React","createRef","background","map","labels","d","d3","isNaN","Math","floor","layer","label_width","layer_type","label_height","projection","d3_composite","scale","translate","width","height","path","map_fill","features","data","filter","e","name","prop","centroid","properties","label","fill_scale","range","domainArr","sort","a","b","domain","length","current","selectAll","remove","enter","append","attr","on","transition","duration","html","title","slice","toLowerCase","split","unit","pageY","pageX","classed","text","background_layer","initView","prevProps","field","fill","className","textAnchor","display","margin","ref","opacity","maxWidth","maxHeight","padding","overflow","backgroundColor","boxShadow","borderRadius","OtherLevelMapLegend","legend","t","num","substring","d3_legend","shape","shapeWidth","shapeHeight","shapePadding","labelOffset","orient","labelFormat","labelAlign","i","label_str","generatedLabels","node","call","formatLegendLabel","OtherLevelBarchart","barchart","axis_x","axis_y","axis_x_title","state","sort_by","by","marginLeft","barFillScale","barXScale","barYScale","paddingInner","paddingOuter","bars","bandwidth","formatLabel","ticks","tickFormat","formatXaxis","updateView","prevState","type","val","setState","formatNumber","us_data","UpdatedTable","startsWith","Table","striped","bordered","hover","responsive","lineHeight","region","table_info","COAL","US_COAL","OIL","US_OIL","GAS","US_GAS","NUCLEAR","US_NUCLEAR","HYDRO","US_HYDRO","BIOMASS","US_BIOMASS","WIND","US_WIND","SOLAR","US_SOLAR","GEOTHERMAL","US_GEOTHERMAL","OFSL","US_OFSL","OTHF","US_OTHF","TNPR","US_TNPR","THPR","US_THPR","CYPR","US_CYPR","CNPR","US_CNPR","PNAME","ORISPL","PSTATABB","href","SUBRGN","PLPRMFL","NAMEPCAP","CAPFAC","PLNGENAN","PLHTIANT","PLNOXAN","PLNOXRTA","PLNOXOZ","PLNOXRTO","PLSO2AN","PLSO2RTA","PLCO2AN","PLCO2RTA","PLCH4AN","PLCH4RTA","PLN2OAN","PLN2ORTA","PLCO2EQA","PLC2ERTA","mapboxgl","accessToken","PlantLevelMapZoom","fuels","selected_fuel","field_factor_divided_by","max_radius","max_radius_before_remove","zoom_factor","legend_len","legend_percentile","filter_text","filter_reset_text","w","clientWidth","h","clientHeight","boxlen","fuels_svg","min","fuel_color_lookup","fuel_label_lookup","wrap_long_labels","insert","n","loaded","concat","plant_data","plant_outlier","getSource","setData","setRadius","select","factor","updateLegend","JSON","stringify","FUEL","init_zoom","init_center","Map","container","center","zoom","minzoom","min_zoom","maxzoom","max_zoom","addControl","NavigationControl","FullscreenControl","ResetControl","_map","_container","document","createElement","innerHTML","cursor","onclick","flyTo","parentNode","removeChild","undefined","Legend","addSource","addLayer","source","paint","circle_opacity","show_tooltip","hoveredPlantId","Popup","closeOnClick","anchor","setFeatureState","getCanvas","setLngLat","geometry","coordinates","setText","addTo","getLngLat","lng","lat","Object","keys","forEach","description","renderToString","setHTML","field_values","radius_values","getZoom","legend_values","legend_cells","formatLegend","static_map_scale","setPaintProperty","PlantLevelMapStatic","svg","initStaticMap","ResourceMixChart","wrapper","barchart_wrapper","micromap","sort_text","fuel_names","fuel_colors","values","fuel_name_lookup","_","cumsum","f","w_micro","h_micro","w_legend","h_legend","avail_fuels","fuel","each","Visualization","console","log","tier1","tier2","tier4","tier5","resource_mix_data","updateState","category","lookup","choropleth_data","replace","subrgn_data","subrgn_layer","nerc_data","nerc_layer","state_data","state_layer","ggl_data","ggl_layer","choropleth_map_fill","emission","generation","others","plant_fuels","LON","LAT","vis","fuel_icon_lookup","coal","oil","gas","nuclear","hydro","wind","solar","papaya","HYPR","endsWith","Spinner","animation","textAlign","verticalAlign","UpdatedVisualization","exportStaticMap","bind","exportVis","zoomable_status","static_status","print","marginBottom","Main","init_options","Units","all_options","tier1_available_options","tier2_available_options","tier4_available_options","tier5_available_options","handleChange1","handleChange2","handleChange4","handleChange5","event","target","t2_avail","t2_val","t4_avail","t4_val","t5_avail","t5_val","tier2_options","op","tier4_options","tier5_options","conjunction","conjunct1","conjunct2","conjunct3","conjunct4","year","App","show_modal","tier1_0","tier1_1","tier1_2","tier1_3","tier1_4","tier1_5","tier1_6","tier1_7","tier1_8","tier1_9","PLNOXRA","PLNOXRO","PLSO2RA","PLCO2RA","PLNGENOZ","PLGENACL","PLGENAOL","PLGENAGS","PLGENANC","PLGENAHY","PLGENABM","PLGENAWI","PLGENASO","PLGENAGT","PLGENAOF","PLGENAOP","PLGENATN","PLGENATR","PLGENATH","PLGENACY","PLGENACN","PLHTIAN","PLHTIOZ","word","words","reverse","line","lineNumber","x","y","dy","parseFloat","tspan","pop","join","getComputedTextLength","topojson","ggl_topo","subrgn_topo","nerc_topo","us_topo","GGL","NERC","Subregions","prepData","Promise","all","subrgn","statefullname","nerc","plant","ggl","us","then","state_fullname","ABBR","STATE","STATEFULL","FIPSST","percentage","show","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.47ee1ced.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/hydro.d3125ed9.svg\";","module.exports = __webpack_public_path__ + \"static/media/nuclear.2a50e8cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/oil.9b1b3165.svg\";","module.exports = __webpack_public_path__ + \"static/media/papaya.303f93a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/solar.bb67ad70.svg\";","module.exports = __webpack_public_path__ + \"static/media/wind.d4de7a67.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.199eebe4.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nfunction Dialog(props) {\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      size=\"lg\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Use Instruction\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <p>\r\n          Use the drop down arrows to query the data you would like to view. You\r\n          can change the main data displayed (emission rates, generation, etc.),\r\n          the pollutant type (CO2, NOx, etc.), the fuel type (coal, gas, etc.),\r\n          and the geographic representation (state, eGRID subregion, plant,\r\n          etc.), where applicable. Note that non-baseload emission rates and\r\n          non-baseload generation are not available at the plant level.\r\n        </p>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={props.onHide}>Close</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default Dialog;\r\n","import React, { Component } from \"react\";\r\n\r\nclass SentenceDropdown extends Component {\r\n  render() {\r\n    const opts = [];\r\n    let selected_option = this.props.selected_option,\r\n      available_options = this.props.available_options;\r\n\r\n    this.props.options.some((option) => {\r\n      let opt = null;\r\n      if (this.props.id === \"tier1\") {\r\n        opt = (\r\n          <option key={option[0]} value={option[0]} disabled={false}>\r\n            {option[1]}\r\n          </option>\r\n        );\r\n      } else if (this.props.id === this.props.updated_tier) {\r\n        opt = (\r\n          <option key={option[0]} value={option[0]} disabled={false}>\r\n            {option[1]}\r\n          </option>\r\n        );\r\n      } else if (available_options.indexOf(option[0]) !== -1) {\r\n        opt = (\r\n          <option key={option[0]} value={option[0]} disabled={false}>\r\n            {option[1]}\r\n          </option>\r\n        );\r\n      } else if (available_options.indexOf(option[0]) === -1) {\r\n        opt = (\r\n          <option key={option[0]} value={option[0]} disabled={true}>\r\n            {option[1]}\r\n          </option>\r\n        );\r\n      }\r\n      opts.push(opt);\r\n    });\r\n\r\n    return (\r\n      <select style={{fontSize: \"1em\",\r\n        fontWeight: \"bold\",\r\n        border: \"none\",\r\n        borderBottom: \"1px dashed #000\",\r\n        paddingLeft: \"5px\",\r\n        paddingRight: \"17px\",\r\n        marginRight: \"6px\",\r\n        backgroundImage: \"url('./assets/img/dropdown_arrow.png')\",\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundSize: \"14px 14px\",\r\n        backgroundPosition: \"100% 90%\",\r\n        outline: \"none\"}}\r\n        value={selected_option} onChange={this.props.change}>\r\n        {opts}\r\n      </select>\r\n    );\r\n  }\r\n}\r\n\r\nclass SentenceMiscellaneous extends Component {\r\n  render() {\r\n    return <span>{this.props.value}</span>;\r\n  }\r\n}\r\n\r\nexport { SentenceDropdown, SentenceMiscellaneous };\r\n","import React, { Component } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3_composite from \"d3-composite-projections\";\r\n\r\nclass OtherLevelMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tooltip = React.createRef();\r\n    this.background = React.createRef();\r\n    this.map = React.createRef();\r\n    this.labels = React.createRef();\r\n  }\r\n\r\n  formatNumber(d) {\r\n    if (d < 1) {\r\n      return d3.format(\".3f\")(d);\r\n    } else if (d >= 1000000) {\r\n      return d3.format(\",.0f\")(d);\r\n    } else {\r\n      return isNaN(d) ? \"\" : d3.format(\",.2f\")(Math.floor(d * 100) / 100);\r\n    }\r\n  }\r\n\r\n  initView() {\r\n    const layer = this.props.layer,\r\n      label_width =\r\n        this.props.layer_type === \"grid gross loss rates\"\r\n          ? 120\r\n          : this.props.layer_type === \"state\"\r\n          ? 20\r\n          : 40,\r\n      label_height =\r\n        this.props.layer_type !== \"grid gross loss rates\" ? 14 : 22;\r\n\r\n    const projection = d3_composite\r\n      .geoAlbersUsaTerritories()\r\n      .scale(this.props.scale)\r\n      .translate([this.props.width / 2, this.props.height / 2.5]);\r\n    const path = d3.geoPath().projection(projection);\r\n    const map_fill = this.props.map_fill;\r\n\r\n    // add centroid to layer\r\n    layer.features = layer.features\r\n      .map((d) => {\r\n        if (this.props.data.filter((e) => e.name === d.name)[0]) {\r\n          let prop = this.props.data.filter((e) => e.name === d.name)[0];\r\n          prop.centroid = path.centroid(d);\r\n          d.properties = prop;\r\n        } else {\r\n          d.properties = {id: null, name: null, label: null, value: null, centroid:[null, null]};\r\n        }\r\n        return d;\r\n      });\r\n\r\n    // add fill scale\r\n    let fill_scale = d3.scaleThreshold().range(map_fill);\r\n    let domainArr = layer.features\r\n      .map((e) => e.properties.value)\r\n      .sort((a, b) => a - b);\r\n    fill_scale.domain(\r\n      d3\r\n        .range(map_fill.length - 1)\r\n        .map((d) => d3.quantile(domainArr, (d + 1) / map_fill.length))\r\n    );\r\n\r\n    // add layers\r\n    d3.select(this.map.current).selectAll(\"path\").remove();\r\n    d3.select(this.map.current)\r\n      .selectAll(\"path\")\r\n      .data(layer.features)\r\n      .enter()\r\n      .append(\"path\")\r\n      .attr(\"d\", path)\r\n      .attr(\"class\", (d) => \"paths mouseover_target region_\" + d.properties.id)\r\n      .style(\"fill\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\"\r\n          ? fill_scale(d.properties.value)\r\n          : \"transparent\"\r\n      )\r\n      .style(\"stroke\", \"#000\")\r\n      .style(\"stroke-width\", 0.5)\r\n      .on('mouseover', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(100)\r\n        .style(\"opacity\", 1);\r\n      })\r\n      .on('mousemove', d=>{\r\n        let html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.properties.name + \"</b><br>is <b>\" + d.properties.value + \" \" + d.properties.unit + \"</b>.</span>\";\r\n        d3.select(this.tooltip.current)\r\n        .html(html)\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"top\", (d3.event.pageY + 25) + \"px\")\r\n        .style(\"left\", (d3.event.pageX - 500) + \"px\")\r\n        .style(\"opacity\", 1);\r\n\r\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true).style(\"stroke\", \"#000\").style(\"stroke-width\", 1).style(\"opacity\", 1);\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true).style(\"font-weight\", \"bold\").style(\"opacity\", 1);\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true).style(\"stroke-width\", 1).style(\"opacity\", 1);\r\n      })\r\n      .on('mouseout', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(500)\r\n        .style(\"opacity\", 0);\r\n\r\n        d3.selectAll('.deemphasized').classed('deemphasized', false).style(\"opacity\", 1).style(\"transition\", \"opacity 0.5s\");\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true).style(\"stroke\", \"none\");\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true).style(\"font-weight\", \"normal\");\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true).style(\"stroke-width\", 0.5);\r\n      });\r\n\r\n    // add labels\r\n    d3.select(this.labels.current).selectAll(\"g\").remove();\r\n    let labels = d3\r\n      .select(this.labels.current)\r\n      .selectAll(\"g\")\r\n      .data(layer.features)\r\n      .enter()\r\n      .append(\"g\");\r\n\r\n    labels\r\n      .append(\"rect\")\r\n      .attr(\"x\", (d) => d.properties.centroid[0] - label_width / 2)\r\n      .attr(\"y\", (d) => d.properties.centroid[1])\r\n      .attr(\"width\", label_width)\r\n      .attr(\"height\", label_height)\r\n      .attr(\"rx\", 4)\r\n      .style(\"fill\", \"#fff\")\r\n      .style(\"stroke\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\" ? \"none\" : \"#000\"\r\n      );\r\n\r\n    labels\r\n      .append(\"text\")\r\n      .attr(\"x\", (d) => d.properties.centroid[0])\r\n      .attr(\"y\", (d) => d.properties.centroid[1] + label_height * 0.8)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"font-size\", (d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\" ? \"0.7em\" : \"1em\"\r\n      )\r\n      .style(\"font-weight\", \"bold\")\r\n      .text((d) =>\r\n        this.props.layer_type !== \"grid gross loss rates\"\r\n          ? d.properties.label\r\n          : d.properties.label + \": \" + d.properties.value + \"%\"\r\n      ).on('mouseover', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(100)\r\n        .style(\"opacity\", 1);\r\n      })\r\n      .on('mousemove', d=>{\r\n        let html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.properties.name + \"</b><br>is <b>\" + d.properties.value + \" \" + d.properties.unit + \"</b>.</span>\";\r\n        d3.select(this.tooltip.current)\r\n        .html(html)\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"top\", (d3.event.pageY + 25) + \"px\")\r\n        .style(\"left\", (d3.event.pageX - 500) + \"px\")\r\n        .style(\"opacity\", 1);\r\n\r\n        d3.selectAll('.mouseover_target rect').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n        d3.selectAll('.mouseover_target text').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n        d3.selectAll('path.mouseover_target').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', true).style(\"stroke\", \"#000\").style(\"stroke-width\", 1).style(\"opacity\", 1);\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', true).style(\"font-weight\", \"bold\").style(\"opacity\", 1);\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', true).style(\"stroke-width\", 1).style(\"opacity\", 1);\r\n\r\n      })\r\n      .on('mouseout', d=>{\r\n        d3.select(this.tooltip.current)\r\n        .transition()\r\n        .duration(500)\r\n        .style(\"opacity\", 0);\r\n\r\n        d3.selectAll('.deemphasized').classed('deemphasized', false).style(\"opacity\", 1).style(\"transition\", \"opacity 0.5s\");\r\n\r\n        d3.selectAll('.region_'+d.properties.id+' rect').classed('selected', false).style(\"stroke\", \"none\");\r\n        d3.selectAll('.region_'+d.properties.id+' text').classed('selected', false).style(\"font-weight\", \"normal\");\r\n        d3.selectAll('path.region_'+d.properties.id).classed('selected', false).style(\"stroke-width\", 0.5);\r\n      });\r\n\r\n    // add background (grid gross loss rates)\r\n    if (this.props.layer_type === \"grid gross loss rates\") {\r\n      d3.select(this.background.current).selectAll(\"path\").remove();\r\n      d3.select(this.background.current)\r\n        .selectAll(\"path\")\r\n        .data(this.props.background_layer.features)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", path)\r\n        .attr(\"class\", \"paths\")\r\n        .style(\"fill\", \"transparent\")\r\n        .style(\"stroke\", \"rgb(221, 221, 221)\");\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initView();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.initView();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let title = (\r\n      <div>\r\n        <p\r\n          style={{\r\n            fontSize: \"1.2em\",\r\n            fontWeight: \"bold\",\r\n            fill: \"#000\",\r\n            className: \"title\",\r\n            textAnchor: \"middle\",\r\n          }}\r\n        >\r\n          {this.props.title}\r\n        </p>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        {title}\r\n        <svg style={{display:\"block\", margin: \"0 auto\"}} width={this.props.width} height={this.props.height}>\r\n          <g ref={this.background} />\r\n          <g ref={this.map} />\r\n          <g ref={this.labels} />\r\n        </svg>\r\n        <div\r\n          ref={this.tooltip}\r\n          style={{\r\n            opacity: 0,\r\n            maxWidth: 400,\r\n            maxHeight: 520,\r\n            padding: 5,\r\n            overflow: \"auto\",\r\n            backgroundColor: \"rgba(255,255,255,0.95)\",\r\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\r\n            borderRadius: \"4px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OtherLevelMap;\r\n","import React, { Component} from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3_legend from \"d3-svg-legend\";\r\n\r\nclass OtherLevelMapLegend extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.legend = React.createRef();\r\n  }\r\n\r\n  formatLegendLabel(t) {\r\n    if (t >= 1000) {\r\n      let num = d3.format(\".2s\")(t);\r\n      let abbr = num.slice(-1);\r\n      if (abbr === \"G\") {\r\n        num = num.substring(0, num.length - 1) + \"B\";\r\n      }\r\n      return num;\r\n    } else {\r\n      return d3.format(\".3\")(t);\r\n    }\r\n  }\r\n  render() {\r\n    const map_fill = this.props.map_fill;\r\n    let fill_scale = d3.scaleThreshold().range(map_fill);\r\n    let domainArr = this.props.data.map((e) => e.value).sort((a, b) => a - b);\r\n    fill_scale.domain(\r\n      d3\r\n        .range(map_fill.length - 1)\r\n        .map((d) => d3.quantile(domainArr, (d + 1) / map_fill.length))\r\n    );\r\n\r\n    let legend = d3_legend\r\n      .legendColor()\r\n      .scale(fill_scale)\r\n      .shape(\"rect\")\r\n      .shapeWidth(90)\r\n      .shapeHeight(10)\r\n      .shapePadding(0)\r\n      .labelOffset(10)\r\n      .orient(\"horizontal\")\r\n      .scale(fill_scale)\r\n      .labelFormat(d3.format(\".3f\"))\r\n      .labelAlign(\"start\")\r\n      .labels((d) => {\r\n        if (d.i === 0) {\r\n          return 0;\r\n        } else {\r\n          let label_str = d.generatedLabels[d.i - 1].split(\" \");\r\n          return label_str[label_str.length - 1];\r\n        }\r\n      });\r\n\r\n    return (\r\n      <svg style={{display:\"block\", margin: \"0 auto\"}} width={this.props.width} height={this.props.height}>\r\n        <g\r\n          ref={(node) =>\r\n            d3\r\n              .select(node)\r\n              .call(legend)\r\n              .selectAll(\"text\")\r\n              .text(this.formatLegendLabel)\r\n          }\r\n        ></g>\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OtherLevelMapLegend;\r\n","import React, { Component } from \"react\";\r\nimport ToggleButtonGroup from \"react-bootstrap/ToggleButtonGroup\";\r\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\r\n\r\nimport * as d3 from \"d3\";\r\nclass OtherLevelBarchart extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.barchart = React.createRef();\r\n    this.axis_x = React.createRef();\r\n    this.axis_y = React.createRef();\r\n    this.axis_x_title = React.createRef();\r\n    this.tooltip = React.createRef();\r\n    this.state = {\r\n      sort_by: \"alphabet\",\r\n    };\r\n  }\r\n\r\n  formatXaxis(d) {\r\n    if (d >= 1000) {\r\n      let num = d3.format(\".2s\")(d);\r\n      let abbr = num.slice(-1);\r\n      if (abbr === \"G\") {\r\n        num = num.substring(0, num.length - 1) + \"B\";\r\n      }\r\n      let chars1 = num.slice(-3);\r\n      let chars2 = chars1.substring(0, 2);\r\n      if (chars2 === \".0\") {\r\n        num = num.slice(0, -3) + num.slice(-1);\r\n        return num;\r\n      }\r\n      return num;\r\n    } else if (d >= 1 && d < 10) {\r\n      return d3.format(\".2\")(d);\r\n    } else if (d < 1) {\r\n      return d3.format(\".3\")(d);\r\n    } else {\r\n      return d3.format(\".0f\")(d);\r\n    }\r\n  }\r\n\r\n  formatNumber(d) {\r\n    if (d < 1) {\r\n      return d3.format(\".3f\")(d);\r\n    } else if (d >= 1000000) {\r\n      return d3.format(\",.0f\")(d);\r\n    } else {\r\n      return isNaN(d) ? \"\" : d3.format(\",.2f\")(Math.floor(d * 100) / 100);\r\n    }\r\n  }\r\n\r\n  formatLabel(d) {\r\n    if (d >= 1000000) {\r\n      var num = d3.format(\".2s\")(d);\r\n      var abbr = num.slice(-1);\r\n      if (abbr === \"G\") {\r\n        num = num.substring(0, num.length - 1) + \"B\";\r\n      }\r\n      var chars1 = num.slice(-3);\r\n      var chars2 = chars1.substring(0, 2);\r\n      if (chars2 === \".0\") {\r\n        num = num.slice(0, -3) + num.slice(-1);\r\n        return num;\r\n      }\r\n      return num;\r\n    } else if (d >= 1 && d < 10) {\r\n      return d3.format(\".2\")(d);\r\n    } else if (d < 1) {\r\n      return d3.format(\".3\")(d);\r\n    } else {\r\n      return isNaN(d) ? \"\" : d3.format(\",.0f\")(d);\r\n    }\r\n  }\r\n\r\n  initView(by) {\r\n    // scale\r\n    let marginTop = 40,\r\n      marginBottom = 0,\r\n      marginRight = 60,\r\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\r\n    let barFillScale = d3.scaleThreshold().range(this.props.map_fill),\r\n      barXScale = d3\r\n        .scaleLinear()\r\n        .range([0, this.props.width - marginLeft - marginRight])\r\n        .domain(d3.extent(this.props.data, (e) => e.value)),\r\n      barYScale = d3\r\n        .scaleBand()\r\n        .range([0, this.props.height - marginTop - marginBottom])\r\n        .domain(this.props.data.map((d) => d.name))\r\n        .paddingInner(0.1)\r\n        .paddingOuter(0.2);\r\n\r\n    // update scale domain\r\n    let domainArr = this.props.data.map((e) => e.value).sort((a, b) => a - b);\r\n    barFillScale.domain(\r\n      d3\r\n        .range(this.props.map_fill.length - 1)\r\n        .map((d) => d3.quantile(domainArr, (d + 1) / this.props.map_fill.length))\r\n    );\r\n\r\n    // bars\r\n    d3.select(this.barchart.current).selectAll(\"g\").remove();\r\n    let bars = d3\r\n      .select(this.barchart.current)\r\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\r\n      .append(\"g\")\r\n      .selectAll(\"g\")\r\n      .data(this.props.data)\r\n      .enter()\r\n      .append(\"g\")\r\n      .attr(\"class\", d=>\"bars mouseover_target barchart_mouseover_target\" + \" region_\" + d.id)\r\n      .attr(\"transform\", (d) => \"translate(0,\" + barYScale(d.name) + \")\");\r\n\r\n    bars\r\n      .append(\"rect\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", 0)\r\n      .attr(\"width\", (d) => barXScale(d.value))\r\n      .attr(\"height\", barYScale.bandwidth())\r\n      .style(\"fill\", (d) => barFillScale(d.value));\r\n\r\n    bars\r\n      .append(\"text\")\r\n      .attr(\"class\", \"labels\")\r\n      .attr(\"x\", (d) => barXScale(d.value))\r\n      .attr(\"y\", 0)\r\n      .attr(\"dx\", 5)\r\n      .attr(\"dy\", barYScale.bandwidth() / 2 + 5)\r\n      .text((d) => this.formatLabel(d.value))\r\n      .style(\"font-size\", \"0.8em\")\r\n      .style(\"fill\", \"#000\")\r\n      .style(\"stroke\", \"none\");\r\n\r\n    // axis\r\n    d3.select(this.axis_x.current).selectAll(\"g\").remove();\r\n    d3.select(this.axis_x.current)\r\n      .attr(\"class\", \"axis_x\")\r\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\r\n      .call(d3.axisTop(barXScale).ticks(5).tickFormat(this.formatXaxis))\r\n      .selectAll(\"text\")\r\n      .attr(\"transform\", \"rotate(-30)\");\r\n\r\n    d3.select(this.axis_x_title.current)\r\n      .attr(\r\n        \"transform\",\r\n        \"translate(\" +\r\n          (this.props.width - marginRight + 5) +\r\n          \",\" +\r\n          marginTop +\r\n          \")\"\r\n      )\r\n      .style(\"fill\", \"#000\")\r\n      .style(\"text-anchor\", \"start\")\r\n      .style(\"stroke\", \"none\")\r\n      .style(\"font-size\", \"0.75em\")\r\n      .text(this.props.unit);\r\n\r\n    d3.select(this.axis_y.current).selectAll(\"g\").remove();\r\n    d3.select(this.axis_y.current)\r\n      .attr(\"transform\", \"translate(\" + marginLeft + \",\" + marginTop + \")\")\r\n      .attr(\"class\", \"axis_y\")\r\n      .call(d3.axisLeft(barYScale))\r\n      .selectAll('.tick')\r\n      .attr('class', d=>'tick mouseover_target barchart_mouseover_target region_'+ this.props.data.filter(e=>e.name===d).map(e=>e.id)[0]);\r\n    \r\n    d3.selectAll('.barchart_mouseover_target')\r\n    .on('mouseover', d=>{\r\n      d3.select(this.tooltip.current)\r\n      .transition()\r\n      .duration(100)\r\n      .style(\"opacity\", 1);\r\n    })\r\n    .on('mousemove', d=>{\r\n      let html, id;\r\n      if (typeof(d)===\"object\") {\r\n        id = d.id;\r\n        html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d.name + \"</b><br>is <b>\" + d.value + \" \" + d.unit + \"</b>.</span>\";\r\n      } else if (typeof(d)===\"string\") {\r\n        id = this.props.data.filter(e=>e.name===d).map(e=>e.id)[0];\r\n        html = \"<span>The <b>\"+ this.props.title.slice(0,1).toLowerCase() + this.props.title.slice(1).split(' (')[0] + \"</b><br>for <b>\" + d + \"</b><br>is <b>\" + this.props.data.filter(e=>e.name===d).map(e=>e.value)[0] + \" \" + this.props.data.filter(e=>e.name===d).map(e=>e.unit)[0] + \"</b>.</span>\";\r\n      }\r\n      \r\n      d3.select(this.tooltip.current)\r\n      .html(html)\r\n      .style(\"position\", \"absolute\")\r\n      .style(\"top\", (d3.event.pageY+25) + \"px\")\r\n      .style(\"left\", (d3.event.pageX-500) + \"px\")\r\n      .style(\"opacity\", 1);\r\n\r\n      d3.selectAll('.mouseover_target rect').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n      d3.selectAll('.mouseover_target text').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n      d3.selectAll('path.mouseover_target').classed('deemphasized', true).style(\"opacity\", 0.5).style(\"transition\", \"opacity 0.5s\");\r\n\r\n      d3.selectAll('.region_'+id+' rect').classed('selected', true).style(\"stroke\", \"#000\").style(\"stroke-width\", 1).style(\"opacity\", 1);\r\n      d3.selectAll('.region_'+id+' text').classed('selected', true).style(\"font-weight\", \"bold\").style(\"opacity\", 1);\r\n      d3.selectAll('path.region_'+id).classed('selected', true).style(\"stroke-width\", 1).style(\"opacity\", 1);\r\n    })\r\n    .on('mouseout', d=>{\r\n      let id;\r\n      if (typeof(d)===\"object\") {\r\n        id = d.id;\r\n      } else if (typeof(d)===\"string\") {\r\n        id = this.props.data.filter(e=>e.name===d).map(e=>e.id)[0];\r\n      }\r\n      d3.select(this.tooltip.current)\r\n      .transition()\r\n      .duration(500)\r\n      .style(\"opacity\", 0);\r\n\r\n      d3.selectAll('.deemphasized').classed('deemphasized', false).style(\"opacity\", 1).style(\"transition\", \"opacity 0.5s\");\r\n\r\n      d3.selectAll('.region_'+id+' rect').classed('selected', false).style(\"stroke\", \"none\");\r\n      d3.selectAll('.region_'+id+' text').classed('selected', false).style(\"font-weight\", \"normal\");\r\n      d3.selectAll('path.region_'+id).classed('selected', false).style(\"stroke-width\", 0.5);\r\n    });\r\n\r\n    this.updateView(by);\r\n  }\r\n\r\n  updateView(by) {\r\n    let marginTop = 40,\r\n      marginBottom = 0;\r\n    let barYScale = d3\r\n      .scaleBand()\r\n      .range([0, this.props.height - marginTop - marginBottom])\r\n      .domain(\r\n        this.props.data\r\n          .sort((a, b) =>\r\n            by === \"amount\"\r\n              ? d3.descending(a.value, b.value)\r\n              : d3.ascending(a.name, b.name)\r\n          )\r\n          .map((d) => d.name)\r\n      )\r\n      .paddingInner(0.1)\r\n      .paddingOuter(0.2);\r\n\r\n    d3.select(this.barchart.current)\r\n      .selectAll(\".bars\")\r\n      .transition()\r\n      .attr(\"transform\", (d) => \"translate(0,\" + barYScale(d.name) + \")\");\r\n\r\n    d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initView(this.state.sort_by);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.initView(this.state.sort_by);\r\n    } else {\r\n      if (this.state.sort_by !== prevState.sort_by) {\r\n        this.updateView(this.state.sort_by);\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <input type=\"button\" value={\"alphabet\"} onChange={(val) => this.setState({ sort_by: val })}/>\r\n        <input type=\"button\" value={\"amount\"} onChange={(val) => this.setState({ sort_by: val })}/>\r\n\r\n        <p\r\n        style={{\r\n          fontSize: \"1em\",\r\n          fontWeight: \"bold\",\r\n          fill: \"#000\",\r\n          className: \"title\",\r\n          textAnchor: \"middle\",\r\n          padding: \"10px\"\r\n        }}\r\n      >\r\n        {\"US: \" +\r\n          this.formatNumber(this.props.us_data[0][this.props.field]) +\r\n          \"(\" +\r\n          this.props.unit +\r\n          \")\"}\r\n      </p>\r\n        <svg style={{display:\"block\", margin: \"0 auto\"}} width={this.props.width} height={this.props.height}>\r\n          <g className={\"axis\"}>\r\n            <g ref={this.axis_x}></g>\r\n            <text ref={this.axis_x_title}></text>\r\n            <g ref={this.axis_y}></g>\r\n          </g>\r\n\r\n          <g ref={this.barchart}></g>\r\n        </svg>\r\n        <div\r\n          ref={this.tooltip}\r\n          style={{\r\n            opacity: 0,\r\n            maxWidth: 400,\r\n            maxHeight: 520,\r\n            padding: 5,\r\n            overflow: \"auto\",\r\n            backgroundColor: \"rgba(255,255,255,0.95)\",\r\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\r\n            borderRadius: \"4px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OtherLevelBarchart;\r\n","import React, { Component } from \"react\";\r\nimport Table from \"react-bootstrap/Table\";\r\n\r\nclass UpdatedTable extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.title.startsWith(\"Resource Mix\") ? (\r\n          <Table striped bordered hover responsive=\"sm\">\r\n            <thead>\r\n              <tr style={{lineHeight: 1}}>\r\n                <th>Generation by Fuel Type</th>\r\n                {this.props.region !== \"US\" && (\r\n                  <th>\r\n                    {this.props.region}\r\n                    {\" Resource Mix (%)\"}\r\n                  </th>\r\n                )}\r\n                <th>US Resource Mix (%)</th>\r\n              </tr>\r\n            </thead>\r\n            {this.props.title === \"Resource Mix by all fuel types\" && (\r\n              <tbody>\r\n                {+this.props.table_info.COAL !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"COAL\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Coal</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.COAL}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_COAL}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.OIL !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"OIL\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Oil</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.OIL}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_OIL}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.GAS !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"GAS\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Gas</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.GAS}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_GAS}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.NUCLEAR !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"NUCLEAR\" ? \"bold\" : \"normal\"}}\r\n                  >\r\n                    <td>Nuclear</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.NUCLEAR}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_NUCLEAR}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.HYDRO !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"HYDRO\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Hydro</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.HYDRO}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_HYDRO}</td>\r\n                  </tr>\r\n                )}\r\n\r\n                {+this.props.table_info.BIOMASS !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"BIOMASS\" ? \"bold\" : \"normal\"}}\r\n                  >\r\n                    <td>Biomass</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.BIOMASS}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_BIOMASS}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.WIND !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"WIND\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Wind</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.WIND}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_WIND}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.SOLAR !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"SOLAR\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Solar</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.SOLAR}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_SOLAR}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.GEOTHERMAL !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"GEOTHERMAL\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Geothermal</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.GEOTHERMAL}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_GEOTHERMAL}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.OFSL !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"OFSL\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Other Fossil</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.OFSL}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_OFSL}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.OTHF !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"OTHF\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Other Unknown/Purchased Fuel</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.OTHF}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_OTHF}</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            )}\r\n            {this.props.title ===\r\n              \"Resource Mix by renewable vs. non-renewable fuels\" && (\r\n              <tbody>\r\n                {+this.props.table_info.HYDRO !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"HYDRO\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Hydro</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.HYDRO}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_HYDRO}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.TNPR !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"TNPR\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Total Nonrenewables</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.TNPR}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_TNPR}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.THPR !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"THPR\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Total Nonhydro Renewables</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.THPR}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_THPR}</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            )}\r\n            {this.props.title ===\r\n              \"Resource Mix by combustible vs. non-combustible fuels\" && (\r\n              <tbody>\r\n                {+this.props.table_info.CYPR !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"CYPR\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Total Combustion</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.CYPR}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_CYPR}</td>\r\n                  </tr>\r\n                )}\r\n                {+this.props.table_info.CNPR !== 0 && (\r\n                  <tr style={{lineHeight: 1, fontWeight: this.props.type === \"CNPR\" ? \"bold\" : \"normal\"}}>\r\n                    <td>Total Noncumbustion</td>\r\n                    {this.props.region !== \"US\" && (\r\n                      <td>{this.props.table_info.CNPR}</td>\r\n                    )}\r\n                    <td>{this.props.table_info.US_CNPR}</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            )}\r\n          </Table>\r\n        ) : (\r\n          <Table striped bordered hover responsive=\"sm\">\r\n            <thead>\r\n              <tr style={{lineHeight: 1}}>\r\n                <th>Plant Name</th>\r\n                <th>{this.props.table_info.PNAME}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Facility ID</td>\r\n                <td>{this.props.table_info.ORISPL}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Plant State</td>\r\n                <td>{this.props.table_info.PSTATABB}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>eGRID Subregion</td>\r\n                <td>\r\n                  <a href=\"https://www.epa.gov/sites/production/files/styles/large/public/2020-03/2018_egrid_subregions.png\">\r\n                    {this.props.table_info.SUBRGN}\r\n                  </a>\r\n                </td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Plant Primary Fuel</td>\r\n                <td>{this.props.table_info.PLPRMFL}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Nameplate Capacity (MW)</td>\r\n                <td>{this.props.table_info.NAMEPCAP}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Plant Capacity Factor</td>\r\n                <td>{this.props.table_info.CAPFAC}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Generation (MWh)</td>\r\n                <td>{this.props.table_info.PLNGENAN}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>Heat Input (MMBtu)</td>\r\n                <td>{this.props.table_info.PLHTIANT}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>NOₓ Annual Emissions (tons)</td>\r\n                <td>{this.props.table_info.PLNOXAN}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>NOₓ Annual Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLNOXRTA}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>NOₓ Ozone Season Emissions (tons)</td>\r\n                <td>{this.props.table_info.PLNOXOZ}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>NOₓ Ozone Season Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLNOXRTO}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>SO₂ Annual Emissions (tons)</td>\r\n                <td>{this.props.table_info.PLSO2AN}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>SO₂ Annual Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLSO2RTA}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>CO₂ Annual Emissions (tons)</td>\r\n                <td>{this.props.table_info.PLCO2AN}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>CO₂ Annual Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLCO2RTA}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>CH₄ Annual Emissions (lbs)</td>\r\n                <td>{this.props.table_info.PLCH4AN}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>CH₄ Annual Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLCH4RTA}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>N₂O Annual Emissions (lbs)</td>\r\n                <td>{this.props.table_info.PLN2OAN}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>N₂O Annual Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLN2ORTA}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>CO₂ equivalent Annual Emissions (tons)</td>\r\n                <td>{this.props.table_info.PLCO2EQA}</td>\r\n              </tr>\r\n              <tr style={{lineHeight: 1}}>\r\n                <td>CO₂ equivalent Output Emission Rate (lb/MWh)</td>\r\n                <td>{this.props.table_info.PLC2ERTA}</td>\r\n              </tr>\r\n            </tbody>\r\n          </Table>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UpdatedTable;\r\n","import React, { Component } from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3_composite from \"d3-composite-projections\";\r\n\r\nimport UpdatedTable from \"./Table\";\r\n\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1Ijoia2F0aWVsb25nIiwiYSI6ImNpenpudmY1dzAxZmYzM2tmY2tobDN1MXoifQ._aoE2Zj7vx3dUlZw-gBCrg\";\r\n\r\nclass PlantLevelMapZoom extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.fuels = React.createRef();\r\n    this.legend = React.createRef();\r\n    this.state = {\r\n      selected_fuel: [],\r\n    };\r\n\r\n    this.field_factor_divided_by = 8;\r\n    this.max_radius = 72;\r\n    this.max_radius_before_remove = 24;\r\n    this.zoom_factor = this.max_radius / this.field_factor_divided_by;\r\n    this.legend_len = 6;\r\n    this.legend_percentile = [0.1, 0.5, 0.8, 0.95, 0.98, 1];\r\n\r\n    this.filter_text = \"Filter by Primary Fuel\";\r\n    this.filter_reset_text = \"Show All Fuels\";\r\n  }\r\n\r\n  formatLegend(d) {\r\n    if (d >= 1000) {\r\n      let num = d3.format(\".2s\")(d);\r\n      let abbr = num.slice(-1);\r\n      if (abbr === \"G\") {\r\n        num = num.substring(0, num.length - 1) + \"B\";\r\n      }\r\n      let chars1 = num.slice(-3);\r\n      let chars2 = chars1.substring(0, 2);\r\n      if (chars2 === \".0\") {\r\n        num = num.slice(0, -3) + num.slice(-1);\r\n        return num;\r\n      }\r\n      return num;\r\n    } else if (d >= 1 && d < 10) {\r\n      return d3.format(\".2\")(d);\r\n    } else if (d < 1) {\r\n      return d3.format(\".3\")(d);\r\n    } else {\r\n      return d3.format(\".0f\")(d);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.field !== prevProps.field) {\r\n      // filter\r\n      let w = d3.select(this.fuels.current).node().clientWidth,\r\n        h = d3.select(this.fuels.current).node().clientHeight;\r\n      let nbox = this.props.fuels.length + 1;\r\n      let boxlen = w / nbox;\r\n\r\n      d3.selectAll(\".fuels_selection\").selectAll(\"div\").remove();\r\n      let fuels = d3\r\n        .selectAll(\".fuels_selection\")\r\n        .append(\"div\")\r\n        .attr(\"class\", \"fuels\")\r\n        .selectAll(\"div\")\r\n        .data(this.props.fuels)\r\n        .enter()\r\n        .append(\"div\")\r\n        .attr(\"class\", \"fuel\")\r\n        .style(\"display\", \"inline-block\")\r\n        .style(\"cursor\", \"pointer\")\r\n        .style(\"margin\", 0)\r\n        .style(\"border-radius\", \"5px\");\r\n\r\n      let fuels_svg = fuels\r\n        .append(\"svg\")\r\n        .attr(\"width\", boxlen)\r\n        .attr(\"height\", h);\r\n\r\n      fuels_svg\r\n        .append(\"circle\")\r\n        .attr(\"r\", Math.min(boxlen, h * 0.5) / 4)\r\n        .attr(\"fill\", (d) => this.props.fuel_color_lookup[d])\r\n        .attr(\"cx\", boxlen / 2)\r\n        .attr(\"cy\", Math.min(boxlen, h * 0.5) / 2);\r\n\r\n      fuels_svg\r\n        .append(\"text\")\r\n        .attr(\"x\", boxlen / 2)\r\n        .attr(\"y\", Math.min(boxlen, h * 0.5) * 1.5)\r\n        .attr(\"dx\", 0)\r\n        .attr(\"dy\", 0)\r\n        .text((d) => this.props.fuel_label_lookup[d])\r\n        .style(\"text-anchor\", \"middle\")\r\n        .call(this.props.wrap_long_labels, boxlen);\r\n\r\n      d3.select(\".fuels\")\r\n        .insert(\"div\", \".fuel\")\r\n        .style(\"display\", \"inline-block\")\r\n        .attr(\"class\", \"reset\")\r\n        .style(\"opacity\", 0.5)\r\n        .style(\"cursor\", \"not-allowed\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", boxlen)\r\n        .attr(\"height\", h)\r\n        .append(\"text\")\r\n        .attr(\"x\", 0)\r\n        .attr(\"y\", Math.min(boxlen, h * 0.5) / 2)\r\n        .attr(\"dx\", 0)\r\n        .attr(\"dy\", 0)\r\n        .text(this.filter_text)\r\n        .style(\"text-anchor\", \"start\")\r\n        .style(\"font-weight\", \"bold\")\r\n        .style(\"font-size\", \"1.2em\")\r\n        .call(this.props.wrap_long_labels, boxlen);\r\n\r\n      d3.selectAll(\".fuel\")\r\n        .on(\"click\", (d) => {\r\n          let n = d3\r\n            .select(this.fuels.current)\r\n            .selectAll(\".fuel\")\r\n            .filter((e) => e === d);\r\n          if (this.map.loaded()) {\r\n            if (n.classed(\"selected\")) {\r\n              this.setState({\r\n                selected_fuel: this.state.selected_fuel.filter((e) => e !== d),\r\n              });\r\n            } else {\r\n              this.setState({\r\n                selected_fuel: this.state.selected_fuel.concat(d),\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .on(\"mouseover\", (d) => {\r\n          let n = d3\r\n            .select(this.fuels.current)\r\n            .selectAll(\".fuel\")\r\n            .filter((e) => e === d);\r\n          if (this.map.loaded()) {\r\n            if (!n.classed(\"selected\")) {\r\n              n.style(\"background\", \"#eee\");\r\n            }\r\n          }\r\n        })\r\n        .on(\"mouseout\", (d) => {\r\n          let n = d3\r\n            .select(this.fuels.current)\r\n            .selectAll(\".fuel\")\r\n            .filter((e) => e === d);\r\n          if (this.map.loaded()) {\r\n            if (!n.classed(\"selected\")) {\r\n              n.style(\"background\", \"none\");\r\n            } else {\r\n              n.style(\"background\", \"#ddd\");\r\n            }\r\n          }\r\n        });\r\n\r\n      if (this.map.loaded()) {\r\n        const data = {\r\n          type: \"FeatureCollection\",\r\n          features: this.props.plant_data.features\r\n            .filter((d) => d.properties[this.props.field] > 0)\r\n            .map((d) => {\r\n              if (\r\n                d.properties[this.props.field] >=\r\n                this.props.plant_outlier[this.props.field]\r\n              ) {\r\n                d.properties[this.props.field] = this.props.plant_outlier[\r\n                  this.props.field\r\n                ];\r\n              }\r\n              return d;\r\n            }),\r\n        };\r\n        this.map.getSource(\"plants\").setData(data);\r\n        this.setRadius(data.features);\r\n\r\n        d3.selectAll(\".fuels_selection\")\r\n          .select(\".reset\")\r\n          .style(\"opacity\", 0.5)\r\n          .style(\"cursor\", \"not-allowed\");\r\n        d3.selectAll(\".fuels_selection\")\r\n          .select(\".reset text\")\r\n          .text(this.filter_text)\r\n          .call(\r\n            this.props.wrap_long_labels,\r\n            d3.select(\".fuels_selection\").node().clientWidth /\r\n              (this.props.fuels.length + 1)\r\n          );\r\n        d3.selectAll(\".selected\")\r\n          .classed(\"selected\", false)\r\n          .style(\"background\", \"none\");\r\n\r\n        this.map.on(\"zoom\", \"plants\", () => {\r\n          let features = data.features;\r\n          let factor =\r\n            d3.max(features.map((d) => d.properties[this.props.field])) /\r\n            this.field_factor_divided_by;\r\n          this.updateLegend(features, factor);\r\n        });\r\n      }\r\n    } else {\r\n      if (\r\n        JSON.stringify(this.state.selected_fuel) !==\r\n          JSON.stringify(prevState.selected_fuel) &&\r\n        this.state.selected_fuel.length !== 0\r\n      ) {\r\n        if (this.map.loaded()) {\r\n          const data = {\r\n            type: \"FeatureCollection\",\r\n            features: this.props.plant_data.features\r\n              .filter((d) => d.properties[this.props.field] > 0)\r\n              .filter(\r\n                (d) =>\r\n                  this.state.selected_fuel.indexOf(d.properties.FUEL) !== -1\r\n              )\r\n              .map((d) => {\r\n                if (\r\n                  d.properties[this.props.field] >=\r\n                  this.props.plant_outlier[this.props.field]\r\n                ) {\r\n                  d.properties[this.props.field] = this.props.plant_outlier[\r\n                    this.props.field\r\n                  ];\r\n                }\r\n                return d;\r\n              }),\r\n          };\r\n          this.map.getSource(\"plants\").setData(data);\r\n          this.setRadius(data.features);\r\n          d3.selectAll(\".selected\")\r\n            .classed(\"selected\", false)\r\n            .style(\"background\", \"none\");\r\n          d3.selectAll(\".fuels_selection\")\r\n            .select(\".reset\")\r\n            .style(\"opacity\", 1)\r\n            .style(\"cursor\", \"pointer\")\r\n            .on(\"click\", (d) => {\r\n              this.setState({ selected_fuel: [] });\r\n            });\r\n\r\n          d3.selectAll(\".fuels_selection\")\r\n            .select(\".reset text\")\r\n            .text(this.filter_reset_text)\r\n            .call(\r\n              this.props.wrap_long_labels,\r\n              d3.select(this.fuels.current).node().clientWidth /\r\n                (this.props.fuels.length + 1)\r\n            );\r\n\r\n          d3.selectAll(\".fuels_selection\")\r\n            .selectAll(\".fuel\")\r\n            .filter((d) => this.state.selected_fuel.indexOf(d) !== -1)\r\n            .classed(\"selected\", true)\r\n            .style(\"background\", \"#ddd\");\r\n\r\n          this.map.on(\"zoom\", \"plants\", () => {\r\n            let features = data.features;\r\n            let factor =\r\n              d3.max(features.map((d) => d.properties[this.props.field])) /\r\n              this.field_factor_divided_by;\r\n            this.updateLegend(features, factor);\r\n          });\r\n        }\r\n      } else if (\r\n        JSON.stringify(this.state.selected_fuel) !==\r\n          JSON.stringify(prevState.selected_fuel) &&\r\n        this.state.selected_fuel.length === 0\r\n      ) {\r\n        if (this.map.loaded()) {\r\n          const data = {\r\n            type: \"FeatureCollection\",\r\n            features: this.props.plant_data.features\r\n              .filter((d) => d.properties[this.props.field] > 0)\r\n              .map((d) => {\r\n                if (\r\n                  d.properties[this.props.field] >=\r\n                  this.props.plant_outlier[this.props.field]\r\n                ) {\r\n                  d.properties[this.props.field] = this.props.plant_outlier[\r\n                    this.props.field\r\n                  ];\r\n                }\r\n                return d;\r\n              }),\r\n          };\r\n          this.map.getSource(\"plants\").setData(data);\r\n          this.setRadius(data.features);\r\n\r\n          d3.selectAll(\".fuels_selection\")\r\n            .select(\".reset\")\r\n            .style(\"opacity\", 0.5)\r\n            .style(\"cursor\", \"not-allowed\");\r\n          d3.selectAll(\".fuels_selection\")\r\n            .select(\".reset text\")\r\n            .text(this.filter_text)\r\n            .call(\r\n              this.props.wrap_long_labels,\r\n              d3.select(\".fuels_selection\").node().clientWidth /\r\n                (this.props.fuels.length + 1)\r\n            );\r\n          d3.selectAll(\".selected\")\r\n            .classed(\"selected\", false)\r\n            .style(\"background\", \"none\");\r\n\r\n          this.map.on(\"zoom\", \"plants\", () => {\r\n            let features = data.features;\r\n            let factor =\r\n              d3.max(features.map((d) => d.properties[this.props.field])) /\r\n              this.field_factor_divided_by;\r\n            this.updateLegend(features, factor);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    let init_zoom = this.props.init_zoom,\r\n      init_center = this.props.init_center;\r\n\r\n    // set up map\r\n    this.map = new mapboxgl.Map({\r\n      container: this.container,\r\n      style: \"mapbox://styles/mapbox/light-v10?optimize=true\",\r\n      center: init_center,\r\n      zoom: init_zoom,\r\n      minzoom: this.props.min_zoom,\r\n      maxzoom: this.props.max_zoom,\r\n    });\r\n    this.map.addControl(new mapboxgl.NavigationControl());\r\n    this.map.addControl(new mapboxgl.FullscreenControl());\r\n\r\n    class ResetControl {\r\n      onAdd(map) {\r\n        this._map = map;\r\n        this._container = document.createElement(\"div\");\r\n        this._container.className = \"mapboxgl-ctrl\";\r\n        this._container.innerHTML =\r\n          \"<span class='mapboxgl-ctrl-icon' aria-haspopup='true' title='zoom to national view'><img src='/eGrid_2018_v2/reset_view_icon.png' alt='reset_view' width=29 height=29 style='border-radius: 4px'></img></span>\";\r\n        this._container.style.borderRadius = \"4px\";\r\n        this._container.style.boxShadow = \"0 0 0 2px rgba(0,0,0,.1)\";\r\n        this._container.style.cursor = \"pointer\";\r\n        this._container.onclick = function () {\r\n          map.flyTo({ center: init_center, zoom: init_zoom });\r\n        };\r\n        return this._container;\r\n      }\r\n      onRemove() {\r\n        this._container.parentNode.removeChild(this._container);\r\n        this._map = undefined;\r\n      }\r\n    }\r\n    this.map.addControl(new ResetControl());\r\n\r\n    class LayerControl {\r\n      onAdd(map) {\r\n        this._map = map;\r\n        this._container = document.createElement(\"div\");\r\n        this._container.className = \"mapboxgl-ctrl\";\r\n        this._container.innerHTML =\r\n          \"<span class='mapboxgl-ctrl-group' style='padding: 10px;' aria-haspopup='true' title='change layers'><input id='light-v10' type='radio' name='rtoggle' value='light' checked='checked'/><label for='light'>light</label><input id='satellite-v9' type='radio' name='rtoggle' value='satellite' /><label for='satellite'>satellite</label></span>\";\r\n\r\n        d3.select(this._container)\r\n          .selectAll(\"input\")\r\n          .nodes()\r\n          .map((n) => {\r\n            n.onclick = function () {\r\n              if (map.loaded()) {\r\n                // map.setStyle(\"mapbox://styles/mapbox/\" + n.id);\r\n              }\r\n            };\r\n          });\r\n        return this._container;\r\n      }\r\n\r\n      onRemove() {\r\n        this._container.parentNode.removeChild(this._container);\r\n        this._map = undefined;\r\n      }\r\n    }\r\n    // this.map.addControl(new LayerControl());\r\n\r\n    class Legend {\r\n      onAdd(map) {\r\n        this._map = map;\r\n        this._container = document.createElement(\"div\");\r\n        this._container.className = \"mapboxgl-ctrl\";\r\n        this._container.innerHTML =\r\n          \"<div class='mapboxgl-ctrl-group' aria-haspopup='true'><div><span id='legend_title'></span></div><div><svg id='legend' style='width:300px;height:80px;'></svg></div></div>\";\r\n\r\n        return this._container;\r\n      }\r\n\r\n      onRemove() {\r\n        this._container.parentNode.removeChild(this._container);\r\n        this._map = undefined;\r\n      }\r\n    }\r\n    this.map.addControl(new Legend(), \"bottom-right\");\r\n\r\n    d3.selectAll(\".mapboxgl-ctrl-group button\")\r\n    .style(\"margin\", 0)\r\n    .style(\"padding\", 0);\r\n\r\n    d3.select(\".mapboxgl-ctrl-compass\").style(\"display\", \"none\");\r\n\r\n    this.map.on(\"load\", () => {\r\n      const data = {\r\n        type: \"FeatureCollection\",\r\n        features: this.props.plant_data.features\r\n          .filter((d) => d.properties[this.props.field] > 0)\r\n          .map((d) => {\r\n            if (\r\n              d.properties[this.props.field] >=\r\n              this.props.plant_outlier[this.props.field]\r\n            ) {\r\n              d.properties[this.props.field] = this.props.plant_outlier[\r\n                this.props.field\r\n              ];\r\n            }\r\n            return d;\r\n          }),\r\n      };\r\n\r\n      this.map.addSource(\"plants\", {\r\n        type: \"geojson\",\r\n        data: data,\r\n      });\r\n\r\n      this.map.addLayer({\r\n        id: \"plants\",\r\n        type: \"circle\",\r\n        source: \"plants\",\r\n        paint: {\r\n          \"circle-stroke-width\": 1,\r\n          \"circle-stroke-color\": [\r\n            \"case\",\r\n            [\"boolean\", [\"feature-state\", \"hover\"], false],\r\n            \"#000\",\r\n            [\r\n              \"match\",\r\n              [\"get\", \"FUEL\"],\r\n              \"COAL\",\r\n              this.props.fuel_color_lookup.COAL,\r\n              \"OIL\",\r\n              this.props.fuel_color_lookup.OIL,\r\n              \"GAS\",\r\n              this.props.fuel_color_lookup.GAS,\r\n              \"NUCLEAR\",\r\n              this.props.fuel_color_lookup.NUCLEAR,\r\n              \"HYDRO\",\r\n              this.props.fuel_color_lookup.HYDRO,\r\n              \"BIOMASS\",\r\n              this.props.fuel_color_lookup.BIOMASS,\r\n              \"WIND\",\r\n              this.props.fuel_color_lookup.WIND,\r\n              \"SOLAR\",\r\n              this.props.fuel_color_lookup.SOLAR,\r\n              \"GEOTHERMAL\",\r\n              this.props.fuel_color_lookup.GEOTHERMAL,\r\n              \"OFSL\",\r\n              this.props.fuel_color_lookup.OFSL,\r\n              \"OTHF\",\r\n              this.props.fuel_color_lookup.OTHF,\r\n              \"#000\",\r\n            ],\r\n          ],\r\n          \"circle-opacity\": this.props.circle_opacity,\r\n          \"circle-color\": [\r\n            \"match\",\r\n            [\"get\", \"FUEL\"],\r\n            \"COAL\",\r\n            this.props.fuel_color_lookup.COAL,\r\n            \"OIL\",\r\n            this.props.fuel_color_lookup.OIL,\r\n            \"GAS\",\r\n            this.props.fuel_color_lookup.GAS,\r\n            \"NUCLEAR\",\r\n            this.props.fuel_color_lookup.NUCLEAR,\r\n            \"HYDRO\",\r\n            this.props.fuel_color_lookup.HYDRO,\r\n            \"BIOMASS\",\r\n            this.props.fuel_color_lookup.BIOMASS,\r\n            \"WIND\",\r\n            this.props.fuel_color_lookup.WIND,\r\n            \"SOLAR\",\r\n            this.props.fuel_color_lookup.SOLAR,\r\n            \"GEOTHERMAL\",\r\n            this.props.fuel_color_lookup.GEOTHERMAL,\r\n            \"OFSL\",\r\n            this.props.fuel_color_lookup.OFSL,\r\n            \"OTHF\",\r\n            this.props.fuel_color_lookup.OTHF,\r\n            \"#000\",\r\n          ],\r\n        },\r\n      });\r\n\r\n      this.setRadius(data.features);\r\n\r\n      // interaction: mousemove, mouseleave, click\r\n      let show_tooltip = false,\r\n        hoveredPlantId = null,\r\n        tooltip = new mapboxgl.Popup({\r\n          closeButton: false,\r\n          closeOnClick: false,\r\n          maxWidth: d3.select(this.fuels.current).node().clientWidth * 0.7,\r\n        }).on(\"close\", () => {\r\n          tooltip.options.closeButton = false;\r\n          tooltip.options.anchor = \"bottom\";\r\n          show_tooltip = false;\r\n        });\r\n\r\n      this.map.on(\"mousemove\", \"plants\", (d) => {\r\n        if (!show_tooltip) {\r\n          if (d.features.length > 0) {\r\n            if (hoveredPlantId) {\r\n              this.map.setFeatureState(\r\n                { source: \"plants\", id: hoveredPlantId },\r\n                { hover: false }\r\n              );\r\n            }\r\n            hoveredPlantId = d.features[0].id;\r\n            this.map.setFeatureState(\r\n              { source: \"plants\", id: hoveredPlantId },\r\n              { hover: true }\r\n            );\r\n          }\r\n\r\n          this.map.getCanvas().style.cursor = \"pointer\";\r\n          tooltip\r\n            .setLngLat(d.features[0].geometry.coordinates.slice())\r\n            .setText(d.features[0].properties.name)\r\n            .addTo(this.map);\r\n        }\r\n      });\r\n\r\n      this.map.on(\"mouseleave\", \"plants\", () => {\r\n        if (!show_tooltip) {\r\n          this.map.getCanvas().style.cursor = \"\";\r\n          tooltip.remove();\r\n          if (hoveredPlantId) {\r\n            this.map.setFeatureState(\r\n              { source: \"plants\", id: hoveredPlantId },\r\n              { hover: false }\r\n            );\r\n          }\r\n          hoveredPlantId = null;\r\n        }\r\n      });\r\n\r\n      this.map.on(\"click\", \"plants\", (d) => {\r\n        if (\r\n          show_tooltip &&\r\n          d.features[0].geometry.coordinates.slice()[0] ===\r\n            tooltip.getLngLat().lng &&\r\n          d.features[0].geometry.coordinates.slice()[1] ===\r\n            tooltip.getLngLat().lat\r\n        ) {\r\n          tooltip.options.closeButton = false;\r\n          tooltip.options.anchor = \"bottom\";\r\n          show_tooltip = false;\r\n        } else {\r\n          if (d.features.length > 0) {\r\n            if (hoveredPlantId) {\r\n              this.map.setFeatureState(\r\n                { source: \"plants\", id: hoveredPlantId },\r\n                { hover: false }\r\n              );\r\n            }\r\n            hoveredPlantId = d.features[0].id;\r\n            this.map.setFeatureState(\r\n              { source: \"plants\", id: hoveredPlantId },\r\n              { hover: true }\r\n            );\r\n          }\r\n          let table_info = {};\r\n          Object.keys(d.features[0].properties).forEach((e) => {\r\n            table_info[e] = d.features[0].properties[e];\r\n          });\r\n          let description = renderToString(\r\n            <UpdatedTable title={this.props.title} table_info={table_info} />\r\n          );\r\n          tooltip.options.closeButton = true;\r\n          tooltip.options.anchor = \"left\";\r\n          tooltip\r\n            .setLngLat(d.features[0].geometry.coordinates.slice())\r\n            .setHTML(description)\r\n            .addTo(this.map);\r\n          show_tooltip = true;\r\n        }\r\n      });\r\n\r\n      this.map.on(\"zoom\", \"plants\", () => {\r\n        let features = data.features;\r\n        let factor =\r\n          d3.max(features.map((d) => d.properties[this.props.field])) /\r\n          this.field_factor_divided_by;\r\n        this.updateLegend(features, factor);\r\n      });\r\n    });\r\n  }\r\n\r\n  updateLegend(features, factor) {\r\n    let field_values, radius_values, scale;\r\n\r\n    // set up scale\r\n    field_values = features\r\n      .map((d) => d.properties[this.props.field])\r\n      .sort((a, b) => a - b);\r\n    radius_values = field_values\r\n      .map((d) =>\r\n        d3\r\n          .scaleLinear()\r\n          .domain([this.props.min_zoom, this.props.max_zoom])\r\n          .range([d / factor, (d / factor) * this.zoom_factor])(\r\n          this.map.getZoom()\r\n        )\r\n      )\r\n      .sort((a, b) => a - b);\r\n    scale = d3\r\n      .scaleLinear()\r\n      .domain(d3.extent(field_values))\r\n      .range(d3.extent(radius_values));\r\n\r\n    // draw legend\r\n    let w = d3.select(\"#legend\").node().clientWidth,\r\n      h = d3.select(\"#legend\").node().clientHeight;\r\n    let nbox = this.legend_len;\r\n    let boxlen = w / nbox;\r\n\r\n    d3.select(\"#legend\").selectAll(\"g\").remove();\r\n    d3.select(\"#legend_title\").html(this.props.title);\r\n\r\n    let legend_values =\r\n      field_values.length > 1\r\n        ? this.legend_percentile.map((d) => d3.quantile(field_values, d))\r\n        : field_values;\r\n\r\n    legend_values = legend_values.filter(\r\n      (d) => scale(d) <= this.max_radius_before_remove\r\n    );\r\n    let legend_cells = d3\r\n      .select(\"#legend\")\r\n      .append(\"g\")\r\n      .attr(\"width\", w)\r\n      .attr(\"height\", h)\r\n      .selectAll(\"g\")\r\n      .data(legend_values)\r\n      .enter()\r\n      .append(\"g\")\r\n      .attr(\"transform\", (d, i) => \"translate(\" + i * boxlen + \",\" + 5 + \")\");\r\n\r\n    legend_cells\r\n      .append(\"circle\")\r\n      .attr(\"r\", (d) => scale(d))\r\n      .attr(\"cx\", boxlen / 2)\r\n      .attr(\"cy\", Math.min(boxlen, h * 0.5) / 2);\r\n\r\n    legend_cells\r\n      .append(\"text\")\r\n      .attr(\"x\", boxlen / 2)\r\n      .attr(\r\n        \"y\",\r\n        Math.min(boxlen, h * 0.5) / 2 +\r\n          scale(legend_values[legend_values.length - 1]) +\r\n          10\r\n      )\r\n      .attr(\"dx\", 0)\r\n      .attr(\"dy\", 0)\r\n      .text((d) => this.formatLegend(d))\r\n      .style(\"text-anchor\", \"middle\");\r\n  }\r\n\r\n  updateStaticMap(features, factor) {\r\n    // add plants\r\n    let field_values, radius_values, scale;\r\n\r\n    // set up scale\r\n    field_values = features\r\n      .map((d) => d.properties[this.props.field])\r\n      .sort((a, b) => a - b);\r\n    radius_values = field_values\r\n      .map((d) =>\r\n        d3\r\n          .scaleLinear()\r\n          .domain([this.props.min_zoom, this.props.max_zoom])\r\n          .range([d / factor, (d / factor) * this.zoom_factor])(\r\n          this.map.getZoom()\r\n        )\r\n      )\r\n      .sort((a, b) => a - b);\r\n    scale = d3.scaleOrdinal().domain(field_values).range(radius_values);\r\n\r\n    // draw plants on static map\r\n    let w = d3.select(\".map_container\").node().clientWidth,\r\n      h = d3.select(\".map_container\").node().clientHeight;\r\n    let projection = d3_composite\r\n      .geoAlbersUsaTerritories()\r\n      .scale(this.props.static_map_scale)\r\n      .translate([w / 2, h / 2.5]);\r\n\r\n    d3.select(\".static_map\").selectAll(\"circle\").remove();\r\n    d3.select(\".static_map\")\r\n      .selectAll(\"circle\")\r\n      .data(features)\r\n      .enter()\r\n      .append(\"circle\")\r\n      .attr(\"cx\", (d) => projection(d.geometry.coordinates)[0])\r\n      .attr(\"cy\", (d) => projection(d.geometry.coordinates)[1])\r\n      .attr(\"r\", (d) => scale(d.properties[this.props.field]))\r\n      .style(\"opacity\", this.props.circle_opacity)\r\n      .style(\"fill\", (d) => this.props.fuel_color_lookup[d.properties.FUEL])\r\n      .style(\"stroke\", (d) => this.props.fuel_color_lookup[d.properties.FUEL]);\r\n  }\r\n\r\n  setRadius(features) {\r\n    let factor =\r\n      d3.max(features.map((d) => d.properties[this.props.field])) /\r\n      this.field_factor_divided_by;\r\n\r\n    this.map.setPaintProperty(\"plants\", \"circle-radius\", [\r\n      \"interpolate\",\r\n      [\"linear\"],\r\n      [\"zoom\"],\r\n      this.props.min_zoom,\r\n      [\"/\", [\"get\", this.props.field], factor],\r\n      this.props.max_zoom,\r\n      [\"/\", [\"get\", this.props.field], factor / this.zoom_factor],\r\n    ]);\r\n\r\n    this.updateLegend(features, factor);\r\n    // this.updateStaticMap(features, factor);\r\n  }\r\n\r\n  render() {\r\n    let title = (\r\n      <p\r\n        style={{\r\n          fontSize: \"1.2em\",\r\n          fontWeight: \"bold\",\r\n          fill: \"#000\",\r\n          className: \"title\",\r\n          textAnchor: \"middle\",\r\n        }}\r\n      >\r\n        {this.props.title}\r\n      </p>\r\n    );\r\n\r\n    return (\r\n      <div id=\"map_zoomable\" style={{ width: \"100%\", margin: \"0 auto\" }}>\r\n        {title}\r\n        <div\r\n          className=\"fuels_selection\"\r\n          style={{ height: 100 }}\r\n          ref={this.fuels}\r\n        ></div>\r\n        <div\r\n          className=\"map_container\"\r\n          style={{ height: 600 }}\r\n          ref={(node) => (this.container = node)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlantLevelMapZoom;\r\n","import React, { Component } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3_composite from \"d3-composite-projections\";\r\n\r\nimport \"./Visualization.css\";\r\n\r\nclass PlantLevelMapStatic extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.background = React.createRef();\r\n    this.container = React.createRef();\r\n  }\r\n\r\n  initStaticMap() {\r\n    let w = d3.select(this.container.current).node().clientWidth,\r\n    h = d3.select(this.container.current).node().clientHeight;\r\n    \r\n    let projection = d3_composite\r\n    .geoAlbersUsaTerritories()\r\n    .scale(this.props.scale)\r\n    .translate([w/ 2, h / 2.5]);\r\n    let path = d3.geoPath().projection(projection);\r\n\r\n    let svg = d3.select(this.container.current)\r\n    .append('svg')\r\n    .attr('width', w)\r\n    .attr('height', h);\r\n\r\n    // placeholder for map content\r\n    svg.append('g').attr('class', 'static_map');\r\n    \r\n    // add background\r\n    let background = svg.append('g');\r\n    background.selectAll(\"path\").remove();\r\n    background\r\n      .selectAll(\"path\")\r\n      .data(this.props.background_layer.features)\r\n      .enter()\r\n      .append(\"path\")\r\n      .attr(\"d\", path)\r\n      .attr(\"class\", \"paths\")\r\n      .style(\"fill\", \"transparent\")\r\n      .style(\"stroke\", \"rgb(221, 221, 221)\");\r\n\r\n    d3.select(\"#map_static\").style(\"display\", \"none\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initStaticMap();\r\n  }\r\n\r\n  render() {\r\n    let title = (\r\n      <div>\r\n        <p\r\n          style={{\r\n            fontSize: \"1.2em\",\r\n            fontWeight: \"bold\",\r\n            fill: \"#000\",\r\n            className: \"title\",\r\n            textAnchor: \"middle\",\r\n          }}\r\n        >\r\n          {this.props.title}\r\n        </p>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div id=\"map_static\" style={{ width: \"100%\", margin: \"0 auto\" }}>\r\n        {title}\r\n        <div\r\n          className=\"fuels_selection\"\r\n          style={{height: 100}}\r\n        ></div>\r\n        <div className=\"map_container\"\r\n          style={{height: 600}} \r\n          ref={this.container} >\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlantLevelMapStatic;\r\n","import React, { Component } from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport * as d3 from \"d3\";\r\nimport * as _ from \"underscore\";\r\nimport * as d3_composite from \"d3-composite-projections\";\r\n\r\nimport UpdatedTable from \"./Table\";\r\n\r\nclass ResourceMixChart extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.wrapper = React.createRef();\r\n    this.fuels = React.createRef();\r\n    this.barchart = React.createRef();\r\n    this.barchart_wrapper = React.createRef();\r\n    this.axis_y = React.createRef();\r\n    this.micromap = React.createRef();\r\n    this.tooltip = React.createRef();\r\n    this.state = {\r\n      selected_fuel: null,\r\n      show_tooltip: false\r\n    };\r\n    this.sort_text = \"Click to rearrange\";\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.initView();\r\n    } else {\r\n      if (\r\n        this.state.selected_fuel !== prevState.selected_fuel &&\r\n        this.state.selected_fuel !== null\r\n      ) {\r\n        d3.selectAll(\".selected\").classed(\"selected\", false).style(\"background\", \"none\");\r\n        d3.select(this.fuels.current)\r\n          .select(\".reset\")\r\n          .style(\"opacity\", 1)\r\n          .style(\"cursor\", \"pointer\")\r\n          .on(\"click\", () => {\r\n            this.initView();\r\n          });\r\n        d3.select(this.fuels.current)\r\n          .selectAll(\".fuel\")\r\n          .filter((e) => e === this.state.selected_fuel)\r\n          .classed(\"selected\", true)\r\n          .style(\"background\", \"#ddd\");\r\n\r\n        this.updateView(this.state.selected_fuel);\r\n      } else if (\r\n        this.state.selected_fuel !== prevState.selected_fuel &&\r\n        this.state.selected_fuel === null\r\n      ) {\r\n        d3.selectAll(\".selected\").classed(\"selected\", false).style(\"background\", \"none\");\r\n        d3.select(this.fuels.current)\r\n          .select(\".reset\")\r\n          .style(\"opacity\", 0.5)\r\n          .style(\"cursor\", \"not-allowed\");\r\n\r\n        this.initView();\r\n      }\r\n    }\r\n  }\r\n\r\n  initView() {\r\n    this.setState({ selected_fuel: null });\r\n    let marginRight = 0,\r\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\r\n    let w = d3.select(this.barchart_wrapper.current).node().clientWidth,\r\n      h = d3.select(this.barchart_wrapper.current).node().clientHeight;\r\n\r\n    let fuel_names = this.props.fuels,\r\n      fuel_colors = Object.values(this.props.fuel_name_lookup).map(\r\n        (d) => this.props.fuel_color_lookup[d]\r\n      );\r\n    let barFillScale = d3.scaleOrdinal().domain(fuel_names).range(fuel_colors);\r\n\r\n    let data = [];\r\n    _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\r\n      let cumsum = 0;\r\n      fuel_names.forEach((f) => {\r\n        data.push({\r\n          name: d.name,\r\n          id: d.id,\r\n          unit: this.props.unit,\r\n          type: this.props.fuel_name_lookup[f],\r\n          value: d[f],\r\n          cumsum: cumsum,\r\n        });\r\n        cumsum = cumsum + d[f];\r\n      });\r\n    });\r\n    let name = _.uniq(data.map((d) => d.name));\r\n\r\n    let barXScale = d3\r\n      .scaleLinear()\r\n      .domain([0, 100])\r\n      .range([0, w - marginLeft - marginRight]);\r\n    let barYScale = d3\r\n      .scaleBand()\r\n      .domain(name)\r\n      .range([0, h])\r\n      .paddingInner(0.1)\r\n      .paddingOuter(0.2);\r\n\r\n    // micromap\r\n    d3.select(this.micromap.current).selectAll(\"path\").remove();\r\n    let w_micro = d3.select(this.micromap.current).node().clientWidth,\r\n      h_micro = d3.select(this.micromap.current).node().clientHeight;\r\n    const projection = d3_composite\r\n      .geoAlbersUsaTerritories()\r\n      .scale(h_micro * 2)\r\n      .translate([w_micro / 2, h_micro / 2]);\r\n    const path = d3.geoPath().projection(projection);\r\n    d3.select(this.micromap.current)\r\n      .selectAll(\"path\")\r\n      .data(this.props.layer.features)\r\n      .enter()\r\n      .append(\"path\")\r\n      .attr(\"d\", path)\r\n      .attr(\"class\", \"paths\")\r\n      .style(\"fill\", \"transparent\")\r\n      .style(\"stroke\", \"#000\")\r\n      .style(\"stroke-width\", 0.5);\r\n\r\n    // barchart\r\n    d3.select(this.barchart.current).selectAll(\"g\").remove();\r\n    d3.select(this.barchart.current)\r\n      .attr(\"transform\", \"translate(\" + marginLeft + \",0)\")\r\n      .append(\"g\")\r\n      .selectAll(\"rect\")\r\n      .data(data)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"class\", (d) => \"bars_\" + d.id + \"_\" + d.type)\r\n      .attr(\"x\", (d) => barXScale(d.cumsum))\r\n      .attr(\"y\", (d) => barYScale(d.name))\r\n      .attr(\"rx\", 4)\r\n      .attr(\"ry\", 4)\r\n      .attr(\"width\", (d) => barXScale(d.value))\r\n      .attr(\"height\", barYScale.bandwidth())\r\n      .style(\"cursor\", \"pointer\")\r\n      .style(\"fill\", (d) => barFillScale(d.type))\r\n      .on(\"mouseover\", (d) => {\r\n        if (!this.state.show_tooltip) {\r\n          d3.select(this.tooltip.current)\r\n          .transition()\r\n          .duration(100)\r\n          .style(\"opacity\", 1);\r\n        }\r\n      })\r\n      .on(\"mousemove\", (d) => {\r\n        if (!this.state.show_tooltip) {\r\n          let table_info = {};\r\n          data.filter(e=>e.name===d.name || e.name===\"US\").forEach(e=>{\r\n            if (e.name === \"US\") {\r\n              table_info[e.name+\"_\"+e.type]=d3.format(\".2f\")(e.value);\r\n            } else {\r\n              table_info[e.type]=d3.format(\".2f\")(e.value);\r\n            }\r\n          });\r\n          \r\n          let html = renderToString(<UpdatedTable region={d.name} title={this.props.title} type={d.type} table_info={table_info}/>);\r\n          d3.select(this.tooltip.current)\r\n            .html(html)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"top\", 350 + \"px\")\r\n            .style(\"left\", 1700 + \"px\")\r\n            .style(\"opacity\", .9);\r\n          d3.select(this.wrapper.current)\r\n            .select(\"rect.bars_\" + d.id + \"_\" + d.type)\r\n            .classed(\"selected\", true)\r\n            .style(\"stroke\", \"#000\")\r\n            .style(\"stroke-width\", 1);\r\n        }\r\n      })\r\n      .on(\"mouseout\", (d) => {\r\n        if (!this.state.show_tooltip) {\r\n          d3.select(this.tooltip.current)\r\n          .transition()\r\n          .duration(500)\r\n          .style(\"opacity\", 0);\r\n        d3.selectAll(\"rect.selected\").classed(\"selected\", false).style(\"stroke\", \"none\");\r\n        }\r\n      })\r\n      .on(\"click\", d => {\r\n        if (d3.select(this.wrapper.current).select(\"rect.bars_\" + d.id + \"_\" + d.type).classed('highlighted')) {\r\n          d3.selectAll('rect.highlighted').classed('highlighted', false).style(\"stroke\", \"none\");\r\n          this.setState({'show_tooltip': false});\r\n        } else {\r\n          d3.selectAll('rect.highlighted').classed('highlighted', false).style(\"stroke\", \"none\");\r\n          d3.selectAll('rect.selected').classed('selected', false).style(\"stroke\", \"none\");\r\n          d3.select(this.wrapper.current).select(\"rect.bars_\" + d.id + \"_\" + d.type).classed('highlighted', true)\r\n          .style(\"stroke\", \"#000\")\r\n          .style(\"stroke-width\", 1);\r\n          this.setState({'show_tooltip': true});\r\n\r\n          d3.select(this.tooltip.current).style(\"opacity\", 0);\r\n          let table_info = {};\r\n          data.filter(e=>e.name===d.name || e.name===\"US\").forEach(e=>{\r\n            if (e.name === \"US\") {\r\n              table_info[e.name+\"_\"+e.type]=d3.format(\".2f\")(e.value);\r\n            } else {\r\n              table_info[e.type]=d3.format(\".2f\")(e.value);\r\n            }\r\n          });\r\n          \r\n          let html = renderToString(<UpdatedTable region={d.name} title={this.props.title} type={d.type} table_info={table_info}/>);\r\n          d3.select(this.tooltip.current)\r\n            .html(html)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"top\", 350 + \"px\")\r\n            .style(\"left\", 1700 + \"px\")\r\n            .style(\"opacity\", .9);\r\n        }\r\n\r\n      });\r\n\r\n    // axis\r\n    d3.select(this.axis_y.current).selectAll(\"g\").remove();\r\n    d3.select(this.axis_y.current)\r\n      .attr(\"transform\", \"translate(\" + marginLeft + \",0)\")\r\n      .call(d3.axisLeft(barYScale))\r\n      .selectAll(\"text\")\r\n      .filter((d) => d === \"US\")\r\n      .style(\"font-size\", \"1.5em\");\r\n\r\n    // filter\r\n    // _.uniq(data.filter(d=>d.value>0).map(d=>d.type))\r\n    let w_legend = d3.select(this.fuels.current).node().clientWidth,\r\n        h_legend = d3.select(this.fuels.current).node().clientHeight;\r\n    let avail_fuels = _.uniq(data.filter(d=>d.value>0).map(d=>d.type));\r\n    let nbox = avail_fuels.length + 1;\r\n    let boxlen = w_legend / nbox;\r\n\r\n    d3.select(this.fuels.current).selectAll(\"div\").remove();\r\n    let fuels = d3\r\n      .select(this.fuels.current)\r\n      .append(\"div\")\r\n      .attr(\"class\", \"fuels\")\r\n      .selectAll(\"div\")\r\n      .data(avail_fuels)\r\n      .enter()\r\n      .append(\"div\")\r\n      .attr(\"class\", \"fuel\")\r\n      .style(\"display\", \"inline-block\")\r\n      .style(\"cursor\", \"pointer\")\r\n      .style(\"margin\",0)\r\n      .style(\"border-radius\", \"5px\");\r\n\r\n    let fuels_svg = fuels\r\n      .append(\"svg\")\r\n      .attr(\"width\", boxlen)\r\n      .attr(\"height\", h_legend);\r\n\r\n    fuels_svg\r\n      .append(\"circle\")\r\n      .attr(\"r\", Math.min(boxlen, h_legend * 0.5) / 4)\r\n      .attr(\"fill\", (d) => this.props.fuel_color_lookup[d])\r\n      .attr(\"cx\", boxlen / 2)\r\n      .attr(\"cy\", Math.min(boxlen, h_legend * 0.5) / 2);\r\n\r\n    fuels_svg\r\n      .append(\"text\")\r\n      .attr(\"x\", boxlen / 2)\r\n      .attr(\"y\", Math.min(boxlen, h_legend * 0.5) * 1.5)\r\n      .attr(\"dx\", 0)\r\n      .attr(\"dy\", 0)\r\n      .text((d) => this.props.fuel_label_lookup[d])\r\n      .style(\"text-anchor\", \"middle\")\r\n      .call(this.props.wrap_long_labels, boxlen);\r\n\r\n    d3.select(\".fuels\")\r\n      .insert(\"div\", \".fuel\")\r\n      .style(\"display\", \"inline-block\")\r\n      .attr(\"class\", \"reset\")\r\n      .style(\"opacity\", 0.5)\r\n      .style(\"cursor\", \"not-allowed\")\r\n      .append(\"svg\")\r\n      .attr(\"width\", boxlen)\r\n      .attr(\"height\", h_legend)\r\n      .append(\"text\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", Math.min(boxlen, h_legend * 0.5) /2)\r\n      .attr(\"dx\", 0)\r\n      .attr(\"dy\", 0)\r\n      .text(this.sort_text)\r\n      .style(\"text-anchor\", \"start\")\r\n      .style(\"font-weight\", \"bold\")\r\n      .style(\"font-size\", \"1.1em\")\r\n      .call(this.props.wrap_long_labels, boxlen);\r\n\r\n    d3.selectAll(\".fuel\").on(\"click\", (d) => {\r\n      let n = d3\r\n        .select(this.fuels.current)\r\n        .selectAll(\".fuel\")\r\n        .filter((e) => e === d);\r\n      if (n.classed(\"selected\")) {\r\n        this.setState({ selected_fuel: null });\r\n      } else {\r\n        this.setState({ selected_fuel: d });\r\n      }\r\n    })\r\n    .on(\"mouseover\", (d)=>{\r\n      let n = d3\r\n      .select(this.fuels.current)\r\n      .selectAll(\".fuel\")\r\n      .filter((e) => e === d);\r\n      if (!n.classed(\"selected\")) {\r\n        n.style(\"background\", \"#eee\");\r\n      }\r\n    })\r\n    .on(\"mouseout\", (d)=>{\r\n      let n = d3\r\n      .select(this.fuels.current)\r\n      .selectAll(\".fuel\")\r\n      .filter((e) => e === d);\r\n      if (!n.classed(\"selected\")) {\r\n        n.style(\"background\", \"none\");\r\n      } else {\r\n        n.style(\"background\", \"#ddd\");\r\n      }\r\n    });\r\n  }\r\n\r\n  updateView(fuel) {\r\n    let marginRight = 0,\r\n      marginLeft = this.props.layer_type === \"state\" ? 130 : 60;\r\n    let w = d3.select(this.barchart_wrapper.current).node().clientWidth,\r\n      h = d3.select(this.barchart_wrapper.current).node().clientHeight;\r\n\r\n    if (fuel === null) {\r\n      const fuel_names = this.props.fuels;\r\n\r\n      let data = [];\r\n      _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\r\n        let cumsum = 0;\r\n        fuel_names.forEach((f) => {\r\n          data.push({\r\n            name: d.name,\r\n            id: d.id,\r\n            unit: this.props.unit,\r\n            type: this.props.fuel_name_lookup[f],\r\n            value: d[f],\r\n            cumsum: cumsum,\r\n          });\r\n          cumsum = cumsum + d[f];\r\n        });\r\n      });\r\n      let name = _.uniq(data.map((d) => d.name));\r\n      name = _.flatten([[\"US\"], name.filter((d) => d !== \"US\")]);\r\n\r\n      let barXScale = d3\r\n        .scaleLinear()\r\n        .domain([0, 100])\r\n        .range([0, w - marginLeft - marginRight]);\r\n      let barYScale = d3\r\n        .scaleBand()\r\n        .domain(name)\r\n        .range([0, h])\r\n        .paddingInner(0.1)\r\n        .paddingOuter(0.2);\r\n\r\n      // barchart\r\n      d3.select(this.barchart.current)\r\n        .selectAll(\"rect\")\r\n        .attr(\"x\", (d) => barXScale(d.cumsum))\r\n        .transition()\r\n        .attr(\"y\", (d) => barYScale(d.name));\r\n\r\n      // axis\r\n      d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\r\n    } else {\r\n      const fuel_names = _.flatten([\r\n        [_.invert(this.props.fuel_name_lookup)[fuel]],\r\n        this.props.fuels.filter(\r\n          (d) => d !== _.invert(this.props.fuel_name_lookup)[fuel]\r\n        ),\r\n      ]);\r\n\r\n      let data = [];\r\n      _.flatten([this.props.us_data, this.props.data]).forEach((d) => {\r\n        let cumsum = 0;\r\n        fuel_names.forEach((f) => {\r\n          data.push({\r\n            name: d.name,\r\n            id: d.id,\r\n            unit: this.props.unit,\r\n            type: this.props.fuel_name_lookup[f],\r\n            value: d[f],\r\n            cumsum: cumsum,\r\n          });\r\n          cumsum = cumsum + d[f];\r\n        });\r\n      });\r\n\r\n      let name = data\r\n        .filter((d) => d.type === fuel)\r\n        .sort((a, b) => b.value - a.value)\r\n        .map((d) => d.name);\r\n      name = _.flatten([[\"US\"], name.filter((d) => d !== \"US\")]);\r\n\r\n      let barXScale = d3\r\n        .scaleLinear()\r\n        .domain([0, 100])\r\n        .range([0, w - marginLeft - marginRight]);\r\n\r\n      let barYScale = d3\r\n        .scaleBand()\r\n        .domain(name)\r\n        .range([0, h])\r\n        .paddingInner(0.1)\r\n        .paddingOuter(0.2);\r\n\r\n      d3.select(this.barchart.current)\r\n        .selectAll(\"rect\")\r\n        .each((d) => {\r\n          d.cumsum = data\r\n            .filter((e) => e.name === d.name && e.type === d.type)\r\n            .map((e) => e.cumsum)[0];\r\n        })\r\n        .attr(\"x\", (d) => barXScale(d.cumsum))\r\n        .transition()\r\n        .attr(\"y\", (d) => barYScale(d.name));\r\n\r\n      d3.select(this.axis_y.current).call(d3.axisLeft(barYScale));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let title = (\r\n      <p\r\n        style={{\r\n          fontSize: \"1.2em\",\r\n          fontWeight: \"bold\",\r\n          fill: \"#000\",\r\n          className: \"title\",\r\n          textAnchor: \"middle\",\r\n        }}\r\n      >\r\n        {this.props.title + \", by \" + this.props.layer_type}\r\n      </p>\r\n    );\r\n\r\n    return (\r\n      <div ref={this.wrapper}>\r\n        {title}\r\n        <div\r\n          style={{ width: \"100%\", height: 100, margin: \"0 auto\" }}\r\n          ref={this.fuels}\r\n        ></div>\r\n        <svg\r\n          style={{ width: \"100%\", height: 600, margin: \"0 auto\" }}\r\n          ref={this.barchart_wrapper}\r\n        >\r\n          <g ref={this.barchart}></g>\r\n          <g ref={this.axis_y} className={\"axis axis_y\"}></g>\r\n        </svg>\r\n        <svg\r\n          style={{ width: \"100%\", height: 150, margin: \"0 auto\" }}\r\n          ref={this.micromap}\r\n        ></svg>\r\n        <div\r\n          ref={this.tooltip}\r\n          style={{\r\n            opacity: 0,\r\n            maxWidth: 400,\r\n            maxHeight: 520,\r\n            overflow: \"auto\",\r\n            backgroundColor: \"rgba(255,255,255,0.95)\",\r\n            boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.5)\",\r\n            borderRadius: \"4px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ResourceMixChart;\r\n","import React, { Component } from \"react\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport * as d3 from \"d3\";\r\n\r\nimport lookup from \"./assets/data/json/eGRID lookup.json\";\r\n\r\nimport OtherLevelMap from \"./OtherLevelMap\";\r\nimport OtherLevelMapLegend from \"./OtherLevelMapLegend\";\r\nimport OtherLevelBarchart from \"./OtherLevelBarchart\";\r\nimport PlantLevelMapZoom from \"./PlantLevelMapZoom\";\r\nimport PlantLevelMapStatic from \"./PlantLevelMapStatic\";\r\nimport ResourceMixChart from \"./ResourceMixChart\";\r\n\r\nimport coal from \"./assets/img/coal.svg\";\r\nimport gas from \"./assets/img/gas.svg\";\r\nimport hydro from \"./assets/img/hydro.svg\";\r\nimport nuclear from \"./assets/img/nuclear.svg\";\r\nimport oil from \"./assets/img/oil.svg\";\r\nimport papaya from \"./assets/img/papaya.svg\";\r\nimport solar from \"./assets/img/solar.svg\";\r\nimport wind from \"./assets/img/wind.svg\";\r\n\r\nimport \"./Visualization.css\";\r\n\r\nclass Visualization extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n\r\n    this.state = {\r\n      field: this.props.field,\r\n      name: this.props.name,\r\n      unit: this.props.unit,\r\n      tier1: this.props.tier1,\r\n      tier2: this.props.tier2,\r\n      tier4: this.props.tier4,\r\n      tier5: this.props.tier5,\r\n      data: [],\r\n      us_data: [],\r\n      resource_mix_data: [],\r\n      plant_data: [],\r\n      fuels: [],\r\n      map_fill: [],\r\n      background_layer: {},\r\n      layer: {},\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.field !== prevProps.field) {\r\n      this.updateState();\r\n    }\r\n  }\r\n\r\n  updateState() {\r\n    let category = lookup[this.props.tier1],\r\n      region = lookup[this.props.tier5];\r\n    let choropleth_data = [],\r\n      plant_data = { type: \"FeatureCollection\", features: [] },\r\n      resource_mix_data = [],\r\n      fuels = [],\r\n      map_fill = [],\r\n      background_layer = { type: \"FeatureCollection\", features: [] },\r\n      layer = { type: \"FeatureCollection\", features: [] };\r\n\r\n    // set state depending on region and category\r\n    const us_data = this.props.us_data.map((d) => {\r\n      Object.keys(d).forEach((e) => {\r\n        if (e.split(\"US\").length > 1) {\r\n          d[\r\n            this.props.field\r\n              .replace(/\\[|\\]|\\s/g, \"\")\r\n              .split(\",\")[0]\r\n              .substring(0, 2) + e.substring(2)\r\n          ] = d[e];\r\n        }\r\n      });\r\n      return d;\r\n    });\r\n\r\n    let data = [];\r\n    if (region === \"eGRID subregion\") {\r\n      data = this.props.subrgn_data;\r\n      layer = this.props.subrgn_layer;\r\n    } else if (region === \"NERC region\") {\r\n      data = this.props.nerc_data;\r\n      layer = this.props.nerc_layer;\r\n    } else if (region === \"state\") {\r\n      data = this.props.state_data;\r\n      layer = this.props.state_layer;\r\n    } else if (region === \"Plant\") {\r\n      data = this.props.plant_data;\r\n    }\r\n\r\n    if (category === \"grid gross loss rates\") {\r\n      choropleth_data = this.props.ggl_data;\r\n      layer = this.props.ggl_layer;\r\n      background_layer = this.props.state_layer;\r\n    } else if (category === \"resource mix (%)\") {\r\n      fuels = this.props.field.replace(/\\[|\\]|\\s/g, \"\").split(\",\");\r\n      resource_mix_data = data;\r\n    } else {\r\n      if (category.split(\"emission\").length > 1) {\r\n        map_fill = this.props.choropleth_map_fill.emission;\r\n      } else if (category.split(\"generation\").length > 1) {\r\n        map_fill = this.props.choropleth_map_fill.generation;\r\n      } else if (\r\n        category.split(\"non-baseload\").length > 1 ||\r\n        category.split(\"heat input\").length > 1 ||\r\n        category.split(\"nameplate\").length > 1\r\n      ) {\r\n        map_fill = this.props.choropleth_map_fill.others;\r\n      }\r\n\r\n      choropleth_data = data.map((d) => {\r\n        return {\r\n          name: d.name,\r\n          id: d.id,\r\n          label: d.label,\r\n          unit: this.props.unit,\r\n          type: region !== \"Plant\" ? lookup[this.props.tier5] : d.FUEL,\r\n          value: d[this.props.field],\r\n        };\r\n      });\r\n\r\n      if (region === \"Plant\") {\r\n        fuels = this.props.plant_fuels;\r\n        data.map((d) => {\r\n          plant_data.features.push({\r\n            type: \"Feature\",\r\n            properties: d,\r\n            id: d.id,\r\n            title: d.name,\r\n            geometry: { type: \"Point\", coordinates: [+d.LON, +d.LAT] },\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      field: this.props.field,\r\n      name: this.props.name,\r\n      unit: this.props.unit,\r\n      tier1: this.props.tier1,\r\n      tier2: this.props.tier2,\r\n      tier4: this.props.tier4,\r\n      tier5: this.props.tier5,\r\n      data: choropleth_data,\r\n      us_data: us_data,\r\n      resource_mix_data: resource_mix_data,\r\n      plant_data: plant_data,\r\n      fuels: fuels,\r\n      map_fill: map_fill,\r\n      layer: layer,\r\n      background_layer: background_layer,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let category = lookup[this.props.tier1],\r\n      region = lookup[this.props.tier5];\r\n    const plant_outlier = this.props.plant_outlier;\r\n    const fuel_label_lookup = this.props.fuel_label_lookup;\r\n    const fuel_color_lookup = this.props.fuel_color_lookup;\r\n    const fuel_icon_lookup = {\r\n      COAL: coal,\r\n      OIL: oil,\r\n      GAS: gas,\r\n      NUCLEAR: nuclear,\r\n      HYDRO: hydro,\r\n      BIOMASS: \"\",\r\n      WIND: wind,\r\n      SOLAR: solar,\r\n      GEOTHERMAL: \"\",\r\n      OFSL: \"\",\r\n      OTHF: papaya,\r\n      HYPR: \"\",\r\n      THPR: \"\",\r\n      TNPR: \"\",\r\n      CYPR: \"\",\r\n      CNPR: \"\",\r\n    };\r\n    const wrap_long_labels = this.props.wrap_long_labels;\r\n\r\n    let fuel_name_lookup = {};\r\n    this.state.fuels.forEach((d) => {\r\n      if (d.endsWith(\"CLPR\")) {\r\n        fuel_name_lookup[d] = \"COAL\";\r\n      } else if (d.endsWith(\"OLPR\")) {\r\n        fuel_name_lookup[d] = \"OIL\";\r\n      } else if (d.endsWith(\"GSPR\")) {\r\n        fuel_name_lookup[d] = \"GAS\";\r\n      } else if (d.endsWith(\"NCPR\")) {\r\n        fuel_name_lookup[d] = \"NUCLEAR\";\r\n      } else if (d.endsWith(\"HYPR\")) {\r\n        fuel_name_lookup[d] = \"HYDRO\";\r\n      } else if (d.endsWith(\"BMPR\")) {\r\n        fuel_name_lookup[d] = \"BIOMASS\";\r\n      } else if (d.endsWith(\"WIPR\")) {\r\n        fuel_name_lookup[d] = \"WIND\";\r\n      } else if (d.endsWith(\"SOPR\")) {\r\n        fuel_name_lookup[d] = \"SOLAR\";\r\n      } else if (d.endsWith(\"GTPR\")) {\r\n        fuel_name_lookup[d] = \"GEOTHERMAL\";\r\n      } else if (d.endsWith(\"OFPR\")) {\r\n        fuel_name_lookup[d] = \"OFSL\";\r\n      } else if (d.endsWith(\"OPPR\")) {\r\n        fuel_name_lookup[d] = \"OTHF\";\r\n      } else if (d.endsWith(\"HYPR\")) {\r\n        fuel_name_lookup[d] = \"HYPR\";\r\n      } else if (d.endsWith(\"THPR\")) {\r\n        fuel_name_lookup[d] = \"THPR\";\r\n      } else if (d.endsWith(\"TNPR\")) {\r\n        fuel_name_lookup[d] = \"TNPR\";\r\n      } else if (d.endsWith(\"CYPR\")) {\r\n        fuel_name_lookup[d] = \"CYPR\";\r\n      } else if (d.endsWith(\"CNPR\")) {\r\n        fuel_name_lookup[d] = \"CNPR\";\r\n      }\r\n    });\r\n\r\n    let vis;\r\n    if (category === \"grid gross loss rates\") {\r\n      vis = (\r\n        <OtherLevelMap\r\n          title={this.state.name}\r\n          width={800}\r\n          height={600}\r\n          scale={800}\r\n          data={this.props.ggl_data}\r\n          layer={this.props.ggl_layer}\r\n          us_data={this.state.us_data}\r\n          background_layer={this.props.state_layer}\r\n          field={this.state.field}\r\n          layer_type={category}\r\n          map_fill={this.state.map_fill}\r\n        />\r\n      );\r\n    } else if (category === \"resource mix (%)\") {\r\n      vis = (\r\n        <ResourceMixChart\r\n          title={this.state.name}\r\n          width={800}\r\n          height={600}\r\n          data={this.state.resource_mix_data}\r\n          layer={this.state.layer}\r\n          us_data={this.state.us_data}\r\n          unit={this.props.unit}\r\n          fuels={this.state.fuels}\r\n          category={category}\r\n          field={this.state.field}\r\n          layer_type={region}\r\n          fuel_label_lookup={fuel_label_lookup}\r\n          fuel_color_lookup={fuel_color_lookup}\r\n          fuel_icon_lookup={fuel_icon_lookup}\r\n          fuel_name_lookup={fuel_name_lookup}\r\n          wrap_long_labels={wrap_long_labels}\r\n        />\r\n      );\r\n    } else {\r\n      if (region !== \"Plant\") {\r\n        vis =\r\n          this.state.data.length === 0 ? (\r\n            <div className=\"loading\">\r\n              <Spinner animation=\"grow\" variant=\"success\" />\r\n            </div>\r\n          ) : (\r\n            <div style={{textAlign: \"center\"}}>\r\n              <div style={{display: \"inline-block\", verticalAlign: \"top\"}}>\r\n                <OtherLevelMap\r\n                  title={this.state.name}\r\n                  width={600}\r\n                  height={500}\r\n                  data={this.state.data}\r\n                  layer={this.state.layer}\r\n                  us_data={this.state.us_data}\r\n                  unit={this.state.unit}\r\n                  field={this.state.field}\r\n                  scale={800}\r\n                  layer_type={region}\r\n                  map_fill={this.state.map_fill}\r\n                />\r\n                <OtherLevelMapLegend\r\n                  width={500}\r\n                  height={50}\r\n                  data={this.state.data}\r\n                  map_fill={this.state.map_fill}\r\n                />\r\n              </div>\r\n              <div style={{display: \"inline-block\", verticalAlign: \"top\"}}>\r\n                <OtherLevelBarchart\r\n                  title={this.state.name}\r\n                  width={350}\r\n                  height={600}\r\n                  data={this.state.data}\r\n                  field={this.state.field}\r\n                  us_data={this.state.us_data}\r\n                  layer_type={region}\r\n                  unit={this.state.unit}\r\n                  map_fill={this.state.map_fill}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n      } else if (region === \"Plant\") {\r\n        vis =\r\n          this.state.data.length === 0 ? (\r\n            <div className=\"loading\">\r\n              <Spinner animation=\"grow\" variant=\"success\" />\r\n            </div>\r\n          ) : (\r\n            <div style={{textAlign: \"center\"}}>\r\n              <PlantLevelMapZoom\r\n                title={this.state.name}\r\n                static_map_scale={900}\r\n                data={this.state.data}\r\n                fuels={this.state.fuels}\r\n                plant_data={this.state.plant_data}\r\n                init_center={[-97.922211, 42.381266]}\r\n                init_zoom={3}\r\n                min_zoom={1}\r\n                max_zoom={20}\r\n                circle_opacity={0.8}\r\n                field={this.state.field}\r\n                plant_outlier={plant_outlier}\r\n                fuel_label_lookup={fuel_label_lookup}\r\n                fuel_color_lookup={fuel_color_lookup}\r\n                fuel_icon_lookup={fuel_icon_lookup}\r\n                wrap_long_labels={wrap_long_labels}\r\n              />\r\n              <PlantLevelMapStatic\r\n                title={this.state.name}\r\n                scale={900}\r\n                background_layer={this.props.state_layer}\r\n              />\r\n            </div>\r\n          );\r\n      }\r\n    }\r\n    return <div style={{textAlign: \"center\"}}>{vis}</div>;\r\n  }\r\n}\r\n\r\nclass UpdatedVisualization extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.exportStaticMap = this.exportStaticMap.bind(this);\r\n    this.exportVis = this.exportVis.bind(this);\r\n  }\r\n\r\n  exportStaticMap() {\r\n    let zoomable_status = d3.select(\"#map_zoomable\").style(\"display\");\r\n    let static_status = d3.select(\"#map_static\").style(\"display\");\r\n    d3.select(\"#map_zoomable\").style(\"display\", \"none\");\r\n    d3.select(\"#map_static\").style(\"display\", null);\r\n    window.print();\r\n    d3.select(\"#map_zoomable\").style(\"display\", zoomable_status);\r\n    d3.select(\"#map_static\").style(\"display\", static_status);\r\n  }\r\n\r\n  exportVis() {\r\n    window.print();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div style={{marginBottom: \"1rem\"}}>\r\n          <Button variant=\"secondary\" size=\"sm\">\r\n            Export Table\r\n          </Button>{\" \"}\r\n          {lookup[this.props.tier5] !== \"Plant\" && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.exportVis}>\r\n              Export Visualization\r\n            </Button>\r\n          )}\r\n          {lookup[this.props.tier5] === \"Plant\" && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.exportVis}>\r\n              Export Zoomable Map\r\n            </Button>\r\n          )}\r\n          {lookup[this.props.tier5] === \"Plant\" && \" \"}\r\n          {lookup[this.props.tier5] === \"Plant\" && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.exportStaticMap}>\r\n              Export Static Map\r\n            </Button>\r\n          )}\r\n        </div>\r\n        <Visualization\r\n          style={{textAlign:\"center\"}}\r\n          choropleth_map_fill={this.props.choropleth_map_fill}\r\n          plant_fuels={this.props.plant_fuels}\r\n          plant_outlier={this.props.plant_outlier}\r\n          fuel_label_lookup={this.props.fuel_label_lookup}\r\n          fuel_color_lookup={this.props.fuel_color_lookup}\r\n          wrap_long_labels={this.props.wrap_long_labels}\r\n          field={this.props.field}\r\n          name={this.props.name}\r\n          unit={this.props.unit}\r\n          tier1={this.props.tier1}\r\n          tier2={this.props.tier2}\r\n          tier4={this.props.tier4}\r\n          tier5={this.props.tier5}\r\n          plant_data={this.props.plant_data}\r\n          state_data={this.props.state_data}\r\n          subrgn_data={this.props.subrgn_data}\r\n          nerc_data={this.props.nerc_data}\r\n          ggl_data={this.props.ggl_data}\r\n          us_data={this.props.us_data}\r\n          state_layer={this.props.state_layer}\r\n          subrgn_layer={this.props.subrgn_layer}\r\n          nerc_layer={this.props.nerc_layer}\r\n          ggl_layer={this.props.ggl_layer}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UpdatedVisualization;\r\n","import React, { Component } from \"react\";\r\nimport * as _ from \"underscore\";\r\n\r\nimport lookup from \"./assets/data/json/eGRID lookup.json\";\r\n\r\nimport { SentenceDropdown, SentenceMiscellaneous } from \"./Sentence\";\r\nimport UpdatedVisualization from \"./Visualization\";\r\n\r\nclass Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const init_options = this.props.options[0];\r\n    this.state = {\r\n      tier1: init_options.tier1,\r\n      tier2: init_options.tier2,\r\n      tier4: init_options.tier4,\r\n      tier5: init_options.tier5,\r\n      field: init_options[\"Final field name in eGRID\"],\r\n      unit: init_options.Units,\r\n      name: init_options[\"Full Name\"],\r\n      data: [],\r\n      all_options: this.props.options.filter(\r\n        (d) => d.tier1 === init_options.tier1\r\n      ),\r\n      tier1_available_options: _.uniq(this.props.options.map((d) => d.tier1)),\r\n      tier2_available_options: _.uniq(\r\n        this.props.options\r\n          .filter((d) => d.tier1 === init_options.tier1)\r\n          .map((d) => d.tier2)\r\n      ),\r\n      tier4_available_options: _.uniq(\r\n        this.props.options\r\n          .filter(\r\n            (d) =>\r\n              d.tier1 === init_options.tier1 && d.tier2 === init_options.tier2\r\n          )\r\n          .map((d) => d.tier4)\r\n      ),\r\n      tier5_available_options: _.uniq(\r\n        this.props.options\r\n          .filter(\r\n            (d) =>\r\n              d.tier1 === init_options.tier1 &&\r\n              d.tier2 === init_options.tier2 &&\r\n              d.tier4 === init_options.tier4\r\n          )\r\n          .map((d) => d.tier5)\r\n      ),\r\n    };\r\n\r\n    this.handleChange1 = this.handleChange1.bind(this);\r\n    this.handleChange2 = this.handleChange2.bind(this);\r\n    this.handleChange4 = this.handleChange4.bind(this);\r\n    this.handleChange5 = this.handleChange5.bind(this);\r\n  }\r\n\r\n  handleChange1(event) {\r\n    let val = event.target.value;\r\n    this.setState(\r\n      {\r\n        tier1: val,\r\n        all_options: this.props.options.filter((d) => d.tier1 === val),\r\n        updated_tier: \"tier1\",\r\n      },\r\n      () => {\r\n        let t2_avail = this.props.options.filter((d) => d.tier1 === val);\r\n        let t2_val =\r\n          t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n            ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n            : this.state.tier2;\r\n        this.setState({ tier2: t2_val }, () => {\r\n          let t4_avail = this.props.options.filter(\r\n            (d) => d.tier1 === val && d.tier2 === this.state.tier2\r\n          );\r\n          let t4_val =\r\n            t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n              ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n              : this.state.tier4;\r\n          this.setState({ tier4: t4_val }, () => {\r\n            let t5_avail = this.props.options.filter(\r\n              (d) =>\r\n                d.tier1 === val &&\r\n                d.tier2 === this.state.tier2 &&\r\n                d.tier4 === this.state.tier4\r\n            );\r\n            let t5_val =\r\n              t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n                ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n                : this.state.tier5;\r\n            this.setState({ tier5: t5_val }, () => {\r\n              let opt = this.state.all_options.filter(\r\n                (d) =>\r\n                  d.tier1 === this.state.tier1 &&\r\n                  d.tier2 === this.state.tier2 &&\r\n                  d.tier4 === this.state.tier4 &&\r\n                  d.tier5 === this.state.tier5\r\n              )[0];\r\n              this.setState({\r\n                tier2_available_options: _.uniq(\r\n                  this.state.all_options.map((d) => d.tier2)\r\n                ),\r\n                tier4_available_options: _.uniq(\r\n                  this.state.all_options\r\n                    .filter((d) => d.tier2 === this.state.tier2)\r\n                    .map((d) => d.tier4)\r\n                ),\r\n                tier5_available_options: _.uniq(\r\n                  this.state.all_options\r\n                    .filter(\r\n                      (d) =>\r\n                        d.tier2 === this.state.tier2 &&\r\n                        d.tier4 === this.state.tier4\r\n                    )\r\n                    .map((d) => d.tier5)\r\n                ),\r\n              });\r\n              this.setState(\r\n                {\r\n                  field: opt[\"Final field name in eGRID\"],\r\n                  unit: opt.Units,\r\n                  name: opt[\"Full Name\"],\r\n                },\r\n                () => {\r\n                  console.log(this.state);\r\n                }\r\n              );\r\n            });\r\n          });\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  handleChange2(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier2: val, updated_tier: \"tier2\" }, () => {\r\n      let t4_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier2 === val\r\n      );\r\n      let t4_val =\r\n        t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n          ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n          : this.state.tier4;\r\n      this.setState({ tier4: t4_val }, () => {\r\n        let t5_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === val &&\r\n            d.tier4 === this.state.tier4\r\n        );\r\n        let t5_val =\r\n          t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n            ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n            : this.state.tier5;\r\n        this.setState({ tier5: t5_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter((d) => d.tier2 === this.state.tier2)\r\n                .map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2 && d.tier4 === this.state.tier4\r\n                )\r\n                .map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState(\r\n            {\r\n              field: opt[\"Final field name in eGRID\"],\r\n              unit: opt.Units,\r\n              name: opt[\"Full Name\"],\r\n            },\r\n            () => {\r\n              console.log(this.state);\r\n            }\r\n          );\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange4(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier4: val, updated_tier: \"tier4\" }, () => {\r\n      let t2_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier4 === val\r\n      );\r\n      let t2_val =\r\n        t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n          ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n          : this.state.tier2;\r\n      this.setState({ tier2: t2_val }, () => {\r\n        let t5_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === this.state.tier2 &&\r\n            d.tier4 === val\r\n        );\r\n        let t5_val =\r\n          t5_avail.map((d) => d.tier5).indexOf(this.state.tier5) === -1\r\n            ? _.uniq(t5_avail.map((d) => d.tier5))[0]\r\n            : this.state.tier5;\r\n        this.setState({ tier5: t5_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options\r\n                .filter(\r\n                  (d) =>\r\n                    d.tier2 === this.state.tier2 && d.tier4 === this.state.tier4\r\n                )\r\n                .map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState(\r\n            {\r\n              field: opt[\"Final field name in eGRID\"],\r\n              unit: opt.Units,\r\n              name: opt[\"Full Name\"],\r\n            },\r\n            () => {\r\n              console.log(this.state);\r\n            }\r\n          );\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  handleChange5(event) {\r\n    let val = event.target.value;\r\n    this.setState({ tier5: val, updated_tier: \"tier5\" }, () => {\r\n      let t2_avail = this.props.options.filter(\r\n        (d) => d.tier1 === this.state.tier1 && d.tier5 === val\r\n      );\r\n      let t2_val =\r\n        t2_avail.map((d) => d.tier2).indexOf(this.state.tier2) === -1\r\n          ? _.uniq(t2_avail.map((d) => d.tier2))[0]\r\n          : this.state.tier2;\r\n      this.setState({ tier2: t2_val }, () => {\r\n        let t4_avail = this.props.options.filter(\r\n          (d) =>\r\n            d.tier1 === this.state.tier1 &&\r\n            d.tier2 === this.state.tier2 &&\r\n            d.tier5 === val\r\n        );\r\n        let t4_val =\r\n          t4_avail.map((d) => d.tier4).indexOf(this.state.tier4) === -1\r\n            ? _.uniq(t4_avail.map((d) => d.tier4))[0]\r\n            : this.state.tier4;\r\n        this.setState({ tier4: t4_val }, () => {\r\n          let opt = this.state.all_options.filter(\r\n            (d) =>\r\n              d.tier1 === this.state.tier1 &&\r\n              d.tier2 === this.state.tier2 &&\r\n              d.tier4 === this.state.tier4 &&\r\n              d.tier5 === this.state.tier5\r\n          )[0];\r\n          this.setState({\r\n            tier2_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier2)\r\n            ),\r\n            tier4_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier4)\r\n            ),\r\n            tier5_available_options: _.uniq(\r\n              this.state.all_options.map((d) => d.tier5)\r\n            ),\r\n          });\r\n          this.setState(\r\n            {\r\n              field: opt[\"Final field name in eGRID\"],\r\n              unit: opt.Units,\r\n              name: opt[\"Full Name\"],\r\n            },\r\n            () => {\r\n              console.log(this.state);\r\n            }\r\n          );\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let all_options = this.state.all_options;\r\n    let tier2_options = _.uniq(all_options.map((op) => lookup[op.tier2])),\r\n      tier4_options = _.uniq(all_options.map((op) => lookup[op.tier4])),\r\n      tier5_options = _.uniq(all_options.map((op) => lookup[op.tier5]));\r\n    return (\r\n      <main className=\"main-content\">\r\n        <p style={{fontSize: \"1em\",\r\n                   fontWeight: \"bold\",\r\n                   marginBottom: \"0.5rem\",\r\n                   padding: \".8rem 0\", \r\n                   borderBottom: \"1px solid rgba(0, 0, 0, 0.5)\"}}>\r\n          I want to explore\r\n          <SentenceDropdown\r\n            id=\"tier1\"\r\n            change={this.handleChange1}\r\n            updated_tier={this.state.updated_tier}\r\n            selected_option={this.state.tier1}\r\n            available_options={this.state.tier1_available_options}\r\n            options={_.uniq(\r\n              this.props.options.map((op) => [op.tier1, lookup[op.tier1]]),\r\n              (d) => d[0]\r\n            )}\r\n          />\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={\r\n              this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct1\r\n            }\r\n          />\r\n          <span> </span>\r\n          {tier2_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier2\"\r\n              change={this.handleChange2}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier2}\r\n              available_options={this.state.tier2_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier2,\r\n                  lookup[op.tier2],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier2_options.length === 1 && tier2_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier2]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={\r\n              this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct2\r\n            }\r\n          />\r\n          <span> </span>\r\n          {tier4_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier4\"\r\n              change={this.handleChange4}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier4}\r\n              available_options={this.state.tier4_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier4,\r\n                  lookup[op.tier4],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier4_options.length === 1 && tier4_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier4]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={\r\n              this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct3\r\n            }\r\n          />\r\n          <span> </span>\r\n          {tier5_options.length > 1 ? (\r\n            <SentenceDropdown\r\n              id=\"tier5\"\r\n              change={this.handleChange5}\r\n              updated_tier={this.state.updated_tier}\r\n              selected_option={this.state.tier5}\r\n              available_options={this.state.tier5_available_options}\r\n              options={_.uniq(\r\n                this.state.all_options.map((op) => [\r\n                  op.tier5,\r\n                  lookup[op.tier5],\r\n                ]),\r\n                (d) => d[0]\r\n              )}\r\n            />\r\n          ) : tier5_options.length === 1 && tier5_options[0] !== \"\" ? (\r\n            <SentenceMiscellaneous value={lookup[this.state.tier5]} />\r\n          ) : (\r\n            <span></span>\r\n          )}\r\n          <span> </span>\r\n          <SentenceMiscellaneous\r\n            value={\r\n              this.props.conjunction[\"tier1_\" + this.state.tier1].conjunct4\r\n            }\r\n          />\r\n          <span> for </span>\r\n          <SentenceMiscellaneous value={this.props.year} />.\r\n        </p>\r\n        <UpdatedVisualization\r\n          style={{padding: \".8rem 0\", borderBottom: \"1px solid rgba(0, 0, 0, 0.5)\"}}\r\n          choropleth_map_fill={this.props.choropleth_map_fill}\r\n          plant_fuels={this.props.plant_fuels}\r\n          plant_outlier={this.props.plant_outlier}\r\n          fuel_label_lookup={this.props.fuel_label_lookup}\r\n          fuel_color_lookup={this.props.fuel_color_lookup}\r\n          wrap_long_labels={this.props.wrap_long_labels}\r\n          field={this.state.field}\r\n          name={this.state.name}\r\n          unit={this.state.unit}\r\n          tier1={this.state.tier1}\r\n          tier2={this.state.tier2}\r\n          tier4={this.state.tier4}\r\n          tier5={this.state.tier5}\r\n          plant_data={this.props.plant_data}\r\n          state_data={this.props.state_data}\r\n          subrgn_data={this.props.subrgn_data}\r\n          nerc_data={this.props.nerc_data}\r\n          ggl_data={this.props.ggl_data}\r\n          us_data={this.props.us_data}\r\n          state_layer={this.props.state_layer}\r\n          subrgn_layer={this.props.subrgn_layer}\r\n          nerc_layer={this.props.nerc_layer}\r\n          ggl_layer={this.props.ggl_layer}\r\n        ></UpdatedVisualization>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n","import React, { Component } from \"react\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Dialog from \"./Dialog\";\r\nimport * as d3 from \"d3\";\r\nimport * as topojson from \"topojson-client\";\r\n\r\nimport logo from \"./assets/img/logo.png\";\r\n\r\nimport subrgn_topo from \"./assets/data/json/SUBRGN.json\";\r\nimport nerc_topo from \"./assets/data/json/NERC.json\";\r\nimport ggl_topo from \"./assets/data/json/GGL.json\";\r\nimport us_topo from \"./assets/data/json/US.json\";\r\n\r\nimport data from \"./assets/data/csv/eGRID all-level sentence structure.csv\";\r\nimport subrgn from \"./assets/data/csv/subregion.csv\";\r\nimport nerc from \"./assets/data/csv/NERC.csv\";\r\nimport state from \"./assets/data/csv/state.csv\";\r\nimport statefullname from \"./assets/data/csv/eGRID state fullname.csv\";\r\nimport plant from \"./assets/data/csv/plant.csv\";\r\nimport ggl from \"./assets/data/csv/GGL.csv\";\r\nimport us from \"./assets/data/csv/US.csv\";\r\n\r\nimport Main from \"./Main\";\r\n\r\nimport \"./EPAStyle.css\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show_modal: false,\r\n      options: [],\r\n      plant_data: [],\r\n      state_data: [],\r\n      subrgn_data: [],\r\n      nerc_data: [],\r\n      ggl_data: [],\r\n      us_data: [],\r\n    };\r\n\r\n    this.year = 2018;\r\n    this.conjunction = {\r\n      tier1_0: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_1: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_2: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_3: {\r\n        conjunct1: \"of\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_4: {\r\n        conjunct1: \"from\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_5: {\r\n        conjunct1: \"from\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_6: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_7: {\r\n        conjunct1: \"for\",\r\n        conjunct2: \"for\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_8: {\r\n        conjunct1: \"\",\r\n        conjunct2: \"\",\r\n        conjunct3: \"at the\",\r\n        conjunct4: \"level\",\r\n      },\r\n      tier1_9: { conjunct1: \"\", conjunct2: \"\", conjunct3: \"\", conjunct4: \"\" },\r\n    };\r\n    this.choropleth_map_fill = {\r\n      emission: [\"#eff3ff\", \"#bdd7e7\", \"#6baed6\", \"#3182bd\", \"#08519c\"],\r\n      generation: [\"#feedde\", \"#fdbe85\", \"#fd8d3c\", \"#e6550d\", \"#a63603\"],\r\n      others: [\"#edf8e9\", \"#bae4b3\", \"#74c476\", \"#31a354\", \"#006d2c\"]\r\n    };\r\n    this.plant_fuels = [\r\n      \"COAL\",\r\n      \"OIL\",\r\n      \"GAS\",\r\n      \"NUCLEAR\",\r\n      \"HYDRO\",\r\n      \"BIOMASS\",\r\n      \"WIND\",\r\n      \"SOLAR\",\r\n      \"GEOTHERMAL\",\r\n      \"OFSL\",\r\n      \"OTHF\",\r\n    ];\r\n    this.plant_outlier = {\r\n      PLNOXRTA: 2000,\r\n      PLNOXRTO: 1000,\r\n      PLSO2RTA: 800,\r\n      PLCO2RTA: 10000,\r\n      PLCH4RTA: 20,\r\n      PLN2ORTA: 3,\r\n      PLC2ERTA: 10000,\r\n      PLNOXRA: 7,\r\n      PLNOXRO: 7,\r\n      PLSO2RA: 6,\r\n      PLCO2RA: 300,\r\n      PLNGENAN: 20000000,\r\n      PLNGENOZ: 10000000,\r\n      PLGENACL: undefined,\r\n      PLGENAOL: undefined,\r\n      PLGENAGS: 13000000,\r\n      PLGENANC: 27000000,\r\n      PLGENAHY: 16000000,\r\n      PLGENABM: undefined,\r\n      PLGENAWI: 2000000,\r\n      PLGENASO: 1000000,\r\n      PLGENAGT: 1000000,\r\n      PLGENAOF: 1000000,\r\n      PLGENAOP: undefined,\r\n      PLGENATN: 20000000,\r\n      PLGENATR: 20000000,\r\n      PLGENATH: 2000000,\r\n      PLGENACY: 20000000,\r\n      PLGENACN: 20000000,\r\n      PLHTIAN: 165000000,\r\n      PLHTIOZ: 75000000,\r\n      PLNOXAN: undefined,\r\n      PLNOXOZ: undefined,\r\n      PLSO2AN: 30000,\r\n      PLCO2AN: 17000000,\r\n      PLCH4AN: undefined,\r\n      PLN2OAN: undefined,\r\n      PLCO2EQA: 17000000,\r\n    };\r\n    this.fuel_label_lookup = {\r\n      COAL: \"Coal\",\r\n      OIL: \"Oil\",\r\n      GAS: \"Gas\",\r\n      NUCLEAR: \"Nuclear\",\r\n      HYDRO: \"Hydro\",\r\n      BIOMASS: \"Biomass\",\r\n      WIND: \"Wind\",\r\n      SOLAR: \"Solar\",\r\n      GEOTHERMAL: \"Geo thermal\",\r\n      OFSL: \"Other Fossil\",\r\n      OTHF: \"Other Unknown\",\r\n      HYPR: \"Hydro\",\r\n      THPR: \"All Non-Hydro Renewables\",\r\n      TNPR: \"All Non-Renewables\",\r\n      CYPR: \"All Combustion\",\r\n      CNPR: \"All Non-Combustion\",\r\n    };\r\n    this.fuel_color_lookup = {\r\n      COAL: \"rgb(85, 85, 85)\",\r\n      OIL: \"rgb(237, 28, 36)\",\r\n      GAS: \"rgb(246, 139, 40)\",\r\n      NUCLEAR: \"rgb(207, 74, 154)\",\r\n      HYDRO: \"rgb(0, 129, 197)\",\r\n      BIOMASS: \"rgb(44, 160, 44)\",\r\n      WIND: \"rgb(13, 177, 75)\",\r\n      SOLAR: \"rgb(215, 201, 68)\",\r\n      GEOTHERMAL: \"rgb(255, 152, 150)\",\r\n      OFSL: \"rgb(140, 86, 75)\",\r\n      OTHF: \"rgb(255, 239, 213)\",\r\n      HYPR: \"rgb(0, 129, 197)\",\r\n      THPR: \"rgb(13, 177, 75)\",\r\n      TNPR: \"rgb(255, 187, 120)\",\r\n      CYPR: \"rgb(237, 28, 36)\",\r\n      CNPR: \"rgb(255, 187, 120)\",\r\n    };\r\n    this.wrap_long_labels = function (text, width) {\r\n      text.each(function () {\r\n        var text = d3.select(this),\r\n          words = text.text().split(/\\s+/).reverse(),\r\n          word,\r\n          line = [],\r\n          lineNumber = 0,\r\n          lineHeight = 1.1, // ems\r\n          x = text.attr(\"x\"),\r\n          y = text.attr(\"y\"),\r\n          dy = parseFloat(text.attr(\"dy\")),\r\n          tspan = text\r\n            .text(null)\r\n            .append(\"tspan\")\r\n            .attr(\"x\", x)\r\n            .attr(\"y\", y)\r\n            .attr(\"dy\", dy + \"em\");\r\n        while ((word = words.pop())) {\r\n          line.push(word);\r\n          tspan.text(line.join(\" \"));\r\n          if (tspan.node().getComputedTextLength() > width) {\r\n            line.pop();\r\n            tspan.text(line.join(\" \"));\r\n            line = [word];\r\n            tspan = text\r\n              .append(\"tspan\")\r\n              .attr(\"x\", x)\r\n              .attr(\"y\", y)\r\n              .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\r\n              .text(word);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    this.ggl_layer = topojson.feature(ggl_topo, \"GGL\");\r\n    this.subrgn_layer = topojson.feature(subrgn_topo, \"subregion\");\r\n    this.nerc_layer = topojson.feature(nerc_topo, \"NERC\");\r\n    this.state_layer = topojson.feature(us_topo, \"states\");\r\n\r\n    this.ggl_layer.features.map((d) => (d.name = d.properties.GGL));\r\n    this.nerc_layer.features = this.nerc_layer.features\r\n      .filter((d) => d.properties.NERC !== \"-\" && d.properties.NERC !== \"SPP\") // no data for \"-\" and \"SPP\"\r\n      .map((d) => {\r\n        d.name = d.properties.NERC;\r\n        return d;\r\n      });\r\n    this.subrgn_layer.features.map((d) => (d.name = d.properties.Subregions));\r\n    this.state_layer.features = this.state_layer.features.filter(d=>d.id !== 72 && d.id !== 78); // no data for state 72 and state 78\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.prepData();\r\n  }\r\n\r\n  prepData() {\r\n    Promise.all([\r\n      d3.csv(data),\r\n      d3.csv(subrgn),\r\n      d3.csv(state),\r\n      d3.csv(statefullname),\r\n      d3.csv(nerc),\r\n      d3.csv(plant),\r\n      d3.csv(ggl),\r\n      d3.csv(us),\r\n    ]).then(\r\n      ([options, subrgn, state, state_fullname, nerc, plant, ggl, us]) => {\r\n        // process data\r\n        state.map((d) => {\r\n          d.label = d.PSTATABB;\r\n          d.ABBR = d.PSTATABB;\r\n          d.PSTATABB = state_fullname\r\n            .filter((e) => e.STATE === d.PSTATABB)\r\n            .map((e) => e.STATEFULL)[0];\r\n          d.name = d.PSTATABB;\r\n\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = d.FIPSST;\r\n        });\r\n        this.state_layer.features.map((d) =>\r\n          state.filter((e) => e.FIPSST === d.id).length === 1\r\n            ? (d.name = state.filter((e) => e.FIPSST === d.id)[0].name)\r\n            : \"\"\r\n        );\r\n\r\n        plant.map((d, i) => {\r\n          d.label = d.PNAME;\r\n          d.name = d.PNAME;\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = i;\r\n        });\r\n\r\n        subrgn.map((d, i) => {\r\n          d.label = d.SUBRGN;\r\n          d.name = d.SUBRGN;\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = i;\r\n        });\r\n\r\n        nerc = nerc.filter((d) => d.NERC !== \"NA\");\r\n        nerc.map((d, i) => {\r\n          d.label = d.NERC;\r\n          d.name = d.NERC;\r\n          Object.keys(d).forEach(function (e) {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.id = i;\r\n        });\r\n\r\n        ggl.map((d, i) => {\r\n          d.label = d.GGL;\r\n          d.name = d.GGL;\r\n          d.id = i;\r\n          d.unit = \"%\";\r\n          d.value = +d.percentage;\r\n        });\r\n\r\n        us.map((d) => {\r\n          Object.keys(d).forEach((e) => {\r\n            if (!isNaN(+d[e].replace(/,/g, \"\"))) {\r\n              d[e] = +d[e].replace(/,/g, \"\");\r\n            }\r\n          });\r\n          d.name = \"US\";\r\n          d.id = -1;\r\n        });\r\n\r\n        this.state_data = state;\r\n        this.plant_data = plant;\r\n        this.subrgn_data = subrgn;\r\n        this.nerc_data = nerc;\r\n        this.ggl_data = ggl;\r\n        this.us_data = us;\r\n\r\n        this.setState({\r\n          options: options.filter((e) => e.tier5 !== \"52\"),\r\n          state_data: state,\r\n          plant_data: plant,\r\n          subrgn_data: subrgn,\r\n          nerc_data: nerc,\r\n          ggl_data: ggl,\r\n          us_data: us,\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{padding: \"5px\"}}>\r\n        {this.state.options.length > 0 &&\r\n        this.state.plant_data.length > 0 &&\r\n        this.state.state_data.length > 0 &&\r\n        this.state.subrgn_data.length > 0 &&\r\n        this.state.nerc_data.length > 0 &&\r\n        this.state.ggl_data.length > 0 &&\r\n        this.state.us_data.length > 0 ? (\r\n          <div>\r\n            <header></header>\r\n            <Main\r\n              year={this.year}\r\n              conjunction={this.conjunction}\r\n              choropleth_map_fill={this.choropleth_map_fill}\r\n              plant_fuels={this.plant_fuels}\r\n              plant_outlier={this.plant_outlier}\r\n              fuel_label_lookup={this.fuel_label_lookup}\r\n              fuel_color_lookup={this.fuel_color_lookup}\r\n              wrap_long_labels={this.wrap_long_labels}\r\n              options={this.state.options}\r\n              plant_data={this.state.plant_data}\r\n              state_data={this.state.state_data}\r\n              subrgn_data={this.state.subrgn_data}\r\n              nerc_data={this.state.nerc_data}\r\n              ggl_data={this.state.ggl_data}\r\n              us_data={this.state.us_data}\r\n              state_layer={this.state_layer}\r\n              subrgn_layer={this.subrgn_layer}\r\n              nerc_layer={this.nerc_layer}\r\n              ggl_layer={this.ggl_layer}\r\n            ></Main>\r\n          </div>\r\n        ) : (\r\n          <div className=\"loading\">\r\n            <Spinner animation=\"grow\" variant=\"success\" />\r\n          </div>\r\n        )}\r\n        <Dialog\r\n          show={this.state.show_modal}\r\n          onHide={() => this.setState({ show_modal: false })}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n/**<header>\r\n              <h2>Emissions and Generation Resource Integrated Database</h2>\r\n              <span className=\"dialog\"> (</span>\r\n              <span\r\n                className=\"dialog-text\"\r\n                onClick={() => this.setState({ show_modal: true })}\r\n              >\r\n                More Information\r\n              </span>\r\n              <span className=\"dialog\">)</span>\r\n              <img id=\"logo\" src={logo}></img>\r\n            </header> */\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/eGRID all-level sentence structure.d04b63af.csv\";","module.exports = __webpack_public_path__ + \"static/media/subregion.64fdecd4.csv\";","module.exports = __webpack_public_path__ + \"static/media/NERC.c9b492cd.csv\";","module.exports = __webpack_public_path__ + \"static/media/state.0b78ae39.csv\";","module.exports = __webpack_public_path__ + \"static/media/eGRID state fullname.a33812da.csv\";","module.exports = __webpack_public_path__ + \"static/media/plant.08bfd867.csv\";","module.exports = __webpack_public_path__ + \"static/media/GGL.5324b8ca.csv\";","module.exports = __webpack_public_path__ + \"static/media/US.083cfe3a.csv\";","module.exports = __webpack_public_path__ + \"static/media/coal.9692c7b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/gas.383feb87.svg\";"],"sourceRoot":""}